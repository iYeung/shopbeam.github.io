(function(l){function i(){this.ea={};this.ta="";this.h={};this.ia={};this.ja=null}i.prototype={gb:function(a){this.ta=a.accountKey;this.h=a.playerInfo;this.ia=a.timerInfo;this.ja=a.videoID;a=this.Ca();if(this.ia)this.Da(this.ia,a);else this.ja&&this.Ea(this.ja,a);a.B(this.h)},Ca:function(a){a||(a="default");this.ea[a]||(this.ea[a]=new e(this.ta));return this.ea[a]},Da:function(a,b){a=new j(a.property,a.target,a.units);b.ha(a)},Ea:function(a,b){if(a=document.getElementById(a)){var d=function(){try{return arguments.callee.e.currentTime}catch(c){return 0}};
d.e=a;b.ha(new j(d,this,"seconds"));d=function(){arguments.callee.node.Ka(arguments.callee.e.duration*1000)};d.e=a;d.node=b;if(l.addEventListener)a.addEventListener("loadedmetadata",d,false);else l.attachEvent&&a.attachEvent("onloadedmetadata",d)}}};i.o=function(){if(!i.m)i.m=new i;return i.m};i.prototype.configure=i.prototype.gb;i.prototype.getRemoteNode=i.prototype.Ca;i.prototype.instrumentGenericTimer=i.prototype.Da;i.prototype.instrumentVideo=i.prototype.Ea;l._vmc=i.o();function g(a){this.M=a;
this.L=[];this.k=[];this.za=this.ba=false;this.Lb=this.hb=0;this.N=null;this.Jb=false;this.la="5BB9E709A4BC291CB19F278D520D952920C04F70";this.F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.U=this.xa=false;this.sb()}g.Pa=20;g.Ib=1800000;g.Hb=5000;g.audienceServer="http://audience.visiblemeasures.com";g.obfuscate=true;g.server="http://video.od.visiblemeasures.com";g.prototype={kb:function(a){for(var b=this.la.length,d=a.length,c=[],h=0;h<d;)for(var k=0;k<b&&h<d;k++,h++){var n=
this.la.charCodeAt(k)^a.charCodeAt(h);c[h]=n}return this.ab(c)},ab:function(a){for(var b=0,d=new String(""),c,h,k,n,p,o;b<a.length;){c=a[b++];h=a[b++];k=a[b++];n=c>>2;c=(c&3)<<4|h>>4;p=(h&15)<<2|k>>6;o=k&63;if(isNaN(h))p=o=64;else if(isNaN(k))o=64;d+=this.F.charAt(n)+this.F.charAt(c);d+=this.F.charAt(p)+this.F.charAt(o)}return d},ob:function(){var a=(new Date).getTime()+":";do var b=a+this.hb++;while(document.getElementById(b)!=null);return b},l:function(a,b){return a+"="+escape(b).replace("+","%2B")},
ya:function(){this.ba=true;if(this.k[0].data_asi)this.k[0].data_asi=this.Ja.id;if(this.k[0].data_pas)this.k[0].data_pas=this.Ja.id;var a=[];a.push(this.l("user",this.Gb.id));a.push(this.l("key",this.M));a.push(this.l("random",Math.random()));a.push(this.l("ct",(new Date).getTime()));for(var b in this.k[0]){var d=this.k[0][b];d==null||typeof d=="number"&&isNaN(d)||a.push(this.l(b,d))}this.N=this.ob();a.push(this.l("objectId",this.N));a=a.join("&");if(g.obfuscate&&!this.xa){b=[];b.push(this.l("p",1));
b.push(this.l("m",this.kb(a)));a=b.join("&")}a="/log.js?"+a;try{var c=document.createElement("script");c.id=this.N;c.defer="defer";c.src=g.server+a;var h=document.getElementsByTagName("head").item(0);h!=null&&h.appendChild(c)}catch(k){}},W:function(){if(!(this.ba||!this.U))if(this.za){this.za=false;this.ya(this.k)}else if(this.L.length>0){this.k.push(this.L.shift());this.ya()}},ib:function(){try{var a=document.getElementById(this.N),b=document.getElementsByTagName("head").item(0);b&&a!=null&&b.removeChild(a)}catch(d){}this.k=
[];this.ba=false;this.W()},Fa:function(a,b){if(!(this.L.length>g.Pa)){var d={};d.feature=a;d.type=2;d.ts=(new Date).getTime();for(var c in b)d["data_"+c]=b[c];this.L.push(d);this.W()}},sb:function(){this.U=false;var a=(new Date).getTime(),b="/u/getuid/?j=1&nocache="+a;if(this.M&&this.M.length>0)b+="&a="+this.M;try{var d=document.createElement("script");d.id="audience_"+a;d.defer="defer";d.src=g.audienceServer+b;var c=document.getElementsByTagName("head").item(0);c!=null&&c.appendChild(d)}catch(h){}},
tb:function(a,b,d,c,h){this.Gb={id:a};this.Ja={id:b};if(c){this.xa=true;if(h)g.server=h}d==true&&this.Fa("B");this.U=true;this.W()}};g.o=function(a){if(!g.m)g.m=new g(a);return g.m};g.i=g.o;g.prototype.c=g.prototype.ib;g.prototype.u=g.prototype.tb;l.VMCDispatcher=g;function m(){this.I=null;this.ka=this.Z();this.Y=true}m.prototype={J:function(a,b,d){if(d==0){if(this.I!=a){this.I=a;if(!this.Y)this.ka=this.Z();this.Kb=false}}else if(d==1)if(this.I!=b&&b){this.I=b;if(!this.Y)this.ka=this.Z();this.Y=false}},
Z:function(){return String((new Date).getTime())}};m.o=function(){if(!m.m)m.m=new m;return m.m};function f(){}f.T=0;f.qa=1;f.oa=2;f.pa=3;f.na=4;f.Sa=5;f.ra=6;f.Ra=7;f.sa=8;f.Ta=9;f.Qa=10;f.qb=function(a){return a in[f.T,f.qa,f.oa,f.pa,f.na,f.sa,f.ra]};f.valueOf=function(a){if(isNaN(a))switch(a){case "LA":return f.T;case "LPR":return f.qa;case "LPM":return f.oa;case "LPO":return f.pa;case "LI":return f.na;case "NLOIS":return f.Sa;case "NLOIV":return f.ra;case "NLOI":return f.Ra;case "NLOV":return f.sa;
case "NLOPP":return f.Ta;case "NLA":return f.Qa;default:return f.T}else return a};function e(a){this.jb=g.o(a);this.Na=m.o();this.P=false;this.A=this.ua(l.location.href);this.D=this.ua(document.referrer);this.encoding=null;this.h={};this.b={};this.n=null}e.Wa="3.2.2";e.Oa=0;e.R=1;e.B=false;e.prototype={ha:function(a){if(this.d){this.d.removeEventListener("progress",this);this.d.removeEventListener("beacon",this);delete this.d}this.d=a;this.d.addEventListener("progress",this);this.d.addEventListener("beacon",
this)},pb:function(){return this.d},B:function(a){a||(a={});this.h&&delete this.h;this.h={};this.h.id=a.id?a.id:"1";this.h.name=a.tag?a.tag:a.name;if(a.hostPage)this.A=a.hostPage;if(a.hostReferrer)this.D=a.hostReferrer;if(a.encoding)this.encoding=a.encoding;if(!e.B){e.B=true;this.f("0");this.f("1")}},Ka:function(a){if(!(isNaN(a)||a<=0))if(this.b&&!this.b.g){this.b.g=a;this.d.Ma(a);this.f("4")}},La:function(a){this.b&&delete this.b;this.b={};this.b.id=a.id?a.id:"0";this.b.title=a.title;this.b.description=
a.description;this.b.g=a.duration?a.duration:0;this.b.eb=a.category;this.b.lb=a.flvSourceUrl;this.b.Eb=a.thumbnailUrl;this.b.rb=a.lineupId;this.b.Nb=a.lineupPos;this.b.Bb=a.publisherId;this.b.db=a.businessUnit;this.b.cb=a.brand;this.b.mb=a.franchise;this.b.Db=a.tags&&typeof a.tags=="object"?a.tags.join(","):a.tags;for(var b=1;b<=10;b++){this.b["custom"+b]=a["custom"+b];this.b["customView"+b]=a["customView"+b]}this.b.t=a.assetType?a.assetType:0;if(this.b.t==e.R){this.b.s=f.valueOf(a.adFormat);this.b.w=
a.contentLinkId;this.b.H=a.campaign}},J:function(a){this.d.reset();this.La(a);this.Na.J(this.b.id,this.b.w,this.b.t);this.P=true;this.f("50");if(this.b.g||this.b.t==e.R&&!f.qb(this.b.s)){this.d.Ma(this.b.g);this.f("4")}},V:function(){if(this.P){this.P=false;this.d.Ia();this.f("6")}},va:function(){this.f("7")},Xa:function(a){this.n=new q;this.J(a)},Za:function(){this.n.Ga();this.V()},Ya:function(){this.n.pause();this.va()},$a:function(){this.n.Ga()},z:function(a){switch(a){case "rss":this.f("30",{id:this.b.id});
break;case "link":this.f("36",{id:this.b.id});break;case "blog":this.f("37",{id:this.b.id});break;case "email":this.f("31",{id:this.b.id});break;case "embed":this.f("32",{id:this.b.id});break}},wb:function(){this.z("email")},xb:function(){this.z("embed")},yb:function(){this.z("link")},zb:function(){this.z("rss")},vb:function(){this.z("blog")},ub:function(a){this.f("99",{ec:a})},f:function(a,b){b||(b={});var d="",c={};c.vid=this.Na.ka;if(this.b.t)c.a=this.b.t;switch(a){case "0":d=this.h.id;c.pds=this.h.name;
break;case "1":d=this.h.id;c.pas="AUTOFILL";c.pur=this.A;c.ref=this.D;break;case "4":d=this.b.id;c.ttl=this.b.title;c.dsc=this.b.description;c.tgs=this.b.Db;c.drn=this.b.g;c.crt=this.b.Bb;c.ctg=this.b.eb;c.fr=this.b.mb;c.thm=this.b.Eb;c.src=this.b.lb;c.bu=this.b.db;c.br=this.b.cb;for(b=1;b<=10;b++)c["c"+b]=this.b["custom"+b];c.cmp=this.b.H;break;case "50":case "6":d=this.b.id;c.asi="AUTOFILL";c.pur=this.A;c.ref=this.D;c.cli=this.b.rb;c.adf=this.b.s;c.lnk=this.b.w;for(b=1;b<=10;b++)c["cv"+b.toString(16)]=
this.b["customView"+b];break;case "7":d=this.b.id;c.vdr=this.n?this.n.Ba():this.d.Q;c.adf=this.b.s;c.lnk=this.b.w;c.cmp=this.b.H;break;case "8":d=this.b.id+"."+b.segment;d+=b.playthru?".1":".0";c.adf=this.b.s;c.lnk=this.b.w;c.cmp=this.b.H;break;case "30":case "31":case "32":case "36":case "37":d=b.id!=null?b.id:this.b.id;c.sgn=this.d.$();c.pur=this.A;c.ref=this.D;break;case "99":d=this.b.id;c.ec=b.ec;c.pur=this.A;c.ref=this.D;c.sgn=this.d.$();c.pcp=this.d.p();c.vdr=this.n?this.n.Ba():this.d.Q;c.adf=
this.b.s;c.lnk=this.b.w;c.cmp=this.b.H;break}this.jb.Fa(a+"."+d,c)},bb:function(a){this.f("8",a);a.segment==j.j&&this.f("7")},Ab:function(){this.P&&this.V()},ua:function(a){var b=a.indexOf("?");if(b!=-1)a=a.substring(0,b);return a}};e.prototype.setTimer=e.prototype.ha;e.prototype.getTimer=e.prototype.pb;e.prototype.playerLoaded=e.prototype.B;e.prototype.setClipDuration=e.prototype.Ka;e.prototype.setClipInfo=e.prototype.La;e.prototype.clipViewed=e.prototype.J;e.prototype.clipPlayed=e.prototype.V;e.prototype.clipCompleted=
e.prototype.va;e.prototype.adImpression=e.prototype.Xa;e.prototype.adImpressionPlayed=e.prototype.Za;e.prototype.adImpressionCompleted=e.prototype.Ya;e.prototype.adRestore=e.prototype.$a;e.prototype.logReferEmbed=e.prototype.xb;e.prototype.logReferEmail=e.prototype.wb;e.prototype.logReferBlog=e.prototype.vb;e.prototype.logReferLink=e.prototype.yb;e.prototype.logReferRSS=e.prototype.zb;e.prototype.logCustomEvent=e.prototype.ub;e.prototype.beacon=e.prototype.bb;e.prototype.progress=e.prototype.Ab;e.ASSET_TYPE_VIDEO=
e.Oa;e.ASSET_TYPE_AD=e.R;e.VERSION=e.Wa;l.VMCRemoteNode=e;function j(a,b,d){this.ma=500;this.S=1000;this.Va=2000;this.Ua=500;this.O={};this.v=this.g=0;this.G=[];this.q=[];this.K=this.aa=false;this.Q=this.lastPosition=0;this.r=false;this.ga=0;this.da=a;this.target=b;this.Fb=d?d:"milliseconds";this.fa=function(){return arguments.callee.method.apply(arguments.callee.target,arguments)};this.fa.target=this;this.fa.method=this.Cb;this.Mb=l.setInterval(this.fa,500)}j.j=10;j.prototype={removeEventListener:function(a,
b){if(a=this.O[a])for(var d=0;d<a.length;d++)if(a[d]==b){a.splice(d,1);return}},addEventListener:function(a,b){var d=this.O[a];d||(this.O[a]=d=[]);this.removeEventListener(a,b);d.push(b)},dispatchEvent:function(a){var b=this.O[a.type];if(b)for(var d=0;d<b.length;d++){var c=b[d];typeof c=="object"?c[a.type](a):c.apply(this,[a])}},reset:function(){this.g=864000000;this.v=this.g/j.j;this.Ia();this.Ha();this.aa=true;this.K=false;this.Q=this.lastPosition=0},Ma:function(a){this.g=a;this.v=a/j.j;this.aa=
false;if(this.K){this.K=false;this.wa(0)}if(a<=10000)this.S=a/10;if(a<=5000)this.ma=a/j.j},p:function(){var a;try{a=typeof this.da=="function"?this.da.apply(this.target,[]):this.target[this.da]}catch(b){}if(isNaN(a)||a<0)a=0;switch(this.Fb){case "seconds":return a*1000;case "milliseconds":default:return a}},$:function(){return this.g?Math.floor(this.p()/this.v):0},fb:function(){this.q=[];for(var a=0;a<=j.j;a++)this.q[a]=false},Ia:function(){this.q=[];for(var a=0;a<=j.j;a++)this.q[a]=true},Ha:function(){this.G=
[];for(var a=0;a<=j.j;a++)this.G[a]=false},wa:function(a){if(a>=0&&a<=j.j&&!this.G[a])if(this.aa)this.K=true;else{this.dispatchEvent({type:"beacon",segment:a,playthru:this.q[a],position:this.p()});this.G[a]=true;this.q[a]=false}},nb:function(a){if(a<=0)return this.ma;return a<j.j?this.v*a:this.g-this.S},Aa:function(a){return a<this.g-this.S?Math.floor(a/this.v):j.j},Cb:function(){if(this.g){var a=this.p(),b=a-this.lastPosition;if(b>0)if(b>this.Va){if(!this.r){this.r=true;this.ga=this.lastPosition}}else{if(this.r){this.lastPosition-
this.ga>0&&this.fb();this.Ha();this.r=false}this.Q+=b;this.dispatchEvent({type:"progress",segment:this.$(),position:this.p()});var d=this.Aa(this.lastPosition);b=this.Aa(a);for(d=d;d<=b;d++){var c=this.nb(d);this.lastPosition<=c&&a>=c&&this.wa(d)}}else if(b<-this.Ua&&!this.r){this.r=true;this.ga=this.lastPosition}this.lastPosition=this.p()}}};function q(){this.X=this.ca=0;this.C=false}q.prototype={Ga:function(){if(!this.C){this.C=true;this.ca=(new Date).getTime()}},pause:function(){if(this.C){this.C=
false;this.X+=(new Date).getTime()-this.ca}},Ba:function(){if(this.C)this.X+=(new Date).getTime()-this.ca;return this.X}}})(window);
