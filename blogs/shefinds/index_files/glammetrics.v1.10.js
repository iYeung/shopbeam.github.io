(function(f,n,p){function q(b,a){return b===p?"":b.length>a?b.substr(0,a):b}function s(b,a,d,c){f.console&&f.console.log&&f.console.log("event "+b+":"+a+" after "+d+"ms on :"+c)}function t(b){f.console&&f.console.error&&f.console.error(Array.prototype.slice.call(arguments))}function B(b){for(var a=0,d=0;500>d-b||2<a;a++)d=1E3*Math.pow(Math.ceil(Math.pow(b/1E3,1/1.75))+a,1.75);6E5<d&&(d=6E5);return d-b}function r(b,a,d,c,g){b="b=5555&m=3333&v=2&t=s&i="+l(a)+"&g="+l(c)+"&d="+l(b)+"&edge="+l(d)+"&p="+
l(f.glam_affiliate_id||"")+"&w=";if(v)a=v();else{a=m;c=a.indexOf("?");-1<c&&(a=a.slice(0,c));for(var e=c=0;e<a.length;e++)c<<=1,0>c&&(c|=1),c^=a.charCodeAt(e);a=(c&2147483647).toString(36).slice(-6);a="000000".substring(a.length)+a;c=Math.floor((+new Date-11991456E5)/1E3).toString(36).slice(-6);c="000000".substring(c.length)+c;a=a+c+Math.random().toString(36).slice(-2)}b=b+a+"&s="+(w?w():"");u&&(b+="&cc="+u("country_code")+"&rc="+u("region_code"));this.id=d;this.C=b;this.u=!1;this.a={};this.b={};
this.k=g;this.r=0}function x(){this.n=[];this.w=this.s=!1;this.o=this.h=""}function y(b){if(b.length&&2<b.length){var a="x"+b[0],d=b[1],c=Array.prototype.slice.call(b,2);"init"==d?"object"!==typeof c[0]?t("Empty conf",b):(k[a]=new r(c[0].adId,c[0].creativeId,c[0].edgeId||"",c[0].adTile,c[0].load),c[0].noimpression||k[a].startTimer(c[0].load,"im"),c[0].nodwell||z.add(k[a])):k[a]instanceof r?("trk"==d&&k[a].track.apply(k[a],c),"start"==d&&k[a].startTimer.apply(k[a],c),"stop"==d&&k[a].stopTimer.apply(k[a],
c)):t("Undefined backend",b)}else t("Invalid item",b)}var A=f._gmtrcs;if(!0!==A.s){var l=encodeURIComponent,u=f.GlamGetGeoData,w=f.GlamGetSessionId,v=f.GlamGetPageViewIdN,m=f.location.href,m=-1<m.indexOf("#")?m.slice(0,m.indexOf("#")):m;Array.prototype.map||(Array.prototype.map=function(b,a){var d=+this.length;if("function"!==typeof b)throw new TypeError;for(var c=Array(d),g=0;g<d;g++)g in this&&(c[g]=b.call(a,this[g],g,this));return c});r.prototype={m:function(b){var a=this,d=+new Date;if(0===b)a.timeout&&
clearTimeout(a.timeout),a.l=p,a.v();else if(b||(b=1),d+b<a.r+1E3&&(b=1E3-(d-a.r)),!a.l||a.l>d+b)a.l=d+b,a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(function(){a.v()},b)},track:function(b,a,d,c){a=q(a,32);d=q(d,32);c=q(c,256);b-=this.k;var g=a+(d?":"+d:"");s("occurred",g,b,this.id);this.a[g]||(this.a[g]={p:a,d:d,f:c,i:[],e:0});this.a[g].i.push(b);this.a[g].e++;this.m("exit"===a?0:1)},startTimer:function(b,a,d){a=q(a,32);d=q(d,256);b-=this.k;0===b&&b++;s("started",a,b,this.id);this.b[a]||
(this.b[a]={p:"timer",d:a,B:b,f:d,g:0,e:0,c:0,q:0});a=this.b[a];a.c||a.q||(a.t=b,a.c=1,a.j=0,a.e++,this.m())},stopTimer:function(b,a){a=q(a,32);var d=b-this.k;s("stopped",a,d,this.id);var c=this.b[a];c&&c.c&&(c.g+=d-c.t,c.j=1,c.c=0,this.m())},v:function(){var b=this,a=+new Date,d=a-this.k,c,g,e,h;g=[];for(var f in this.a)this.a.hasOwnProperty(f)&&(e=this.a[f],0<e.i.length&&(h="e:"+l(e.p)+",c:"+e.e+",s:"+e.i.join("+"),e.d&&(h+=",n:"+l(e.d)),e.f&&(h+=",p:"+l(e.f)),g.push(h),e.i=[]));for(var k in this.b)this.b.hasOwnProperty(k)&&
(e=this.b[k],e.q||!e.c&&!e.j||(f=e.g+(d-e.t),e.j&&(e.j=0,f=e.g),6E5<=f?(e.q=1,f=6E5):(h=B(d-e.t),c=c?Math.min(h,c):h),h="e:"+l(e.p)+",s:"+e.B+",c:"+e.e+",d:"+f,e.d&&(h+=",n:"+l(e.d)),e.f&&(h+=",p:"+l(e.f)),g.push(h)));g.length&&function C(a){var c="&a=e&"+b.C,d;b.u||(c+="&o="+l(m),b.u=1);c+="&e=";for(d=c.length;a.length&&1960>(d+=a[0].length)&&(h=a.shift());)c+=h+";";d=Math.random().toString(36).slice(-4);(new Image).src="http://www13.glam.com/clear.gif?r="+d+c;a.length&&C(a)}(g);this.r=a;this.l=
p;c&&this.m(c)}};x.prototype={add:function(b){this.n.push(b);this.s||this.A();this.w?(b.track(+new Date,"init","page-dwell-modern"),n[this.h]||b.startTimer(+new Date,"page-dwell-modern")):b.startTimer(+new Date,"page-dwell-legacy")},A:function(){var b=this;this.s=!0;n.hidden!==p?(this.h="hidden",this.o="visibilitychange"):n.webkitHidden!==p&&(this.h="webkitHidden",this.o="webkitvisibilitychange");n.addEventListener!==p&&this.o&&(this.w=!0,n.addEventListener(this.o,function(){for(var a=0;a<b.n.length;a++)n[b.h]?
b.n[a].stopTimer(+new Date,"page-dwell-modern"):b.n[a].startTimer(+new Date,"page-dwell-modern")},!1))}};var z=new x,k={};A.map(y);f._gmtrcs={setup:!0,push:y};z.add(new r("-2","-1","-1","",+new Date))}})(window,document);
