/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */

/*! NOTE: If you're already including a window.matchMedia polyfill via Modernizr or otherwise, you don't need this part */

/*! Respond.js v1.1.0: min/max-width media query polyfill. (c) Scott Jehl. MIT/GPLv2 Lic. j.mp/respondjs  */

/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

/*!
	 * jQuery resize event - v1.1 - 3/14/2010
	 * http://benalman.com/projects/jquery-resize-plugin/
	 * 
	 * Copyright (c) 2010 "Cowboy" Ben Alman
	 * Dual licensed under the MIT and GPL licenses.
	 * http://benalman.com/about/license/
	 */

// Copyright (c) 2010 "Cowboy" Ben Alman,

// Dual licensed under the MIT and GPL licenses.

// http://benalman.com/about/license/

/**
 * FastClick: Set up handling of fast clicks
 *
 * On touch WebKit (eg Android, iPhone) onclick events are usually 
 * delayed by ~300ms to ensure that they are clicks rather than other
 * interactions such as double-tap to zoom.
 *
 * To work around this, add a document listener which converts touches
 * to clicks on a global basis, excluding scrolls and gestures.  The 
 * default click events are then cancelled to prevent double-clicks.
 *
 * This function automatically adapts if no action is required (eg if 
 * touch events are not supported), and also handles functionality such
 * as preventing actions in the page while the section selector
 * is displaying.
 *
 * One alternative is to use ontouchend events for everything, but that
 * prevents non-touch interaction, and
 * requires checks everywhere to ensure that a touch wasn't a 
 * scroll/swipe/etc.
 *
 * ------
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the 
 * "Software"), to deal in the Software without restriction, including 
 * without limitation the rights to use, copy, modify, merge, publish, 
 * distribute, sublicense, and/or sell copies of the Software, and to 
 * permit persons to whom the Software is furnished to do so, subject 
 * to the following conditions:
 * 
 * The below copyright notice and this permission notice shall be 
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS 
 * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN 
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN 
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE 
 * SOFTWARE.
 *
 * @licence MIT License (http://www.opensource.org/licenses/mit-license.php)
 * @copyright (c) 2011 Assanka Limited
 * @author Rowan Beentje <rowan@assanka.net>, Matt Caruana Galizia <matt@assanka.net>
 */

/*!

	    Copyright (c) 2011 Peter van der Spek

	    Permission is hereby granted, free of charge, to any person obtaining a copy
	    of this software and associated documentation files (the "Software"), to deal
	    in the Software without restriction, including without limitation the rights
	    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	    copies of the Software, and to permit persons to whom the Software is
	    furnished to do so, subject to the following conditions:

	    The above copyright notice and this permission notice shall be included in
	    all copies or substantial portions of the Software.

	    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	    THE SOFTWARE.

	 */

/**
 * BxSlider v4.1 - Fully loaded, responsive content slider
 * http://bxslider.com
 *
 * Copyright 2012, Steven Wanderski - http://stevenwanderski.com - http://bxcreative.com
 * Written while drinking Belgian ales and listening to jazz
 *
 * Released under the WTFPL license - http://sam.zoy.org/wtfpl/
 */

/* ========================================================
	 * bootstrap-tab.js v2.3.2
	 * http://twitter.github.com/bootstrap/javascript.html#tabs
	 * ========================================================
	 * Copyright 2012 Twitter, Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * ======================================================== */

/**
* simplePagination.js v1.5
* A simple jQuery pagination plugin.
* http://flaviusmatis.github.com/simplePagination.js/
*
* Copyright 2012, Flavius Matis
* Released under the MIT license.
* http://flaviusmatis.github.com/license.html
*/

/*
 
 bootpag - jQuery plugin for dynamic pagination

 Copyright (c) 2013 botmonster@7items.com

 Licensed under the MIT license:
   http://www.opensource.org/licenses/mit-license.php

 Project home:
   http://botmonster.com/jquery-bootpag/

 Version:  1.0.4

*/

!function(e,t){"object"==typeof exports&&exports?module.exports=t:"function"==typeof Ndn_Require.define&&Ndn_Require.define.amd?Ndn_Require.define("mustache",t):e.Mustache=t}(this,function(){function e(e,t){return v.call(e,t)}function t(t){return!e(g,t)}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function n(e){return String(e).replace(/[&<>"'\/]/g,function(e){return A[e]})}function o(e){this.string=e,this.tail=e,this.pos=0}function a(e,t){this.view=e||{},this.parent=t,this._cache={}}function r(){this.clearCache()}function s(e,t,i,n){for(var o,a,r,l="",d=0,c=e.length;c>d;++d)switch(o=e[d],a=o[1],o[0]){case"#":if(r=i.lookup(a),"object"==typeof r)if(E(r))for(var u=0,p=r.length;p>u;++u)l+=s(o[4],t,i.push(r[u]),n);else r&&(l+=s(o[4],t,i.push(r),n));else if("function"==typeof r){var h=null==n?null:n.slice(o[3],o[5]);r=r.call(i.view,h,function(e){return t.render(e,i)}),null!=r&&(l+=r)}else r&&(l+=s(o[4],t,i,n));break;case"^":r=i.lookup(a),(!r||E(r)&&0===r.length)&&(l+=s(o[4],t,i,n));break;case">":r=t.getPartial(a),"function"==typeof r&&(l+=r(i));break;case"&":r=i.lookup(a),null!=r&&(l+=r);break;case"name":r=i.lookup(a),null!=r&&(l+=C.escape(r));break;case"text":l+=a}return l}function l(e){for(var t,i=[],n=i,o=[],a=0,r=e.length;r>a;++a)switch(t=e[a],t[0]){case"#":case"^":o.push(t),n.push(t),n=t[4]=[];break;case"/":var s=o.pop();s[5]=t[2],n=o.length>0?o[o.length-1][4]:i;break;default:n.push(t)}return i}function d(e){for(var t,i,n=[],o=0,a=e.length;a>o;++o)t=e[o],t&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(i=t,n.push(t)));return n}function c(e){return[new RegExp(i(e[0])+"\\s*"),new RegExp("\\s*"+i(e[1]))]}function u(e,n){function a(){if(T&&!N)for(;P.length;)delete b[P.pop()];else P=[];T=!1,N=!1}if(e=e||"",n=n||C.tags,"string"==typeof n&&(n=n.split(h)),2!==n.length)throw new Error("Invalid tags: "+n.join(", "));for(var r,s,u,g,v,_=c(n),E=new o(e),A=[],b=[],P=[],T=!1,N=!1;!E.eos();){if(r=E.pos,u=E.scanUntil(_[0]))for(var S=0,w=u.length;w>S;++S)g=u.charAt(S),t(g)?P.push(b.length):N=!0,b.push(["text",g,r,r+1]),r+=1,"\n"==g&&a();if(!E.scan(_[0]))break;if(T=!0,s=E.scan(y)||"name",E.scan(p),"="===s?(u=E.scanUntil(f),E.scan(f),E.scanUntil(_[1])):"{"===s?(u=E.scanUntil(new RegExp("\\s*"+i("}"+n[1]))),E.scan(m),E.scanUntil(_[1]),s="&"):u=E.scanUntil(_[1]),!E.scan(_[1]))throw new Error("Unclosed tag at "+E.pos);if(v=[s,u,r,E.pos],b.push(v),"#"===s||"^"===s)A.push(v);else if("/"===s){if(0===A.length)throw new Error('Unopened section "'+u+'" at '+r);var I=A.pop();if(I[1]!==u)throw new Error('Unclosed section "'+I[1]+'" at '+r)}else if("name"===s||"{"===s||"&"===s)N=!0;else if("="===s){if(n=u.split(h),2!==n.length)throw new Error("Invalid tags at "+r+": "+n.join(", "));_=c(n)}}var I=A.pop();if(I)throw new Error('Unclosed section "'+I[1]+'" at '+E.pos);return b=d(b),l(b)}var p=/\s*/,h=/\s+/,g=/\S/,f=/\s*=/,m=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,v=RegExp.prototype.test,_=Object.prototype.toString,E=Array.isArray||function(e){return"[object Array]"===_.call(e)},A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};o.prototype.eos=function(){return""===this.tail},o.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},o.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i),this.pos+=i}return t},a.make=function(e){return e instanceof a?e:new a(e)},a.prototype.push=function(e){return new a(e,this)},a.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."==e)t=this.view;else for(var i=this;i;){if(e.indexOf(".")>0){t=i.view;for(var n=e.split("."),o=0;t&&o<n.length;)t=t[n[o++]]}else t=i.view[e];if(null!=t)break;i=i.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},r.prototype.clearCache=function(){this._cache={},this._partialCache={}},r.prototype.compile=function(e,t){var i=this._cache[e];if(!i){var n=C.parse(e,t);i=this._cache[e]=this.compileTokens(n,e)}return i},r.prototype.compilePartial=function(e,t,i){var n=this.compile(t,i);return this._partialCache[e]=n,n},r.prototype.getPartial=function(e){return e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e)),this._partialCache[e]},r.prototype.compileTokens=function(e,t){var i=this;return function(n,o){if(o)if("function"==typeof o)i._loadPartial=o;else for(var r in o)i.compilePartial(r,o[r]);return s(e,i,a.make(n),t)}},r.prototype.render=function(e,t,i){return this.compile(e)(t,i)};var C={};C.name="mustache.js",C.version="0.7.2",C.tags=["{{","}}"],C.Scanner=o,C.Context=a,C.Writer=r,C.parse=u,C.escape=n;var b=new r;return C.clearCache=function(){return b.clearCache()},C.compile=function(e,t){return b.compile(e,t)},C.compilePartial=function(e,t,i){return b.compilePartial(e,t,i)},C.compileTokens=function(e,t){return b.compileTokens(e,t)},C.render=function(e,t,i){return b.render(e,t,i)},C.to_html=function(e,t,i,n){var o=C.render(e,t,i);return"function"!=typeof n?o:void n(o)},C}()),Ndn_Require.define("models/Ndn/PlayerServices/Cache",["backbone","jquery"],function(e,t){var i={},n={};return{cachePlaylistData:function(e,n){if(e.playlistId){var o="undefined"==typeof i[e.playlistId]||!i[e.playlistId].isCompletedLoaded&&i[e.playlistId].items.length<e.items.length;o&&(e.isCompletelyLoaded=e.items.length<n,i[e.playlistId]=e,t.each(e.items,t.proxy(function(e,t){this.cacheVideoData(t)},this)))}},getPlaylistData:function(e,t){return"undefined"!=typeof i[e]&&(i[e].isCompletelyLoaded||i[e].items.length>=t)?i[e]:null},cacheVideoData:function(e){"undefined"==typeof n[e.videoId]&&(n[e.videoId]=e)},getVideoData:function(e){return"undefined"!=typeof n[e]?n[e]:void 0},getCache:function(){return n}}}),Ndn_Require.define("models/Ndn/PlayerServices",["jquery","underscore","require","models/Ndn/PlayerServices/Cache","models/Ndn/Utils/UrlParser","models/Ndn/App"],function(e,t,i,n,o,a){var r=function(){var e="",t=(o.getUrlVar("ndn_playerServicesEnv")?o.getUrlVar("ndn_playerServicesEnv"):e).replace(/[^A-Za-z0-9-_]/g,""),i="//"+(t?t+"-":"")+"lps.newsinc.com";return function(){return i}}(),s=function(e,t,i,n,o,s,l){return s&&l?r()+"/player/show/"+s+"/"+l+"?trackingGroupId="+(t?t:"0")+"&widgetId="+(e?e:"0")+"&playlistId="+(i?i:"0")+"&embedOriginUrl="+encodeURIComponent(a.getEmbedOriginUrl()):(o&&40>=o?1!=o&&(o=o>15?40:15):o=null,r()+"/player/show/"+(t||"0")+"/"+(e||"0")+"/"+(i||"0")+"/"+(n||"0")+"/3"+(o?"/"+o:"")+"?d="+(new Date).getTime()+"&embedOriginUrl="+encodeURIComponent(a.getEmbedOriginUrl()))},l=function(e){var t,i={producerLogo:["http://assets.newsinc.com","https://assets-s.newsinc.com"],stillFrameBaseUrl:["http://content-img.newsinc.com","https://content-img-s.newsinc.com"],thumbnailBaseUrl:["http://content-img.newsinc.com","https://content-img-s.newsinc.com"],videoBaseUrlMp4:["http://content-mp4.newsinc.com","https://content-s.newsinc.com"],videoBaseUrlMpeg:["http://ndn_mp4-vh.akamaihd.net","https://ndn_mp4-vh.akamaihd.net"],videoBaseUrlF4m:["http://ndn_mp4-vh.akamaihd.net","https://ndn_mp4-vh.akamaihd.net"],videoBaseUrlFlv:["rtmp://cp98516.edgefcs.net","rtmp://cp98516.edgefcs.net"]};return"https:"===window.location.protocol?(("producerLogo"==e||"stillFrameBaseUrl"==e||"thumbnailBaseUrl"==e||"videoBaseUrlMp4"==e||"videoBaseUrlMpeg"==e||"videoBaseUrlF4m"==e||"videoBaseUrlFlv"==e)&&(t=i[e][1]),t):"https:"!==window.location.protocol?(("producerLogo"==e||"stillFrameBaseUrl"==e||"thumbnailBaseUrl"==e||"videoBaseUrlMp4"==e||"videoBaseUrlMpeg"==e||"videoBaseUrlF4m"==e||"videoBaseUrlFlv"==e)&&(t=i[e][0]),t):void 0},d=function(e){for(var i={videoId:e.ContentID,videoTitle:e.Name,description:e.Description,antiKeywords:e.AKW,publishedOn:e.PubDate,mediaContent:[],producer:{trackingGroup:e.ContentPartnerID,name:e.ProducerName,category:e.ProducerCategory,logoUrl:l("producerLogo")+e.ProducerLogo},provider:{id:e.CPID,trackingGroup:e.ContentPartnerID,name:e.ProducerName,category:e.ProducerCategory,logoUrl:l("producerLogo")+e.ProducerLogo},settings:{share:{embedCode:{enabled:!!e.EmbedCodeAccessible}}}},n=[],o=0;o<e.Assets.length;o++){var a=e.Assets[o];"src"==a.AssetType?n.push(a):"stillFrame"==a.AssetType?i.stillImageUrl=l("thumbnailBaseUrl")+a.AssetLocation:"thumbnail"==a.AssetType&&(i.thumbnailUrl=l("thumbnailBaseUrl")+a.AssetLocation)}var r=t.sortBy(n,function(e){return e.AssetSortOrder});i.mediaContent=t.map(r,function(e){var t,i=e.AssetMimeType;return"video/x-flv"==i?t="videoBaseUrlFlv":"application/x-mpeg"==i||"video/f4m"==i?t="videoBaseUrlMpeg":"video/mp4"==i&&(t="videoBaseUrlMp4"),{type:i,medium:"video",duration:e.Duration,url:l(t)+e.AssetLocation}});var s=parseInt(i.mediaContent[0].duration,10);s=0>s?0:s;var d=Math.floor(s/60),c=d>59?c=Math.floor(d/60):c,u=s%60;return u=10>u?"0"+u:u,c>0&&"undefined"!=c?(d%=60,d=10>d?"0"+d:d,s=c+":"+d+":"+u,durationSize="durationHours"):(s=d+":"+u,durationSize="durationMinutes"),i.displayDuration=s,i},c=function(e,i){var n=[];return t.each(e,function(e){if(9999999!==e.playlistid){var o={playlistId:e.playlistid,title:e.Title,items:[]};t.each(e.Contents,function(e){o.items.push(d(e))}),o.items=t.first(o.items,i),n.push(o)}}),n},u=function(i,n){var o,a={playlists:{},associatedPlaylists:[],defaultWidgetConfig:{trackingGroup:i.TrackingGroup,type:"VideoPlayer/Default",siteSection:i.SiteSectionName,autoPlay:!i.DisableVideoPlayOnLoad,continuousPlay:i.ContinuousPlay,videoId:"",playlistId:"",adsEnabled:!i.DisableAds,rmmSoundOn:!1,playOnMouseover:i.PlayOnMouseover},ptr:i.Ptr||0,settings:{share:{enabled:!i.DisableSocialNetworking&&!i.DisableSingleEmbed,email:{enabled:!i.DisableSocialNetworking},socialNetworks:{enabled:!i.DisableSingleEmbed},directLink:{landingPageUrl:i.LandingURL&&"http://landing.newsinc.com/shared/video.html"!=i.LandingURL?i.LandingURL:"http://launch.newsinc.com/share.html",needsLegacySupport:"http://landing.newsinc.com/shared/video.html"!=i.LandingURL}},googleAnalytics:{enabled:function(){var t;return e.each(i.DeliverySettings,function(){return"deliverGA"==this.Name?(t="true"==this.Value,!1):void 0}),t}()},ads:{enabled:!i.DisableAds,server:i.AdServer},dfp:{accountNumber:i.DfpInfo.Account,adOwnershipGroupId:i.DfpInfo.OwnershipGroup,adTrackingGroupId:i.DfpInfo.TrackingGroup},auditude:{trackingGroupAuditudeId:i.ZoneID,enableGoogleAds:function(){var t;return e.each(i.DeliverySettings,function(){return"GoogleExtURL"==this.Name?(t="true"==this.Value,!1):void 0}),t}()}},distributor:{name:i.DistributorName},zoneId:i.ZoneID,siteSection:i.SiteSectionName},r=c(i.Playlists,n);return t.each(r,function(e){a.associatedPlaylists.push({id:e.playlistId,label:e.title}),e.items.length&&(o=e.playlistId,a.playlists[o]=e)}),a.defaultWidgetConfig.playlistId=o,t.each(i.Playlists,function(e){if(9999999==e.playlistid&&e.Contents[0]){for(var t=e.Contents[0],i=a.playlists[o].items,n=0;n<i.length;n++){var r=i[n];if(r.videoId==t.ContentID){a.videoIndex=n;break}}"undefined"==typeof a.videoIndex&&(a.videosData=a.videosData||[],a.videosData.push(d(t)))}if(-1===e.playlistid)for(var n=0;n<e.Contents.length;n++){var t=e.Contents[n];a.videosData=a.videosData||[],a.videosData.push(d(t))}}),a},p=function(t,i,o,a,r,l){return e.Deferred(e.proxy(function(d){var c=t.get("config");o||(o=t.get("playlistItemsLimit")),e.ajax({type:"GET",url:s(c.widgetId,c.trackingGroup,i||c.playlistId,a||c.videoId,o,r,l),contentType:"json",dataType:"jsonp"}).done(function(t){if(!t||!t.Playlists)return d.reject();var i=u(t,o);e.each(i.playlists,function(){n.cachePlaylistData(this,o)}),i.videosData&&e.each(i.videosData,function(){n.cacheVideoData(this)}),d.resolve(i)}).fail(function(){d.reject()})},this)).promise()},h={getWidgetSettings:function(e){var t=e.get("config");return p.call(this,e,null,null,null,t.providerId,t.providerStoryId)},getPlaylistData:function(t,i,o){return e.Deferred(e.proxy(function(a){"undefined"==typeof o&&(o=i.get("playlistItemsLimit"));var r=n.getPlaylistData(t,o);r?a.resolve(r):p.call(this,i,t).done(e.proxy(function(){r=n.getPlaylistData(t,o),r?a.resolve(r):a.reject()},this)).fail(a.reject)},this)).promise()},getVideoData:function(t,i){return e.Deferred(e.proxy(function(o){var a=n.getVideoData(t);a?o.resolve(a):p.call(this,i,null,1,t).done(e.proxy(function(){a=n.getVideoData(t),a?o.resolve(a):o.reject()},this)).fail(o.reject)},this)).promise()},getPtrStatus:function(t){return e.Deferred(e.proxy(function(i){var n=t;e.ajax({type:"GET",url:s(n.widgetId,n.trackingGroup,null,null,1),contentType:"json",dataType:"jsonp"}).done(function(e){return e&&e.Playlists?void i.resolve(e.Ptr||0):i.reject()}).fail(function(){i.reject()})},this)).promise()}};return h}),Ndn_Require.define("models/Ndn/Utils/UserAgent",[],function(){var e=function(){var e={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var t=0;t<e.length;t++){var i=e[t].string,n=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,i){if(-1!=i.indexOf(e[t].subString))return e[t].identity}else if(n)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};return e.init(),e}();return{isOnIos:function(){var e=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g);return function(){return e}}(),isMobile:function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|android|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|silk|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),function(){return e}}(),isAbleToPlayVideoAutomatically:function(){return!(this.isOnIos()||this.isMobile())},isIe:function(){var e=!!navigator.userAgent.match(/(MSIE)/g)||!!navigator.userAgent.match(/(Trident)/g);return e},getIeVersion:function(){if(this.isIe()){var e=function(){var e=-1,t=new RegExp("Trident/([0-9]{1,}[.0-9]{0,})");return null!=t.exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),e},t=-1==e()?7:e()+4;return t}return null},isChrome:function(){return navigator.userAgent.toLowerCase().indexOf("chrome")>-1},isFirefox:function(){var e=!!navigator.userAgent.match(/(Firefox)/g);return e},isSafari:function(){var e=!!navigator.userAgent.match(/(Safari)/g);return e},isWindows:function(){var e=!!navigator.userAgent.match(/(Windows)/g);return e},hasNativeVideoPlayer:function(){return!!navigator.userAgent.match(/iPhone|iPod/i)},getBrowser:function(){return e.browser}}}),Ndn_Require.define("models/Ndn/Legacy/Config/Ap",["jquery"],function(e){var t={1153168:"90703",1296344:"90416",10003188:"90693",TXABI:"90459",PAALM:"90364",GASTA:"90683",TXAMA:"90582",ARLID:"90554",GAATH:"90604",GAAUG:"90612",TXAUS:"90105",MTBOZ:"90721",PABUT:"90433",FLCAP:"90364",TXCOR:"90550",VACUL:"90527",IAWEB:"90364",MIESC:"90364",VADAR:"90528",ALDOT:"90510",PAERI:"90464",IAEST:"90364",FLJAJ:"90049",NCHIC:"90518",TXHOU:"90000",NCCON:"90517",JRC:"90734",WIKEN:"90233",WABRE:"90552",MOCAG:"90589",NDMIN:"90364",FLNAP:"90542",INBNB:"90605",ALOPE:"90514",MNROC:"90379",VARIT:"90535",FLSAR:"90492",INSBT:"90575",MNPAU:"90156",TXSAN:"90551",CAPAS:"90494",TNMEM:"90547",MSCCD:"90135",OHFIN:"90421",OHCAM:"90249",MIHOU:"90364",MIIRO:"90364",VACHA:"90526",NCFAY:"90364",wvwhe:"90364",TNKNN:"90542",OHMAR:"90364",HIMAN:"90364",NCMAR:"90519",MIMAR:"90364",VALYD:"90532",VAWAY:"90538",SCCHA:"90349",NYJAP:"90364",OHEAS:"90249",OHSAL:"90364",ILSPR:"90108",GAGAI:"90079",WVWEI:"90364",PAWIL:"90087",NYALT:"90001",WAKR:"90412",TXWIC:"90553",NCWIN:"90522",WRKO:"90629",WSPATV:"90507",WTKKFM:"90456",PAYOK:"90732",FLMIH:"90045",WABEL:"90472",SCCOL:"90474",CAFRE:"90476",CAMOD:"90479",CASAB:"90482",WATAC:"90483",FLBRA:"90484",ILROR:"90108",MAQUI:"90108",CTNOR:"90108",MABRO:"90108",WSAW:"90447",FLTAM:"90426",NVLAS:"90277",INSID:"90531",WNCNTV:"90777",WCMHTV:"90061",OREUG:"90878",SCFLO:"90784",WJARTV:"90053",WIMIL:"90078",RIJRJ:"90446",WRGBTV:"90028",WWMTTV:"90029",ILALT:"90033",WPECTV:"90039",KTVLTV:"90042",OHLIM:"90043",AAAA:"0000",WASECA:"90667",PAYOR:"90681",GACOV:"90691",GAHIN:"90686",CASCN:"90152",CAMAN:"90690",WIEAU:"90694",MSMCC:"90695",FLNAV:"90696",LAMOR:"90697",LAFRA:"90698",SCAIK:"90699",ARFOR:"90700",MIGHT:"90702"};return{getTrackingGroupFromApPartnerId:function(e){return t[e]||"90121"},translate:function(t,i){return e.Deferred(e.proxy(function(n){var o=i;return t.f&&(o.trackingGroup=this.getTrackingGroupFromApPartnerId((t.f+"").toUpperCase()),"0"==o.widgetId&&(o.widgetId="3989")),!o.videoId&&t.g?e.ajax({type:"GET",url:"http://dmeserv.newsinc.com/apids/lookup.jsonp?apvid="+t.g,dataType:"jsonp"}).then(function(e){o.videoId=e,n.resolve(o)}):void n.resolve(o)},this)).promise()}}}),Ndn_Require.define("models/Ndn/Legacy/Config/TritonLoyaltyProgram",["jquery"],function(e){return{translate:function(t,i){return e.Deferred(function(e){t.memberid=t.memberid||t.membedid||"",""!=t.memberid&&"none"!=t.memberid&&(i.loyaltyProgramId="ndntritonservice",i.loyaltyProgramData={memberId:t.memberid,siteId:t.siteid}),e.resolve(i)}).promise()}}}),Ndn_Require.define("models/Ndn/Legacy/Config",["underscore","jquery","models/Ndn/Utils/UrlParser","models/Ndn/Legacy/Config/Ap","models/Ndn/Legacy/Config/TritonLoyaltyProgram"],function(e,t,i,n,o){return{translate:function(a,r){return t.Deferred(function(s){var l=i.parseHref(a),d=l.params;for(var c in d)d.hasOwnProperty(c)&&c!=c.toLowerCase()&&(d[c.toLowerCase()]=d[c],delete d.paramKey);var u=l.url.match(/^http:[\/]{2}embed\.newsinc\.com/)?l.path.toLowerCase():"",p={widgetId:d.wid,siteSection:d.sitesection||"",videoId:d.vid||d.vcid||d.spid||"",trackingGroup:d.freewheel||"",playlistId:d.cid||""};t.each(p,function(e){""==this&&delete p[e]});var h={"/single/embed.js":"VideoPlayer/Default","/inform/article/matching/video/embed.js":"VideoPlayer/Default","/horizontaltitle550/embed.js":"VideoLauncher/Horizontal","/inline/embed.js":"VideoPlayer/Inline300","/inlinesound/embed.js":"VideoPlayer/Inline300","/inline590/embed.js":"VideoPlayer/Inline590","/inlinesound590/embed.js":"VideoPlayer/Inline590"};if("undefined"!=typeof r)p.type=r;else if("undefined"!=typeof h[u])p.type=h[u];else{var g={slider:"VideoLauncher/Slider300x250",plist:"VideoLauncher/Playlist300x250",vertical:"VideoLauncher/VerticalTower",horizontal:"VideoLauncher/Horizontal",horizontal400:"VideoLauncher/Horizontal",horizontal500:"VideoLauncher/Horizontal"},f=d.type||d.thumbid;"undefined"!=typeof g[f]?p.type=g[f]:e.contains(["/thumbnail/embed.js","/thumbnail/iframe.html"],u)&&(p.type="VideoLauncher/Slider300x250")}e.contains(["/inlinesound/embed.js","/inlinesound590/embed.js","/thumbnailsound/embed.js"],u)&&(p.rmmSoundOn=!0),(d.width||d.w)&&(p.width=d.width||d.w),(d.height||d.h)&&(p.height=d.height||d.h);var m={"/horizontaltitle550/embed.js":550};"undefined"!=typeof m[u]?p.width=m[u]:"horizontal400"==d.type?p.width=425:e.contains(["horizontal","horizontal500"],d.type)&&(p.width=550);for(var y=["playlistId","widgetId","videoId","trackingGroup"],v=0;v<y.length;v++){var _=y[v];"0"==p[_]&&delete p[_]}("/single/iframe.html"!=u&&!p.type||"VideoPlayer/Default"==p.type)&&(p.width||(p.width=600),p.height||(p.height=360)),n.translate(d,p).then(function(e){return o.translate(d,e)}).fail(s.reject).done(s.resolve)}).promise()}}}),Ndn_Require.define("models/Ndn/LoyaltyProgram",["backbone","jquery","mustache"],function(e,t,i){var n=function(e){return"ndntritonservice"==e?"http://loyalty.newsinc.com/ndntritonservice.svc/GetCredit/{{memberId}}/{{siteId}}":void 0},o=function(e,t){n(e);return i.to_html(n(e),t)};return e.Model.extend({defaults:{id:null,customData:null,ajaxUrl:""},initialize:function(){e.Model.prototype.initialize.apply(this,arguments),this.set({ajaxUrl:o(this.get("id"),this.get("customData"))})},execute:function(){t.getJSON(this.get("ajaxUrl"),function(){})}})}),Ndn_Require.define("lib/respond",[],function(){return window.matchMedia=window.matchMedia||function(e){var t,i=e.documentElement,n=i.firstElementChild||i.firstChild,o=e.createElement("body"),a=e.createElement("div");return a.id="mq-test-1",a.style.cssText="position:absolute;top:-100em",o.style.background="none",o.appendChild(a),function(e){return a.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(o,n),t=42===a.offsetWidth,i.removeChild(o),{matches:t,media:e}}}(document),function(e){function t(){A(!0)}var i={};if(e.respond=i,i.update=function(){},i.mediaQueriesSupported=e.matchMedia&&e.matchMedia("only all").matches,!i.mediaQueriesSupported){var n,o,a,r=e.document,s=r.documentElement,l=[],d=[],c=[],u={},p=30,h=r.getElementsByTagName("head")[0]||s,g=r.getElementsByTagName("base")[0],f=h.getElementsByTagName("link"),m=[],y=function(){for(var t=0;t<f.length;t++){var i=f[t],n=i.className,o=i.href,a=i.media,r=i.rel&&"stylesheet"===i.rel.toLowerCase();"_nw2eStyles"==n&&o&&r&&!u[o]&&(console.log("respond.js: processing styles at "+i.href),i.styleSheet&&i.styleSheet.rawCssText?(_(i.styleSheet.rawCssText,o,a),u[o]=!0):(!/^([a-zA-Z:]*\/\/)/.test(o)&&!g||o.replace(RegExp.$1,"").split("/")[0]===e.location.host)&&m.push({href:o,media:a}))}v()},v=function(){if(m.length){var t=m.shift();C(t.href,function(i){_(i,t.href,t.media),u[t.href]=!0,e.setTimeout(function(){v()},0)})}},_=function(e,t,i){var n=e.match(/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi),o=n&&n.length||0;t=t.substring(0,t.lastIndexOf("/"));var a=function(e){return e.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+t+"$2$3")},r=!o&&i;t.length&&(t+="/"),r&&(o=1);for(var s=0;o>s;s++){var c,u,p,h;r?(c=i,d.push(a(e))):(c=n[s].match(/@media *([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,d.push(RegExp.$2&&a(RegExp.$2))),p=c.split(","),h=p.length;for(var g=0;h>g;g++)u=p[g],l.push({media:u.split("(")[0].match(/(only\s+)?([a-zA-Z]+)\s?/)&&RegExp.$2||"all",rules:d.length-1,hasquery:u.indexOf("(")>-1,minw:u.match(/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:u.match(/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}A()},E=function(){var e,t=r.createElement("div"),i=r.body,n=!1;return t.style.cssText="position:absolute;font-size:1em;width:1em",i||(i=n=r.createElement("body"),i.style.background="none"),i.appendChild(t),s.insertBefore(i,s.firstChild),e=t.offsetWidth,n?s.removeChild(i):i.removeChild(t),e=a=parseFloat(e)},A=function(t){var i="clientWidth",u=s[i],g="CSS1Compat"===r.compatMode&&u||r.body[i]||u,m={},y=f[f.length-1],v=(new Date).getTime();if(t&&n&&p>v-n)return e.clearTimeout(o),void(o=e.setTimeout(A,p));n=v;for(var _ in l)if(l.hasOwnProperty(_)){var C=l[_],b=C.minw,P=C.maxw,T=null===b,N=null===P,S="em";b&&(b=parseFloat(b)*(b.indexOf(S)>-1?a||E():1)),P&&(P=parseFloat(P)*(P.indexOf(S)>-1?a||E():1)),C.hasquery&&(T&&N||!(T||g>=b)||!(N||P>=g))||(m[C.media]||(m[C.media]=[]),m[C.media].push(d[C.rules]))}for(var w in c)c.hasOwnProperty(w)&&c[w]&&c[w].parentNode===h&&h.removeChild(c[w]);for(var I in m)if(m.hasOwnProperty(I)){var x=r.createElement("style"),M=m[I].join("\n");x.type="text/css",x.media=I,h.insertBefore(x,y.nextSibling),x.styleSheet?x.styleSheet.cssText=M:x.appendChild(r.createTextNode(M)),c.push(x)}},C=function(e,t){var i=b();i&&(i.open("GET",e,!0),i.onreadystatechange=function(){4!==i.readyState||200!==i.status&&304!==i.status||t(i.responseText)},4!==i.readyState&&i.send(null))},b=function(){var t=!1;try{t=new e.XMLHttpRequest}catch(i){t=new e.ActiveXObject("Microsoft.XMLHTTP")}return function(){return t}}();y(),i.update=y,e.addEventListener?e.addEventListener("resize",t,!1):e.attachEvent&&e.attachEvent("onresize",t)}}(this),respond});var _nw2e=_nw2e||[];Ndn_Require.define("models/Ndn/Widget",["jquery","underscore","backbone","require","mustache","models/Ndn/App","models/Ndn/PlayerServices","models/Ndn/Utils/UrlParser","models/Ndn/Utils/UserAgent","models/Ndn/Legacy/Config","models/Ndn/LoyaltyProgram","lib/respond"],function($,_,Backbone,require,Mustache,Ndn_App,Ndn_PlayerServices,Ndn_Utils_UrlParser,Ndn_Utils_UserAgent,Ndn_Legacy_Config,Ndn_LoyaltyProgram,respond){if(_nw2e.Ndn_Widget)return _nw2e.Ndn_Widget;var _recognizedConfigSettings=["distributorId","widgetId","type","trackingGroup","playlistId","videoId","providerId","providerStoryId","siteSection","acceptsConfigFromUrl","acceptsConfigFromUrlPrefix","loyaltyProgramId","loyaltyProgramData","legacyEmbedUrl","autoPlay","continuousPlay","rmmSoundOn","adsEnabled","width","height"],_widgetTypesData={"VideoPlayer/Default":{typeId:5},"VideoPlayer/16x9":{typeId:2},"VideoPlayer/Inline300":{typeId:4,typeIdForAutoPlay:13},"VideoPlayer/Inline590":{typeId:11,typeIdForAutoPlay:14},"VideoPlayer/PTR":{typeId:17},"VideoLauncher/Slider300x250":{typeId:17},"VideoLauncher/Playlist300x250":{typeId:18},"VideoLauncher/Horizontal":{typeId:19},"VideoLauncher/VerticalTower":{typeId:20},"VideoPlayer/Studio":{typeId:33}},_widgetTypeLabels=function(){var e={};return _.each(_widgetTypesData,function(t,i){e[i.toLowerCase()]=i}),e}(),_nextEmbedIndex=0,_getWidgetConfigFromElement=function(e){if(e.data("config"))return e.data("config");var t={};return $.each(e[0].attributes,function(e,i){var n;if(n=i.name.toLowerCase().match(/^data-config-(.*)$/)){var o=n[1].replace(/-(\w)/g,function(e,t){return t.toUpperCase()});t[o]=i.value}}),t},_embedContainer=function(containerElement,config){if("undefined"==typeof config.type&&(config.type=""),config.type=(config.type+"").replace(" ",""),""==config.type&&(config.type="VideoPlayer/Single"),"videoplayer/single"==(config.type+"").toLowerCase()&&(config.type="VideoPlayer/Default"),config.type=_widgetTypeLabels[config.type.toLowerCase()],!containerElement.hasClass("ndn_embedding")&&!containerElement.hasClass("ndn_embedded")){containerElement.addClass("ndn_embedding").addClass("ndn_embed").addClass("ndn_embedContainer");var embedIndex=Ndn_Widget.getNextEmbedIndex(),widgetUid="ndn-widget-embed-"+(embedIndex+1);containerElement.addClass(widgetUid).data("ndn-widget-uid",widgetUid);var containerElementId=function(){return"undefined"==typeof containerElement.attr("id")&&containerElement.attr("id",widgetUid),containerElement.attr("id")}();if(config.distributorId&&!config.legacyEmbedUrl)return void function(){var e="qa"==Ndn_Utils_UrlParser.getUrlVar("ndn_ppEnv")?"qa-dme.newsinc.com":"dmeserv.newsinc.com",t={paths:{}};t.paths["perfectPixel"+config.distributorId]=window.location.protocol+"//"+e+"/dpid/"+config.distributorId+"/PPEmbed";var i=_nw2e.requireConfig(t);i(["perfectPixel"+config.distributorId],function(){})}();var modelLocation="models/Ndn/Widget/"+config.type+"Model";require([modelLocation],function(WidgetModel){function maintainAspectRatio(dimension){if("width"==dimension||"height"==dimension){var dimensionVariable=dimension[0],dimensionParameter="width"!=dimension?"width":"height",dimensionParameterVariable=dimensionParameter[0];(widget.get("config")[dimensionParameter]||"").match(/[w|h]/gi)||(widget.get("config")[dimension]=widget.get("config")[dimension].replace(/([\d).])([h|w])/gi,"$1*$2").replace(/([h|w])([wh(])/gi,"$1*$2"),containerElement.resize(function(){var dimensionParameterValue=containerElement[dimensionParameter](),newDimensionValueCalculation=widget.get("config")[dimension].replace(new RegExp(dimensionParameterVariable,"gi"),dimensionParameterValue).replace(/[^-()\d\/*+.]/g,"");containerElement.css(dimension,eval(newDimensionValueCalculation)+"px")}))}}var widget=new WidgetModel(config).set({containerElement:containerElement.get(0),embedIndex:embedIndex,widgetUid:widgetUid});Ndn_App.integrateWidget(widget),widget.get("config").width&&(widget.get("config").width+="",widget.get("config").width.match(/h/gi)?maintainAspectRatio("width"):containerElement.css("width",widget.get("config").width+"px")),widget.get("config").height&&(widget.get("config").height+="",widget.get("config").height.match(/w/gi)?maintainAspectRatio("height"):containerElement.css("height",widget.get("config").height+"px")),containerElement.addClass(Ndn_Widget.getDomClassIdentifier(widget.get("config").type)),widget.getSettings().done($.proxy(function(){widget.initializeTemplates(function(){widget.initializeView(),containerElement.addClass("ndn_embedded").removeClass("ndn_embedding"),widget.onceConfigIsComplete(function(){Ndn_App.getHooks().trigger("widgetEmbedEnd",widget),Ndn_App.trackAnalytics("widgetEmbedEnd",widget),widget.trigger("hook:configComplete",widget.get("config"))})})},this)).fail(function(){widget.getContainerElement().attr("style","display:none !important")})})}},_injectCss=function(){var e=!1;return function(){e||(Ndn_Widget.isBuilt()?($("head").append('<link class="_nw2eStyles" rel="stylesheet" type="text/css" href="'+_nw2e.appUrl+'/css/NdnEmbed.css" />'),respond.update()):"dynamic"==Ndn_Utils_UrlParser.getUrlVar("lessc")?$("head").append('<link rel="stylesheet" type="text/css" href="'+_nw2e.appUrl+'/_build/lessc.php?path=/less/NdnEmbed.less" />'):$("head").append('<link rel="stylesheet/less" type="text/css" href="'+_nw2e.appUrl+'/less/NdnEmbed.less" />').append('<script src="'+_nw2e.appUrl+'/js/lib/less.js"></script>'),e=!0)
}}(),Ndn_Widget=Backbone.Model.extend({defaults:{config:{},templates:[],templatePaths:[],initialConfig:{},containerElement:null,embedIndex:null,widgetUid:null,isAttached:!1,configComplete:!1,settings:null,loyaltyProgram:null,hasBeenPositionedBelowTheFold:!1,settingsPending:!1,dfpPodPositionValue:null},initialize:function(e){_injectCss(),"undefined"!=typeof e.continuousPlay&&(e.continuousPlay=parseInt(e.continuousPlay)),this.set({initialConfig:_.extend({},e),config:e}),this.set("dfpPodPositionValue",1),e.loyaltyProgramId&&this.set({loyaltyProgram:new Ndn_LoyaltyProgram({id:e.loyaltyProgramId,customData:function(){try{return $.parseJSON(e.loyaltyProgramData)}catch(t){return{}}}()})})},initializeView:function(){var e=this.get("widgetView");this.set("view",new e({el:this.getContainerElement().get(0),model:this})),this.embed()},integratePlayerServicesConfigDefaults:function(e){var t=this.get("config");Ndn_Widget.isBuilt()&&delete t.adsEnabled,this.set({config:_.extend(_.extend({},e),t)}),this.set({configComplete:!0}),this.trigger("configComplete",this.get("config"))},onceConfigIsComplete:function(e){this.get("configComplete")?e():this.once("configComplete",e)},initializeTemplates:function(e){var t=[],i=[],n={};$.each(this.get("templatePaths"),function(e){t.push(e),i.push(this)});for(var o=0;o<i.length;o++)n[t[o]]=function(e){return function(t){return Mustache.to_html(e,t)}}(i[o]);this.set("templates",n),"function"==typeof e&&e(this)},getTemplate:function(e){var t=this.get("templates");return"undefined"!=typeof t[e]?t[e]:null},getWidgetTypeId:function(){var e=_widgetTypesData[this.get("config").type];return this.get("config").autoPlay&&e.typeIdForAutoPlay?e.typeIdForAutoPlay:0!=this.get("config").rmmSoundOn&&e.typeIdForAutoPlay?e.typeIdForAutoPlay:e.typeId},embed:function(){},getFoldPositionId:function(e){if("undefined"==typeof e&&(e=$(this.get("containerElement"))),Ndn_Widget.isEmbeddedByIframe())return"0";var t,i=$(window).height()+$(window).scrollTop(),n=i>=e.offset().top+Math.floor(e.height()/2);return n?t="1":(this.set({hasBeenPositionedBelowTheFold:!0}),t="2"),t},isInView:function(e){if("undefined"==typeof e&&(e=$(this.get("containerElement"))),Ndn_Widget.isEmbeddedByIframe())return!1;var t=$(window).height()+$(window).scrollTop(),i=t>=e.offset().top+Math.floor(e.height()/2),n=$(document).scrollTop()>=e.offset().top+Math.floor(e.height()/2);return!i||n?!1:!0},isEmbedded:function(){return this.get("view")&&this.get("view").el},onceEmbedded:function(e){this.isEmbedded()?e():this.once("embed",e)},getContainerElement:function(){return $(this.get("containerElement"))},getSettings:function(){return $.Deferred($.proxy(function(e){this.get("settings")?e.resolve(this.get("settings")):this.get("settingsPending")?this.once("settingsReceived",function(t){e.resolve(t)}):(this.set("settingsPending",!0),Ndn_PlayerServices.getWidgetSettings(this).done($.proxy(function(t){this.set("settings",t),this.integratePlayerServicesConfigDefaults(t.defaultWidgetConfig),e.resolve(this.get("settings")),this.trigger("settingsReceived",this.get("settings"))},this)).fail(function(){e.reject()}))},this)).promise()},getDebugInfo:function(){return this.get("videoPlayer")?this.get("videoPlayer").get("debugInfo"):void 0},getPlayerContainerElementId:function(){return this.get("widgetUid")+"-player"},getDfpPodPositionValue:function(){var e=this.get("dfpPodPositionValue");return this.set("dfpPodPositionValue",e+1),e}},{getAppUrlSuffix:function(){return Ndn_App.getAppUrlSuffix()},addHook:function(){return Ndn_App.addHook(arguments)},getEmbedOriginUrl:function(){return Ndn_App.getEmbedOriginUrl(arguments)},getEmbedPageUrl:function(){return this.getEmbedOriginUrl()},trackAnalytics:function(e,t){return Ndn_App.trackAnalytics(e,t)},getAdsTargeting:function(){return Ndn_App.getAdsTargeting(arguments)},isBuilt:function(){return Ndn_App.isBuilt(arguments)},isOnSsl:function(){return Ndn_App.isOnSsl()},getAppUrl:function(){return Ndn_App.getAppUrl(arguments)},getAppDomain:function(){return Ndn_App.getAppDomain(arguments)},isEmbeddedByIframe:function(){return Ndn_App.isEmbeddedByIframe(arguments)},isOnAppPage:function(){return Ndn_App.isOnAppPage(arguments)},getNextEmbedIndex:function(){return _nextEmbedIndex++},getDomClassIdentifier:function(e){return"ndn_widget_"+e.charAt(0).toUpperCase()+e.slice(1).replace("/","-")},getDefaultUrlVarPrefixForConfigSettings:function(){return Ndn_App.getDefaultUrlVarPrefixForConfigSettings(arguments)},embed:function(e,t){var i="undefined"!=typeof e.nodeType&&1==e.nodeType,n=i?null:e;if(e=$(i?e:"#"+n),!e.length)throw i?"Invalid dom element provided for embed":'Unable to find dom element with id "'+n+'" for embed';if(t=_.extend({},t,_getWidgetConfigFromElement(e)),t.hasOwnProperty("acceptsConfigFromUrl")&&"false"!=t.acceptsConfigFromUrl.replace(" ","").toLowerCase()){t.acceptsConfigFromUrl=!0;var o=t.hasOwnProperty("acceptsConfigFromUrlPrefix")?t.acceptsConfigFromUrlPrefix:Ndn_Widget.getDefaultUrlVarPrefixForConfigSettings();Ndn_Utils_UrlParser.getUrlVar("legacyEmbedUrl")||!Ndn_Utils_UrlParser.getUrlVar("freewheel")||Ndn_Utils_UrlParser.getUrlVar(o+"trackingGroup")?t=_.extend({},Ndn_Utils_UrlParser.getUrlVarsWithPrefix(o),t):t.legacyEmbedUrl||(t.legacyEmbedUrl=window.location.href+"")}$.each(t,function(e){_.contains(_recognizedConfigSettings,e)||delete t[e]}),t.type&&"undefined"==typeof _widgetTypeLabels[t.type.toLowerCase()]&&delete t.type,handleEmbed=function(e,t){t.legacyEmbedUrl?Ndn_Legacy_Config.translate(t.legacyEmbedUrl,t.type).fail(function(){}).done(function(i){t=_.extend(i,t),_embedContainer(e,t)}):_embedContainer(e,t)},"videolauncher/slider300x250"==(t.type+"").toLowerCase()||"videolauncher/playlist300x250"==(t.type+"").toLowerCase()?(t.playlistItemsLimit=15,Ndn_PlayerServices.getPtrStatus(t).done($.proxy(function(i){1===i&&Ndn_Utils_UserAgent.isAbleToPlayVideoAutomatically()&&(t.type="VideoPlayer/PTR"),handleEmbed(e,t)},this))):handleEmbed(e,t)},getRecognizedWidgetTypes:function(){return _.keys(_widgetTypesData)}});return _nw2e.Ndn_Widget=Ndn_Widget,Ndn_Widget}),Ndn_Require.define("models/Ndn/TemplateSet",["underscore","backbone","mustache"],function(e,t,i){return t.Model.extend({defaults:{rendered:[],templates:{}},initialize:function(e){this.set("templates",e)},getTemplate:function(t,n){var o=this.get("templates")[t][0],a=this.get("templates")[t][1];return"undefined"==typeof n?("undefined"==typeof this.get("rendered")[t]&&(this.get("rendered")[t]=i.to_html(o,a)),this.get("rendered")[t]):i.to_html(o,e.extend({},a,n))}})}),Ndn_Require.define("text!lib/amp.premier/config/skin/ndn_assets.xml",[],function(){return"<application>\n	<player ad_control_enabled='true' ad_server_timeout='20'\n		auto_replay='false' branding_preload='none' core_player_name='ndn-player'\n		dvr_enabled='0' fullscreen_enabled='true' hds_live_low_latency='true'\n		mbr_start_index='2' netsession_install_prompt_frequency_secs='-1'\n		show_feature_bar='false' use_last_known_bitrate='false'\n		use_netsession_client='false' volume='75'>\n	</player>\n	<plugins>\n		<plugin absolute='true' host='osmf' id='AkamaiAdvancedStreamingPlugin' type='static'>com.akamai.osmf.AkamaiAdvancedStreamingPluginInfo</plugin>\n		<plugin host='osmf' type='static' id='OSMFCSMALoader'>com.akamai.playeranalytics.osmf.OSMFCSMALoaderInfo</plugin>\n		<plugin host='osmf' type='dynamic' id='CaptioningPlugin'>{{akamaiResourcesFolderUrl}}/plugins/CaptioningPlugin.swf</plugin>\n	</plugins>\n	<view skin='{{akamaiJsLibFolderUrl}}/ndn_assets.swf'>\n		<element id='captionDisplay' style='bottom: 0px; opacity:1;' />\n		<element id='controls' scrubPosition='top' backgroundAlpha='.8' height='51' autoHideDelay='1' transitionTime='0.50'>\n			<element id='playPauseBtn' />\n			<element id='scrubBar' collapsedHeight='5' style='background: linear-gradient(90deg, #232323 #232323); height: 9px;' />\n			<element id='progressBar' style='background: linear-gradient(90deg, #0099CC #0099CC);' />\n			<element id='loadedBar' style='background: linear-gradient(90deg, #666666 #666666);' />\n			<element id='streamTimeIndicator' position='left'>\n				<element id='streamTime' />\n				<element id='streamDuration' color='#666666' />\n			</element>\n			<element id='shareBtn' />\n			<element id='facebookBtn' />\n			<element id='twitterBtn' />\n			<element id='volumeBar' backgroundColor='#111111' trackColor='#C1C1C3' color='#0099CC' position='relative' width='25' />\n			<element id='volumeBtn' />\n			<element id='fullscreenBtn' />\n			<element id='posterBackground' color='#000000' alpha='1' />\n		</element>\n	</view>\n</application>"}),Ndn_Require.define("text!lib/amp.premier/config/skin/ndn_assets_small.xml",[],function(){return"<application>\n	<player ad_control_enabled='true' ad_server_timeout='20'\n		branding_preload='none' core_player_name='ndn-player' dvr_enabled='0'\n		hds_live_low_latency='true' mbr_start_index='2'\n		netsession_install_prompt_frequency_secs='-1' show_feature_bar='false'\n		use_last_known_bitrate='false' use_netsession_client='false'>\n	</player>\n	<plugins>\n		<plugin absolute='true' host='osmf' id='AkamaiAdvancedStreamingPlugin' type='static'>com.akamai.osmf.AkamaiAdvancedStreamingPluginInfo</plugin>\n		<plugin host='osmf' type='static' id='OSMFCSMALoader'>com.akamai.playeranalytics.osmf.OSMFCSMALoaderInfo</plugin>\n		<plugin host='osmf' type='dynamic' id='CaptioningPlugin'>{{akamaiResourcesFolderUrl}}/plugins/CaptioningPlugin.swf</plugin>\n	</plugins>\n	<view skin='{{akamaiJsLibFolderUrl}}/ndn_assets_small.swf'>\n		<element id='adOptions'>\n			<element id='adChoices' target='http://assets.newsinc.com/info/adchoices.html' />\n			<element id='adCountdown' />\n		</element>\n		<element id='captionDisplay' style='bottom: 0px; opacity:1;' />\n		<element id='controls' scrubPosition='top' backgroundAlpha='.8' height='40' itemMargin='12' autoHideDelay='1' transitionTime='0.5'>\n			<element id='playPauseBtn' />\n			<element id='scrubBar' collapsedHeight='4' style='background: linear-gradient(90deg, #232323 #232323); height: 4px;' />\n			<element id='progressBar' style='background: linear-gradient(90deg, #0099CC #0099CC);' />\n			<element id='loadedBar' style='background: linear-gradient(90deg, #666666 #666666);' />\n			<element id='streamTimeIndicator' position='left'>\n				<element id='streamTime' />\n				<element id='streamDuration' color='#666666' />\n			</element>\n			<element id='shareBtn' />\n			<element id='facebookBtn' />\n			<element id='twitterBtn' />\n			<element id='volumeBar' backgroundColor='#111111' trackColor='#C1C1C3' color='#0099CC' position='relative' width='25' />\n			<element id='volumeBtn' />\n			<element id='fullscreenBtn' />\n			<element id='posterBackground' color='#000000' alpha='1' />\n		</element>\n	</view>\n</application>"}),Ndn_Require.define("lib/amp.premier/config/skin/templates",["models/Ndn/TemplateSet","models/Ndn/Widget","text!lib/amp.premier/config/skin/ndn_assets.xml","text!lib/amp.premier/config/skin/ndn_assets_small.xml"],function(e,t,i,n){var o={akamaiJsLibFolderUrl:t.getAppUrl()+"/js/lib/amp.premier",akamaiResourcesFolderUrl:t.getAppUrl()+"/resources"};return new e({ndn_assets:[i,o],ndn_assets_small:[n,o]})}),Date.now||(Date.now=function(){return+new Date}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw new TypeError("Bind must be called on a function");var i=[].slice,n=i.call(arguments,1),o=this,a=function(){return o.apply(this instanceof t?this:e||{},n.concat(i.call(arguments)))};return t.prototype=o.prototype,a.prototype=new t,a}),"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,o,a,r,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,i=0;a>i;i+=1)r[i]=str(i,l)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(a=rep.length,i=0;a>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,n,o=e[t];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=walk(o,i),void 0!==n?o[i]=n:delete o[i]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){function t(e,t){this.setNotifyMethod(e),this.setNotifyContext(t)}function i(e,t,i){this.name=e,this.body=t,this.type=i}function n(){}function o(){}function a(){this.subCommands=[],this.initializeMacroCommand()}function r(e,t){this.mediatorName=e||this.constructor.NAME,this.viewComponent=t}function s(e,t){this.proxyName=e||this.constructor.NAME,null!=t&&this.setData(t)}function l(e){if(null!=l.instanceMap[e])throw Error(l.MULTITON_MSG);this.initializeNotifier(e),l.instanceMap[e]=this,this.initializeFacade()}function d(e){if(null!=d.instanceMap[e])throw Error(d.MULTITON_MSG);this.multitonKey=e,d.instanceMap[this.multitonKey]=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}function c(e){if(c.instanceMap[e])throw Error(c.MULTITON_MSG);this.multitonKey=e,c.instanceMap[e]=this,this.proxyMap=[],this.initializeModel()}function u(e){if(null!=u.instanceMap[e])throw Error(u.MULTITON_MSG);this.multitonKey=e,u.instanceMap[this.multitonKey]=this,this.commandMap=[],this.initializeController()}function p(e,t,i){for(var n,o,e=e.split("."),i=i||h.global,a=0,r=e.length;r>a;a++)n=i,o=e[a],i=null==i[o]?i[o]={}:i[o];return null==t?i:n[o]=t}if(null==e&&(e=window),!e.puremvc){t.prototype.setNotifyMethod=function(e){this.notify=e},t.prototype.setNotifyContext=function(e){this.context=e},t.prototype.getNotifyMethod=function(){return this.notify},t.prototype.getNotifyContext=function(){return this.context},t.prototype.notifyObserver=function(e){this.getNotifyMethod().call(this.getNotifyContext(),e)},t.prototype.compareNotifyContext=function(e){return e===this.context},t.prototype.notify=null,t.prototype.context=null,i.prototype.getName=function(){return this.name},i.prototype.setBody=function(e){this.body=e},i.prototype.getBody=function(){return this.body},i.prototype.setType=function(e){this.type=e},i.prototype.getType=function(){return this.type},i.prototype.toString=function(){var e="Notification Name: "+this.getName(),e=e+("\nBody:"+(null==this.body?"null":this.body.toString()));return e+="\nType:"+(null==this.type?"null":this.type)},i.prototype.name=null,i.prototype.type=null,i.prototype.body=null,n.prototype.sendNotification=function(e,t,i){var n=this.getFacade();n&&n.sendNotification(e,t,i)},n.prototype.initializeNotifier=function(e){this.multitonKey=""+e,this.facade=this.getFacade()},n.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(n.MULTITON_MSG);return l.getInstance(this.multitonKey)},n.prototype.multitonKey=null,n.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",o.prototype=new n,o.prototype.constructor=o,o.prototype.execute=function(){},a.prototype=new n,a.prototype.constructor=a,a.prototype.subCommands=null,a.prototype.initializeMacroCommand=function(){},a.prototype.addSubCommand=function(e){this.subCommands.push(e)},a.prototype.execute=function(e){for(;0<this.subCommands.length;){var t=new(this.subCommands.shift());t.initializeNotifier(this.multitonKey),t.execute(e)}},r.NAME="Mediator",r.prototype=new n,r.prototype.constructor=r,r.prototype.getMediatorName=function(){return this.mediatorName},r.prototype.setViewComponent=function(e){this.viewComponent=e},r.prototype.getViewComponent=function(){return this.viewComponent},r.prototype.listNotificationInterests=function(){return[]},r.prototype.handleNotification=function(){},r.prototype.onRegister=function(){},r.prototype.onRemove=function(){},r.prototype.mediatorName=null,r.prototype.viewComponent=null,s.NAME="Proxy",s.prototype=new n,s.prototype.constructor=s,s.prototype.getProxyName=function(){return this.proxyName},s.prototype.setData=function(e){this.data=e},s.prototype.getData=function(){return this.data},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.proxyName=null,s.prototype.data=null,l.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},l.getInstance=function(e){return null==e?null:(null==l.instanceMap[e]&&(l.instanceMap[e]=new l(e)),l.instanceMap[e])},l.prototype.initializeController=function(){null==this.controller&&(this.controller=u.getInstance(this.multitonKey))},l.prototype.initializeModel=function(){null==this.model&&(this.model=c.getInstance(this.multitonKey))},l.prototype.initializeView=function(){null==this.view&&(this.view=d.getInstance(this.multitonKey))},l.prototype.registerCommand=function(e,t){this.controller.registerCommand(e,t)},l.prototype.removeCommand=function(e){this.controller.removeCommand(e)},l.prototype.hasCommand=function(e){return this.controller.hasCommand(e)},l.prototype.registerProxy=function(e){this.model.registerProxy(e)},l.prototype.retrieveProxy=function(e){return this.model.retrieveProxy(e)},l.prototype.removeProxy=function(e){var t=null;return null!=this.model&&(t=this.model.removeProxy(e)),t},l.prototype.hasProxy=function(e){return this.model.hasProxy(e)},l.prototype.registerMediator=function(e){null!=this.view&&this.view.registerMediator(e)},l.prototype.retrieveMediator=function(e){return this.view.retrieveMediator(e)},l.prototype.removeMediator=function(e){var t=null;return null!=this.view&&(t=this.view.removeMediator(e)),t},l.prototype.hasMediator=function(e){return this.view.hasMediator(e)},l.prototype.sendNotification=function(e,t,n){this.notifyObservers(new i(e,t,n))},l.prototype.notifyObservers=function(e){null!=this.view&&this.view.notifyObservers(e)},l.prototype.initializeNotifier=function(e){this.multitonKey=e},l.hasCore=function(e){return null!=l.instanceMap[e]},l.removeCore=function(e){null!=l.instanceMap[e]&&(c.removeModel(e),d.removeView(e),u.removeController(e),delete l.instanceMap[e])},l.prototype.controller=null,l.prototype.model=null,l.prototype.view=null,l.prototype.multitonKey=null,l.instanceMap=[],l.MULTITON_MSG="Facade instance for this Multiton key already constructed!",d.prototype.initializeView=function(){},d.getInstance=function(e){return null==e?null:(null==d.instanceMap[e]&&(d.instanceMap[e]=new d(e)),d.instanceMap[e])},d.prototype.registerObserver=function(e,t){null!=this.observerMap[e]?this.observerMap[e].push(t):this.observerMap[e]=[t]},d.prototype.notifyObservers=function(e){if(null!=this.observerMap[e.getName()]){for(var t,i=this.observerMap[e.getName()],n=[],o=0;o<i.length;o++)t=i[o],n.push(t);for(o=0;o<n.length;o++)t=n[o],t.notifyObserver(e)}},d.prototype.removeObserver=function(e,t){for(var i=this.observerMap[e],n=0;n<i.length;n++)if(1==i[n].compareNotifyContext(t)){i.splice(n,1);break}0==i.length&&delete this.observerMap[e]},d.prototype.registerMediator=function(e){if(null==this.mediatorMap[e.getMediatorName()]){e.initializeNotifier(this.multitonKey),this.mediatorMap[e.getMediatorName()]=e;var i=e.listNotificationInterests();if(0<i.length)for(var n=new t(e.handleNotification,e),o=0;o<i.length;o++)this.registerObserver(i[o],n);e.onRegister()}},d.prototype.retrieveMediator=function(e){return this.mediatorMap[e]},d.prototype.removeMediator=function(e){var t=this.mediatorMap[e];if(t){for(var i=t.listNotificationInterests(),n=0;n<i.length;n++)this.removeObserver(i[n],t);delete this.mediatorMap[e],t.onRemove()}return t},d.prototype.hasMediator=function(e){return null!=this.mediatorMap[e]},d.removeView=function(e){delete d.instanceMap[e]},d.prototype.mediatorMap=null,d.prototype.observerMap=null,d.instanceMap=[],d.prototype.multitonKey=null,d.MULTITON_MSG="View instance for this Multiton key already constructed!",c.prototype.initializeModel=function(){},c.getInstance=function(e){return null==e?null:(null==c.instanceMap[e]&&(c.instanceMap[e]=new c(e)),c.instanceMap[e])},c.prototype.registerProxy=function(e){e.initializeNotifier(this.multitonKey),this.proxyMap[e.getProxyName()]=e,e.onRegister()},c.prototype.retrieveProxy=function(e){return this.proxyMap[e]},c.prototype.hasProxy=function(e){return null!=this.proxyMap[e]},c.prototype.removeProxy=function(e){var t=this.proxyMap[e];return t&&(this.proxyMap[e]=null,t.onRemove()),t},c.removeModel=function(e){delete c.instanceMap[e]},c.prototype.proxyMap=null,c.instanceMap=[],c.MULTITON_MSG="Model instance for this Multiton key already constructed!",u.prototype.initializeController=function(){this.view=d.getInstance(this.multitonKey)},u.getInstance=function(e){return null==e?null:(null==this.instanceMap[e]&&(this.instanceMap[e]=new this(e)),this.instanceMap[e])},u.prototype.executeCommand=function(e){var t=this.commandMap[e.getName()];null!=t&&(t=new t,t.initializeNotifier(this.multitonKey),t.execute(e))},u.prototype.registerCommand=function(e,i){null==this.commandMap[e]&&this.view.registerObserver(e,new t(this.executeCommand,this)),this.commandMap[e]=i},u.prototype.hasCommand=function(e){return null!=this.commandMap[e]},u.prototype.removeCommand=function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null)},u.removeController=function(e){delete this.instanceMap[e]},u.prototype.view=null,u.prototype.commandMap=null,u.prototype.multitonKey=null,u.instanceMap=[],u.MULTITON_MSG="controller key for this Multiton key already constructed";var h={global:function(){return this}(),extend:function(e,t){if("function"!=typeof e)throw new TypeError("#extend- child should be Function");if("function"!=typeof t)throw new TypeError("#extend- parent should be Function");if(t!==e){var i=new Function;return i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},decorate:function(e,t){for(var i in t)e[i]=t[i];return e}};e.puremvc={View:d,Model:c,Controller:u,SimpleCommand:o,MacroCommand:a,Facade:l,Mediator:r,Observer:t,Notification:i,Notifier:n,Proxy:s,define:function(e,t,i){e||(e={});var n=e.name,o=e.parent,a="function"==typeof o,r=e.scope||null;if("parent"in e&&!a)throw new TypeError("Class parent must be Function");if(e.hasOwnProperty("constructor")){if(e=e.constructor,"function"!=typeof e)throw new TypeError("Class constructor must be Function")}else e=a?function(){o.apply(this,arguments)}:new Function;if(a&&h.extend(e,o),t&&(a=e.prototype,h.decorate(a,t),a.constructor=e),i&&h.decorate(e,i),n){if("string"!=typeof n)throw new TypeError("Class name must be primitive string");p(n,e,r)}return e},declare:p}}}(this);var swfobject=function(){function e(){if(!z){try{var e=V.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(t){return}z=!0;for(var i=H.length,n=0;i>n;n++)H[n]()}}function t(e){z?e():H[H.length]=e}function i(e){if(typeof R.addEventListener!=w)R.addEventListener("load",e,!1);else if(typeof V.addEventListener!=w)V.addEventListener("load",e,!1);else if(typeof R.attachEvent!=w)y(R,"onload",e);else if("function"==typeof R.onload){var t=R.onload;R.onload=function(){t(),e()}}else R.onload=e}function n(){U?o():a()}function o(){var e=V.getElementsByTagName("body")[0],t=m(I);t.setAttribute("type",L);var i=e.appendChild(t);if(i){var n=0;!function(){if(typeof i.GetVariable!=w){var o=i.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),W.pv=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)])}else if(10>n)return n++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,a()}()}else a()}function a(){var e=B.length;if(e>0)for(var t=0;e>t;t++){var i=B[t].id,n=B[t].callbackFn,o={success:!1,id:i};if(W.pv[0]>0){var a=f(i);if(a)if(!v(B[t].swfVersion)||W.wk&&W.wk<312)if(B[t].expressInstall&&s()){var c={};c.data=B[t].expressInstall,c.width=a.getAttribute("width")||"0",c.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(c.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(c.align=a.getAttribute("align"));for(var u={},p=a.getElementsByTagName("param"),h=p.length,g=0;h>g;g++)"movie"!=p[g].getAttribute("name").toLowerCase()&&(u[p[g].getAttribute("name")]=p[g].getAttribute("value"));l(c,u,i,n)}else d(a),n&&n(o);else E(i,!0),n&&(o.success=!0,o.ref=r(i),n(o))}else if(E(i,!0),n){var m=r(i);m&&typeof m.SetVariable!=w&&(o.success=!0,o.ref=m),n(o)}}}function r(e){var t=null,i=f(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=w)t=i;else{var n=i.getElementsByTagName(I)[0];n&&(t=n)}return t}function s(){return!j&&v("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function l(e,t,i,n){j=!0,P=n||null,T={success:!1,id:i};var o=f(i);if(o){"OBJECT"==o.nodeName?(C=c(o),b=null):(C=o,b=i),e.id=D,(typeof e.width==w||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==w||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),V.title=V.title.slice(0,47)+" - Flash Player Installation";var a=W.ie&&W.win?"ActiveX":"PlugIn",r="MMredirectURL="+R.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+V.title;if(typeof t.flashvars!=w?t.flashvars+="&"+r:t.flashvars=r,W.ie&&W.win&&4!=o.readyState){var s=m("div");i+="SWFObjectNew",s.setAttribute("id",i),o.parentNode.insertBefore(s,o),o.style.display="none",function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}u(e,t,i)}}function d(e){if(W.ie&&W.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(c(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(c(e),e)}function c(e){var t=m("div");if(W.win&&W.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(I)[0];if(i){var n=i.childNodes;if(n)for(var o=n.length,a=0;o>a;a++)1==n[a].nodeType&&"PARAM"==n[a].nodeName||8==n[a].nodeType||t.appendChild(n[a].cloneNode(!0))}}return t}function u(e,t,i){var n,o=f(i);if(W.wk&&W.wk<312)return n;if(o)if(typeof e.id==w&&(e.id=i),W.ie&&W.win){var a="";for(var r in e)e[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?t.movie=e[r]:"styleclass"==r.toLowerCase()?a+=' class="'+e[r]+'"':"classid"!=r.toLowerCase()&&(a+=" "+r+'="'+e[r]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",G[G.length]=e.id,n=f(e.id)}else{var d=m(I);d.setAttribute("type",L);for(var c in e)e[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?d.setAttribute("class",e[c]):"classid"!=c.toLowerCase()&&d.setAttribute(c,e[c]));for(var u in t)t[u]!=Object.prototype[u]&&"movie"!=u.toLowerCase()&&p(d,u,t[u]);o.parentNode.replaceChild(d,o),n=d}return n}function p(e,t,i){var n=m("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}function h(e){var t=f(e);t&&"OBJECT"==t.nodeName&&(W.ie&&W.win?(t.style.display="none",function(){4==t.readyState?g(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function g(e){var t=f(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function f(e){var t=null;try{t=V.getElementById(e)}catch(i){}return t}function m(e){return V.createElement(e)}function y(e,t,i){e.attachEvent(t,i),F[F.length]=[e,t,i]}function v(e){var t=W.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1}function _(e,t,i,n){if(!W.ie||!W.mac){var o=V.getElementsByTagName("head")[0];if(o){var a=i&&"string"==typeof i?i:"screen";if(n&&(N=null,S=null),!N||S!=a){var r=m("style");r.setAttribute("type","text/css"),r.setAttribute("media",a),N=o.appendChild(r),W.ie&&W.win&&typeof V.styleSheets!=w&&V.styleSheets.length>0&&(N=V.styleSheets[V.styleSheets.length-1]),S=a}W.ie&&W.win?N&&typeof N.addRule==I&&N.addRule(e,t):N&&typeof V.createTextNode!=w&&N.appendChild(V.createTextNode(e+" {"+t+"}"))}}}function E(e,t){if(q){var i=t?"visible":"hidden";z&&f(e)?f(e).style.visibility=i:_("#"+e,"visibility:"+i)}}function A(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=w?encodeURIComponent(e):e}{var C,b,P,T,N,S,w="undefined",I="object",x="Shockwave Flash",M="ShockwaveFlash.ShockwaveFlash",L="application/x-shockwave-flash",D="SWFObjectExprInst",k="onreadystatechange",R=window,V=document,O=navigator,U=!1,H=[n],B=[],G=[],F=[],z=!1,j=!1,q=!0,W=function(){var e=typeof V.getElementById!=w&&typeof V.getElementsByTagName!=w&&typeof V.createElement!=w,t=O.userAgent.toLowerCase(),i=O.platform.toLowerCase(),n=/win/.test(i?i:t),o=/mac/.test(i?i:t),a=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,r=!1,s=[0,0,0],l=null;if(typeof O.plugins!=w&&typeof O.plugins[x]==I)l=O.plugins[x].description,!l||typeof O.mimeTypes!=w&&O.mimeTypes[L]&&!O.mimeTypes[L].enabledPlugin||(U=!0,r=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof R.ActiveXObject!=w)try{var d=new ActiveXObject(M);d&&(l=d.GetVariable("$version"),l&&(r=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(c){}return{w3:e,pv:s,wk:a,ie:r,win:n,mac:o}}();!function(){W.w3&&((typeof V.readyState!=w&&"complete"==V.readyState||typeof V.readyState==w&&(V.getElementsByTagName("body")[0]||V.body))&&e(),z||(typeof V.addEventListener!=w&&V.addEventListener("DOMContentLoaded",e,!1),W.ie&&W.win&&(V.attachEvent(k,function(){"complete"==V.readyState&&(V.detachEvent(k,arguments.callee),e())}),R==top&&!function(){if(!z){try{V.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),W.wk&&!function(){return z?void 0:/loaded|complete/.test(V.readyState)?void e():void setTimeout(arguments.callee,0)}(),i(e)))
}(),function(){W.ie&&W.win&&window.attachEvent("onunload",function(){for(var e=F.length,t=0;e>t;t++)F[t][0].detachEvent(F[t][1],F[t][2]);for(var i=G.length,n=0;i>n;n++)h(G[n]);for(var o in W)W[o]=null;W=null;for(var a in swfobject)swfobject[a]=null;swfobject=null})}()}return{registerObject:function(e,t,i,n){if(W.w3&&e&&t){var o={};o.id=e,o.swfVersion=t,o.expressInstall=i,o.callbackFn=n,B[B.length]=o,E(e,!1)}else n&&n({success:!1,id:e})},getObjectById:function(e){return W.w3?r(e):void 0},embedSWF:function(e,i,n,o,a,r,d,c,p,h){var g={success:!1,id:i};W.w3&&!(W.wk&&W.wk<312)&&e&&i&&n&&o&&a?(E(i,!1),t(function(){n+="",o+="";var t={};if(p&&typeof p===I)for(var f in p)t[f]=p[f];t.data=e,t.width=n,t.height=o;var m={};if(c&&typeof c===I)for(var y in c)m[y]=c[y];if(d&&typeof d===I)for(var _ in d)typeof m.flashvars!=w?m.flashvars+="&"+_+"="+d[_]:m.flashvars=_+"="+d[_];if(v(a)){var A=u(t,m,i);t.id==i&&E(i,!0),g.success=!0,g.ref=A}else{if(r&&s())return t.data=r,void l(t,m,i,h);E(i,!0)}h&&h(g)})):h&&h(g)},switchOffAutoHideShow:function(){q=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(e,t,i){return W.w3?u(e,t,i):void 0},showExpressInstall:function(e,t,i,n){W.w3&&s()&&l(e,t,i,n)},removeSWF:function(e){W.w3&&h(e)},createCSS:function(e,t,i,n){W.w3&&_(e,t,i,n)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=V.location.search||V.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return A(t);for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==e)return A(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(j){var e=f(D);e&&C&&(e.parentNode.replaceChild(C,e),b&&(E(b,!0),W.ie&&W.win&&(C.style.display="block")),P&&P(T)),j=!1}}}}();!function(){function e(){var e,t,i,n=this;t=null,this.getSDK=function(){return t},this.setSDK=function(i){var n,o;t=i,e();for(n in t)o=t[n],window[n]=o;return t},this.saveSDK=function(e,t){var n,o,a;if(null!=t&&null!=e&&""!==e){if(null==t.main)for(n in t)if(o=t[n],(null!=o?o.VERSION:void 0)===e){t.main=o;break}return null==(a=t.version)&&(t.version=e),i.push(t),this[e]=t,t}},i=[],this.getVersions=function(){return i.slice()},this.getVersion=function(e){return this[e]},this.setVersion=function(e){return t=this.getVersion(e),null==t?null:(this.setSDK(t),t)},this.revert=function(){return this.setSDK(i[0])},this.noConflict=function(){var e;return e=this.getSDK(),this.revert(),e},this.create=function(){var e;return e=function(e,t){return this.prototype=e.prototype,e.apply(this,t)},function(){return new e(t.main,arguments)}}(),(e=function(){var e,i,o,a,r;if(null!=(a=window.com)?null!=(r=a.akamai)?r.amp:void 0:void 0)for(e in window)if(o=window[e],(o===window.AMP||o===window.AMPremier)&&null!=(null!=o?o.VERSION:void 0)&&""!==o.VERSION&&o.VERSION!==(null!=t?t.version:void 0)&&null==n[o.VERSION]){i={},i.main=o,i.com=window.com,window.AMP&&(i.AMP=window.AMP),window.AMPPremier&&(i.AMPremier=window.AMPPremier),window.Utils&&(i.Utils=window.Utils),window.QueryString&&(i.QueryString=window.QueryString),window.QueryParams&&(i.QueryParams=window.QueryParams),n.saveSDK(o.VERSION,i);break}})()}function t(e){return{}.hasOwnProperty(e)}function i(e,i){function n(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e}function n(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1}function o(e,t){return function(){return e.apply(t,arguments)}}function a(){}function r(e,t){r.__super__.constructor.call(this,this.getModuleName()+"-"+Date.now()),this.logger=Ct,this.config=e,this.moduleMap={},this.viewComponent=t,this.initialize(),this.moduleAPI=this.createAPI()}function s(e){s.attachModuleDispatcher(e,new Et(this))}function l(e){this.config=e,l.__super__.constructor.call(this)}function d(e){var t,i,n,o;e.className=No.PREFIX+"player",i=document.createElement("div"),i.className=No.PREFIX+"install-flash",e.appendChild(i),o=document.createElement("p"),o.innerHTML="To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed.",i.appendChild(o),t=document.createElement("a"),t.href="http://www.adobe.com/go/getflashplayer",i.appendChild(t),n=document.createElement("img"),n.src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",n.alt="Get Adobe Flash player",t.appendChild(n)}function c(){c.__super__.constructor.call(this)}function u(){u.__super__.constructor.call(this)}function p(){p.__super__.constructor.call(this)}function h(){h.__super__.constructor.call(this)}function g(){g.__super__.constructor.call(this)}function f(){f.__super__.constructor.call(this)}function m(){m.__super__.constructor.call(this)}function y(){y.__super__.constructor.call(this)}function v(){v.__super__.constructor.call(this)}function _(){_.__super__.constructor.call(this)}function E(){E.__super__.constructor.call(this)}function A(){A.__super__.constructor.call(this)}function C(){C.__super__.constructor.call(this)}function b(){b.__super__.constructor.call(this)}function P(){P.__super__.constructor.call(this)}function T(){T.__super__.constructor.call(this)}function N(){N.__super__.constructor.call(this)}function S(){S.__super__.constructor.call(this)}function w(){w.__super__.constructor.call(this)}function I(){I.__super__.constructor.call(this)}function x(e,t){this.cssPrefix=No.PREFIX,x.__super__.constructor.call(this,e,t)}function M(e,t){M.__super__.constructor.call(this,e,t)}function L(e,t){null==t&&(t="div"),"string"==typeof t&&(t=document.createElement(t)),L.__super__.constructor.call(this,e,t)}function D(e){D.__super__.constructor.call(this,D.NAME,e)}function k(e){k.__super__.constructor.call(this,k.NAME,e)}function R(e){R.__super__.constructor.call(this,R.NAME,e)}function V(){}function O(e){O.__super__.constructor.call(this,O.NAME,e)}function U(){U.__super__.constructor.call(this)}function H(e){this.data=new ni,this.value={},H.__super__.constructor.call(this,e)}function B(){B.__super__.constructor.call(this)}function G(){G.__super__.constructor.call(this)}function F(){F.__super__.constructor.call(this)}function z(){z.__super__.constructor.call(this)}function j(){j.__super__.constructor.call(this)}function q(){q.__super__.constructor.call(this)}function W(){W.__super__.constructor.call(this)}function Y(){Y.__super__.constructor.call(this)}function $(){$.__super__.constructor.call(this)}function K(){K.__super__.constructor.call(this)}function X(){X.__super__.constructor.call(this)}function Z(){Z.__super__.constructor.call(this)}function J(e){J.__super__.constructor.call(this,e)}function Q(e){Q.__super__.constructor.call(this,e)}function et(e,t){s.attachModuleDispatcher(e,new Pt(this,t)),this.getContainer=function(){return e.getViewComponent()},this.getVideo=function(){return e.getVideo()},this.getConfig=function(){return e.getConfig()},this.destroy=function(){return e.destroy()}}function tt(e,t){var i,n,o,a,r,s;tt.__super__.constructor.call(this,e,t),s=e,r=s.retrieveProxy(di.NAME),o=s.retrieveProxy(ui.NAME),i=s.retrieveProxy(Xt.NAME),n=s.retrieveProxy(zt.NAME),a=s.retrieveProxy(ai.NAME),this.evaluateBinding=i.evaluateBinding.bind(i),this.canPlayType=r.canPlayType.bind(r),this.load=function(){s.sendNotification(vo.LOAD)},this.play=function(){s.sendNotification(vo.PLAY,!0)},this.replay=function(){s.sendNotification(vo.REPLAY)},this.pause=function(){s.sendNotification(vo.PAUSE)},this.end=function(){s.sendNotification(vo.END)},this.setParams=function(e){return s.sendNotification(vo.CHANGE_PARAMS,e),e},this.getParams=a.getData.bind(a),this.setAutoplay=function(e){return s.sendNotification(vo.CHANGE_AUTOPLAY,e),e},this.getAutoplay=n.getAutoplay.bind(n),this.setLoop=function(e){return s.sendNotification(vo.CHANGE_LOOP,e),e},this.getLoop=n.getLoop.bind(n),this.setMuted=function(e){return s.sendNotification(vo.CHANGE_MUTED,e),e},this.getMuted=r.getMuted.bind(r),this.setMedia=function(e){return s.sendNotification(vo.SET_MEDIA,e),e},this.getMedia=o.getData.bind(s),this.setCurrentTime=function(e){return s.sendNotification(vo.SEEK,e),e},this.getCurrentTime=r.getCurrentTime.bind(r),this.getDuration=r.getDuration.bind(r),this.setSrc=function(e){return s.sendNotification(vo.SET_MEDIA,{src:e}),e},this.getSrc=r.getSrc.bind(r),this.setSource=function(e){return s.sendNotification(vo.SET_MEDIA,{source:e}),e},this.getSource=o.getSource.bind(o),this.setVolume=function(e){return s.sendNotification(vo.CHANGE_VOLUME,e),e},this.getVolume=r.getVolume.bind(r),this.getSeeking=r.getSeeking.bind(r),this.getPaused=r.getPaused.bind(r),this.getEnded=r.getEnded.bind(r),this.enterFullScreen=function(){s.sendNotification(vo.CHANGE_DISPLAY_STATE,Po.FULL_SCREEN)},this.exitFullScreen=function(){s.sendNotification(vo.CHANGE_DISPLAY_STATE,Po.NORMAL)}}function it(e,t,i){this.dispatcher=i,it.__super__.constructor.call(this,e,t)}function nt(e,t,i){nt.__super__.constructor.call(this,e,t,i)}function ot(){}function at(){at.__super__.constructor.call(this)}function rt(){rt.__super__.constructor.call(this)}function st(e){this.config=e,st.__super__.constructor.call(this,this.constructor.NAME)}function lt(e,t){lt.__super__.constructor.call(this,this.constructor.NAME,e),this.layers=[],null!=t&&(this.type=t)}function dt(e){dt.__super__.constructor.call(this,e,this.type)}function ct(){ct.__super__.constructor.call(this)}function ut(){ut.__super__.constructor.call(this)}function pt(){pt.__super__.constructor.call(this)}function ht(){}function gt(){gt.__super__.constructor.call(this)}function ft(e){ft.__super__.constructor.call(this,e)}function mt(){mt.__super__.constructor.call(this,this.constructor.NAME,{})}function yt(){yt.__super__.constructor.call(this)}function vt(e,t){vt.__super__.constructor.call(this,e,t),this.getFlashXML=function(){var t,i;return t=unescape(e.flashvars.settings_xml),i=ot.parse(t),i.toString=function(){return t},i},this.getFlashVars=function(){return e.flashvars},this.evaluateBinding=function(t){return e.video.evaluateBinding(t)},this.canPlayType=function(e){return n.call(Ei.flashTypes,e)>=0?"maybe":""},this.replay=function(){e.video.replay()},this.pause=function(){e.video.pause()},this.end=function(){e.video.stopPlayer()},this.getCurrentTime=function(){return e.video.getCurrentTime()},this.setCurrentTime=function(t){return e.video.jumpToTime(t),t},this.getParams=function(){return e.video.getParams()},this.setParams=function(t){return e.video.setParams(t),t},this.getVolume=function(){return e.video.getVolume()},this.setVolume=function(t,i){return e.video.setVolume(t,i||""),t},this.getDuration=function(){return e.video.getDuration()},this.exitFullScreen=function(){e.video.exitFullScreen()},this.setMedia=e.setMedia.bind(e),this.getMedia=e.getMedia.bind(e),this.load=e.load.bind(e),this.play=e.play.bind(e),this.setMuted=e.setMuted.bind(e),this.getMuted=e.getMuted.bind(e),this.getSrc=e.getSrc.bind(e),this.setSrc=e.setSrc.bind(e),this.setAutoplay=e.setAutoplay.bind(e),this.getAutoplay=e.getAutoplay.bind(e),this.getMedium=e.getMedium.bind(e),this.setMedium=e.setMedium.bind(e),this.setSource=e.setSource.bind(e),this.getSource=e.getSource.bind(e),this.getSeeking=e.getSeeking.bind(e),this.getPaused=e.getPaused.bind(e),this.getEnded=e.getEnded.bind(e)}function _t(e,t,i){var n,o,a,r,s,l,d,c=this;this.flashObjectID+=Date.now(),this.plugins={},_t.__super__.constructor.call(this,e,t,i),this.debug=/debug\=true/.test(location.search),this.media={},a=this.config.flash||{},(null!=(d=a["static"])?d.enabled:void 0)===!0&&(a=a["static"]),s=this.debug&&null!=a.debug?a.debug:a.swf||"amp.swf",l=a.version||"10.1",o=a.expressInstallSWF||"playerProductInstall.swf",r=this.createParams(a),n=this.createAttributes(a),this.flashvars=this.createFlashVars(a),null==this.flashvars.settings_url&&(this.flashvars.settings_xml=this.createXML(this.config)),swfobject.embedSWF(s,this.flashObjectID,"100%","100%",l,o,this.flashvars,r,n,function(e){c.createdHandler(e)})}function Et(e,t){this.api=e,this.dispatcher=null!=t?t:new mi(this.api),Et.__super__.constructor.call(this,name,this)}function At(e){this.module=e,At.__super__.constructor.call(this,e.getModuleName(),this)}function Ct(){}function bt(){bt.__super__.constructor.call(this)}function Pt(e,t){Pt.__super__.constructor.call(this,e,t)}function Tt(e){Tt.__super__.constructor.call(this,e)}function Nt(e,t){null==t&&(t="div"),"string"==typeof t&&(t=document.createElement(t)),Nt.__super__.constructor.call(this,e,t)}function St(e,t){St.__super__.constructor.call(this,t,e)}function wt(){wt.__super__.constructor.call(this,this.constructor.NAME,{}),this.setupHDN1()}function It(){It.__super__.constructor.call(this)}function xt(){xt.__super__.constructor.call(this)}function Mt(){Mt.__super__.constructor.call(this)}function Lt(){Lt.__super__.constructor.call(this)}function Dt(){Dt.__super__.constructor.call(this)}function kt(){kt.__super__.constructor.call(this)}function Rt(){Rt.__super__.constructor.call(this)}function Vt(){Vt.__super__.constructor.call(this)}function Ot(){Ot.__super__.constructor.call(this)}function Ut(){Ut.__super__.constructor.call(this)}function Ht(e){Ht.__super__.constructor.call(this,Ht.NAME,e)}function Bt(e){Bt.__super__.constructor.call(this,Bt.NAME,e)}function Gt(e){Gt.__super__.constructor.call(this,Gt.NAME,e)}function Ft(e){s.attachModuleDispatcher(e,new Tt(this)),this.getConfig=function(){return e.getConfig()}}function zt(e){zt.__super__.constructor.call(this,e)}function jt(e,t){this.app=e,this.logger=this.app.logger,jt.__super__.constructor.call(this,t)}function qt(){this.plugins=[],this.registered=[],qt.__super__.constructor.call(this,this.constructor.NAME,{})}function Wt(e){Wt.__super__.constructor.call(this,Wt.NAME,e)}function Yt(){Yt.__super__.constructor.call(this)}function $t(e){$t.__super__.constructor.call(this),e&&(null!=e.locales&&(this.data.locales=e.locales),null!=e.language&&(this.data.language=e.language)),this.setLocale(this.data.language)}function Kt(){}function Xt(){Xt.__super__.constructor.call(this,this.constructor.NAME,{})}function Zt(e){null!=e&&this.parse(e)}function Jt(e){Jt.__super__.constructor.call(this,e)}function Qt(e){this.message=Qt.MESSAGE+e}function ei(e){ei.__super__.constructor.call(this,e)}function ti(e){ti.__super__.constructor.call(this,e)}function ii(e){this.token=new RegExp(this.tokenStart.source+"([^#]*)"+this.tokenEnd.source,"g"),ii.__super__.constructor.call(this,e)}function ni(e){ni.__super__.constructor.call(this,e)}function oi(){oi.__super__.constructor.call(this)}function ai(e){ai.__super__.constructor.call(this,e)}function ri(e,t){var i;ri.__super__.constructor.call(this,e,t),i=e,this.evaluateBinding=function(e){var t;return null!=(t=i.retrieveProxy(Xt.NAME))?t.evaluateBinding(e):void 0},this.canPlayType=function(){return"maybe"},this.play=function(){i.sendNotification(vo.PLAY)},this.setParams=function(e){return i.sendNotification(vo.CHANGE_PARAMS,e),e},this.getParams=function(){return i.retrieveProxy(ai.NAME).getData()},this.setAutoplay=function(){return!1},this.getAutoplay=function(){return!1},this.setLoop=function(){return!1},this.getLoop=function(){return!1},this.setMuted=function(){return!1},this.getMuted=function(){return!1},this.setMedia=function(e){return i.sendNotification(vo.SET_MEDIA,e),e},this.getMedia=function(){var e;return null!=(e=i.retrieveProxy(ui.NAME))?e.getData():void 0},this.setCurrentTime=function(){return 0},this.getCurrentTime=function(){return 0},this.getDuration=function(){return i.retrieveProxy(ui.NAME).getDuration()},this.setSrc=function(e){return i.sendNotification(vo.SET_MEDIA,{src:e}),e},this.getSrc=function(){return i.retrieveProxy(ui.NAME).getSrc()},this.setSource=function(e){return i.sendNotification(vo.SET_MEDIA,{source:e}),e},this.getSource=function(){return i.retrieveProxy(ui.NAME).getSource()},this.setVolume=function(e){return e},this.getVolume=function(){return 1},this.getSeeking=function(){return!1},this.getPaused=function(){return!1},this.getEnded=function(){return!1}}function si(){si.__super__.constructor.call(this)}function li(){li.__super__.constructor.call(this)}function di(){di.__super__.constructor.call(this)}function ci(e,t,i){var a;this.target=e,this.type=t,this.handler=i,this.trigger=o(this.trigger,this),ci.instances.push(this),this.types=[],a=this.type,n.call(ci.EVENTS,a)>=0?Ei.isTouchDevice()?(this.types.push(ci.TOUCH_EVENTS[this.type]),this.type===ci.TOUCH_EVENTS[1]&&this.types.push(ci.TOUCH_EVENTS[4])):this.types.push(ci.MOUSE_EVENTS[this.type]):this.type instanceof Array?this.types=this.type:this.types.push(this.type),this.bind()}function ui(){this.data={metadata:{}},ui.__super__.constructor.call(this)}function pi(){pi.__super__.constructor.call(this)}function hi(e,t,i){hi.__super__.constructor.call(this,e,t,i)}function gi(e){null!=e&&this.decode(e)}function fi(e,t){this.type=e,null!=t&&(this.data=t)}function mi(e){var t;null==e&&(e=this),t={},this.addEventListener=function(e,i){i&&(null==t[e]&&(t[e]=[]),t[e].push(i))},this.dispatchEvent=function(i){var n,o,a,r,s;if(o=t[i.type],a=e["on"+i.type],i.target=e,null!=a&&a.apply(this,[i]),null!=o)for(r=0,s=o.length;s>r;r++)n=o[r],n.apply(e,[i])},this.removeEventListener=function(e,i){var n,o;return e in t&&(n=t[e],o=n.indexOf(i),-1!==o)?n.splice(o,1):void 0}}function yi(){this.headers={},yi.__super__.constructor.call(this,this)}function vi(){}function _i(){}function Ei(){}function Ai(e){Ai.__super__.constructor.call(this,e)}function Ci(e){Ci.__super__.constructor.call(this,Ci.NAME,e)}function bi(e){bi.__super__.constructor.call(this,bi.NAME,e)}function Pi(e,t){this.player=e,this.config=t,Pi.__super__.constructor.call(this),this.dispatcher=new mi(this)}function Ti(){Ti.__super__.constructor.call(this)}function Ni(){Ni.__super__.constructor.call(this)}function Si(){Si.__super__.constructor.call(this)}function wi(e,t){wi.__super__.constructor.call(this,e,t)}function Ii(e){Ii.__super__.constructor.call(this,Ii.NAME,e)}function xi(e){xi.__super__.constructor.call(this,xi.NAME,e)}function Mi(){Mi.__super__.constructor.call(this)}function Li(e){Li.__super__.constructor.call(this,Li.NAME,e)}function Di(e){var t;Di.__super__.constructor.call(this,e),t=e.retrieveProxy(Ai.NAME),this.setMode=t.setMode.bind(t),this.getMode=t.getMode.bind(t),this.setAutoHide=t.setAutoHide.bind(t),this.getAutoHide=t.getAutoHide.bind(t)}function ki(e,t,i){var n,o,a,r,s,l,d=this;"string"==typeof e&&(e=document.getElementById(e)),r=null,n=null,l=null,o=new mi(this),this.addEventListener=function(e,t,i){o.addEventListener(e,t,i)},this.dispatchEvent=function(e){o.dispatchEvent(e)},this.removeEventListener=function(e,t,i){o.removeEventListener(e,t,i)},null!=i&&this.addEventListener("ready",i),a=function(){var e;return"string"==typeof t&&(e=Ei.get(t),t=JSON.parse(e.responseText)),ki.defaults.readyState!==Mi.LOADED?(null!=Mi.getConfigURL()&&ki.defaults.readyState===Mi.UNINITIALIZED&&ki.loadDefaults(),void ki.defaults.addEventListener("load",function(){s()})):void s()},s=function(){var i,a,s,l;switch(null!=ki.defaults.data&&(t=Ei.override(ki.defaults.data,t)),d.version=d.getVersion(),t.mode=Ei.getPlaybackMode(t.mode),null==t.version&&(t.version=d.version),null==e.dataset&&(e.dataset={}),e.dataset.version=d.version,Ct.log(d.version),t.mode){case"html":r=d.createHTMLPlayer(t,e,o);break;case"flash":r=d.createFlashPlayer(t,e,o);break;case"external":r=d.createExternalPlayer(t,e,o);break;case"none":r=d.createInstallPlayer(e)}if(r.parent=d,n="function"==typeof r.getAPI?r.getAPI():void 0,null!=n)for(a in n)s=n[a],d[a]=s;l=r.getModules();for(a in l)s=l[a],n="function"==typeof s.getAPI?s.getAPI():void 0,d[a]=n||s,i="function"==typeof s.getFeature?s.getFeature():void 0,null!=i&&(d[i]=d[a]);try{e.amp=d}catch(c){Ct.error(c)}},this.getVersion=function(){return ki.VERSION},Ct.enable(),a()}function Ri(){return Ri.__super__.constructor.apply(this,arguments)}function Vi(e){Vi.__super__.constructor.call(this,Vi.NAME,e)}function Oi(e){Oi.__super__.constructor.call(this,e)}function Ui(e,t){Ui.__super__.constructor.call(this,e,t)}function Hi(e,t){Hi.__super__.constructor.call(this,e,t)}function Bi(){Bi.__super__.constructor.call(this)}function Gi(){Gi.__super__.constructor.call(this)}function Fi(){Fi.__super__.constructor.call(this)}function zi(){zi.__super__.constructor.call(this)}function ji(){ji.__super__.constructor.call(this)}function qi(){qi.__super__.constructor.call(this)}function Wi(){Wi.__super__.constructor.call(this)}function Yi(){Yi.__super__.constructor.call(this)}function $i(e){$i.__super__.constructor.call(this,e),this.setDimensions=function(t){return e.retrieveProxy(Oi.NAME).setDimensions(t),t}}function Ki(e,t){Ki.__super__.constructor.call(this,e,t)}function Xi(){this.item=[],this.metadata={}}function Zi(){this.metadata={}}function Ji(){Ji.__super__.constructor.call(this)}function Qi(){Qi.__super__.constructor.call(this)}function en(){en.__super__.constructor.call(this)}function tn(){tn.__super__.constructor.call(this)}function nn(e){var t;nn.__super__.constructor.call(this,e),t=e.retrieveProxy(rn.NAME),this.setURL=function(t){return e.sendNotification(xo.LOAD_FEED,t),t},this.getURL=t.getURL.bind(t),this.setData=function(t){return e.sendNotification(xo.CHANGE_FEED,t),t},this.getData=t.getFeedData.bind(t)}function on(){}function an(e,t){null==t&&(t={}),an.__super__.constructor.call(this,e,t),null!=t.url&&(this.url=t.url),null!=t.data&&(this.data=t.data),this.player.load=function(){}}function rn(e){rn.__super__.constructor.call(this,e),this.helper=new on}function sn(e,t){sn.__super__.constructor.call(this,e,t)}function ln(e,t){null==t&&(t={}),ln.__super__.constructor.call(this,e,t)}function dn(e,t){dn.__super__.constructor.call(this,e,t)}function cn(e){cn.__super__.constructor.call(this,e)}function un(e,t,i){this.startTime=e,this.endTime=t,this.id=i}function pn(e){pn.__super__.constructor.call(this,pn.NAME,e)}function hn(){}function gn(){}function fn(e,t){fn.__super__.constructor.call(this,e,t)}function mn(e,t){mn.__super__.constructor.call(this,e,t)}function yn(e){yn.__super__.constructor.call(this,yn.NAME,e)}function vn(e){vn.__super__.constructor.call(this,vn.NAME,e)}function _n(){var e,t=this;this.captions=[],this.head=document.getElementsByTagName("head")[0],e=window.com||{},e.akamai=e.akamai||{},e.akamai.amp=e.akamai.amp||{},e.akamai.amp.plugins=e.akamai.amp.plugins||{},e.akamai.amp.plugins.subply=e.akamai.amp.plugins.subply||{},e.akamai.amp.plugins.subply.response=function(e){t.parse(e),t.poll()},null==window.com&&(window.com=e),_n.__super__.constructor.call(this,this.constructor.NAME)}function En(e){En.__super__.constructor.call(this,En.NAME,e)}function An(){An.__super__.constructor.call(this)}function Cn(){Cn.__super__.constructor.call(this)}function bn(){bn.__super__.constructor.call(this)}function Pn(){Pn.__super__.constructor.call(this)}function Tn(e,t){var i,n=this;this.kind=e.kind,this.type=e.type,this.src=e.src,this.language=e.srclang,this.label=e.label||this.srclang||this.kind,this.cues=e.cues||[],this.styles=e.styles||{},this.activeCues=[],this.isLive=/^live/.test(this.type),null==this.src||""===this.src||this.isLive?setTimeout(t,1):i=Ei.get(this.src,{onload:function(){try{CaptionParsers[n.type].parse(n,i.response)}catch(e){return void Ct.error("Could not parse caption track: "+n.src)}"function"==typeof t&&t()},onerror:function(){Ct.error("Could not load caption track: "+n.src)}})}function Nn(e){this.activeCaptions=[],this.providers={},this.tracks=[],Nn.__super__.constructor.call(this,e)}function Sn(e,t){Sn.__super__.constructor.call(this,e,t)}function wn(e){var t;wn.__super__.constructor.call(this,e),t=e.retrieveProxy(Nn.NAME),this.getHidden=t.getHidden.bind(t),this.setHidden=function(t){return e.sendNotification(Mo.VISIBILITY_CHANGE,t),t},this.getTracks=t.getTracks.bind(t),this.getTrack=t.getTrack.bind(t),this.setTrack=t.setTrack.bind(t),this.selectTrackByIndex=t.selectTrackByIndex.bind(t),this.selectTrackByLanguage=t.selectTrackByLanguage.bind(t)}function In(e,t){In.__super__.constructor.call(this,e,t)}function xn(e,t){null==t&&(t={}),xn.__super__.constructor.call(this,e,t)}function Mn(e){Mn.__super__.constructor.call(this,Mn.NAME,e)}function Ln(e){Ln.__super__.constructor.call(this,e)}function Dn(){Dn.__super__.constructor.call(this)}function kn(e,t){kn.__super__.constructor.call(this,e,t)}function Rn(e){Rn.__super__.constructor.call(this,e)}function Vn(){return Vn.__super__.constructor.apply(this,arguments)}function On(){On.__super__.constructor.call(this)}function Un(){Un.__super__.constructor.call(this)}function Hn(e,t){Hn.__super__.constructor.call(this,e,t)}function Bn(e,t){null==t&&(t=constructor.NAME),Bn.__super__.constructor.call(this,e,t)}function Gn(e){Gn.__super__.constructor.call(this,Gn.NAME,e)}function Fn(){Fn.__super__.constructor.call(this)}function zn(){zn.__super__.constructor.call(this)}function jn(){jn.__super__.constructor.call(this)}function qn(){qn.__super__.constructor.call(this)}function Wn(e){var t;s.attachModuleDispatcher(e,new Bn(this)),t=e.retrieveProxy(Q.NAME),this.setEnabled=t.setEnabled.bind(t),this.getEnabled=t.getEnabled.bind(t),this.getInProgress=t.getInProgress.bind(t),this.getStarted=t.getStarted.bind(t),this.getPaused=t.getPaused.bind(t),this.getCompanions=t.getCompanions.bind(t)}function Yn(e,t,i,n,o,a,r){this.id=e,this.title=t,this.duration=i,this.position=n,this.type=o,this.partner=a,this.metadata=r}function $n(e,t){$n.__super__.constructor.call(this,e,t)}function Kn(e){Kn.__super__.constructor.call(this,e)}function Xn(e){Xn.__super__.constructor.call(this,e)}function Zn(e,t){Zn.__super__.constructor.call(this,e,t)}function Jn(){return Jn.__super__.constructor.apply(this,arguments)}function Qn(e,t){Qn.__super__.constructor.call(this,e,t)}function eo(e){eo.__super__.constructor.call(this,e)}function to(){return to.__super__.constructor.apply(this,arguments)}function io(e){io.__super__.constructor.call(this,e)}function no(){no.__super__.constructor.call(this)}function oo(){oo.__super__.constructor.call(this)}function ao(e){ao.__super__.constructor.call(this,ao.NAME,e)}function ro(){ro.__super__.constructor.call(this)}function so(e){so.__super__.constructor.call(this,e)}function lo(e,t){lo.__super__.constructor.call(this,e,t)}function co(){return co.__super__.constructor.apply(this,arguments)}function uo(){uo.__super__.constructor.call(this,uo.NAME,document.createElement("div"))}function po(e){po.__super__.constructor.call(this,e)}function ho(e,t){ho.__super__.constructor.call(this,e,t)}function go(e,t){go.__super__.constructor.call(this,e,t)}var fo,mo,yo;if(null==(yo=window.AKAMAI_MEDIA_PLAYER)&&(window.AKAMAI_MEDIA_PLAYER=new e),mo="AMP Premier - NDN v1.0.0000",null==window.AKAMAI_MEDIA_PLAYER[mo]){fo=window.AKAMAI_MEDIA_PLAYER[mo]={};var vo,vo={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",CHANGE_PLAY_STATE:"chageplaystate",PLAY_STATE_CHANGE:"playstatechange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",FULL_SCREEN_CHANGE:"fullscreenchange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",LANGUAGE_CHANGE:"languageChange",TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",UPDATE_TOKEN_CONTEXT:"updatetokencontext",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",CHANGE_PLAYBACK_CORE:"changePlaybackCore",UPDATE_PLAYBACK_CORE:"updatePlaybackCore",START:"start",END:"end",REPLAY:"replay",LOAD_FEED:"loadFeed",REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",ADD_CUE_POINTS:"addCuePoints",REMOVE_CUE_POINTS:"removeCuePoints",INITIALIZED:"initialized",DISABLE_VIDEO_EVENTS:"disableVideoEvents",ENABLE_VIDEO_EVENTS:"enableVideoEvents",LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange"};a.prototype.type,i(r,puremvc.Facade),r.prototype.logger=null,r.prototype.config=null,r.prototype.moduleName=null,r.prototype.moduleMap=null,r.prototype.viewComponent=null,r.prototype.moduleAPI=null,r.prototype.initialize=function(){this.createModel(),this.createController(),this.createView()},r.prototype.createModel=function(){this.registerProxy(new l(this.config))},r.prototype.createView=function(){},r.prototype.createController=function(){},r.prototype.createAPI=function(){return new s(this)},r.prototype.getModuleName=function(){return this.moduleName},r.prototype.getConfig=function(){return this.config},r.prototype.hasModule=function(e){return null!=this.moduleMap[e]},r.prototype.getModules=function(){var e,t,i,n;t={},n=this.moduleMap;for(e in n)i=n[e],t[e]=i.module;return t},r.prototype.registerModule=function(e){var t,i,n,o;o=e.getModuleName(),null!=e&&null==this.moduleMap[o]&&(t=new At(e),this.moduleMap[o]=t,this.registerMediator(t),i=this.getAPI(),n=e.getAPI(),null!=i&&null!=n&&(i[o]=n),e.onRegister())},r.prototype.retrieveModule=function(e){return this.moduleMap[e].module},r.prototype.removeModule=function(e){var t,i;return t=this.moduleMap[e],null!=t?(delete this.moduleMap[e],this.removeMediator(e),i=this.getAPI(),null!=(null!=i?i[e]:void 0)&&delete i[e],t.module.onRemove(),t.module):void 0},r.prototype.getAPI=function(){return this.moduleAPI},r.prototype.listNotificationInterests=function(){return[]},r.prototype.listNotificationPublications=function(){return[]},r.prototype.listNotificationEvents=function(){return[]},r.prototype.getViewComponent=function(){return this.viewComponent},r.prototype.setViewComponent=function(e){return this.viewComponent=e,e},r.prototype.onRegister=function(){},r.prototype.onRemove=function(){},r.prototype.destroy=function(){var e;null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className=""),puremvc.Facade.removeCore(this.multitonKey);for(e in this)this[e]=null,delete this[e]},s.attachModuleDispatcher=function(e,t){var i,n;e.registerMediator(t),n=t.dispatcher,i=t.api,i.addEventListener=n.addEventListener.bind(n),i.removeEventListener=n.removeEventListener.bind(n),i.dispatchEvent=n.dispatchEvent.bind(n),e.logger.enabled===!0&&(i.getModule=function(){return e})},s.prototype.addEventListener=function(){},s.prototype.dispatchEvent=function(){},s.prototype.removeEventListener=function(){},i(l,puremvc.Proxy),l.NAME="ModuleProxy",l.prototype.defaults=null,l.prototype.config=null,l.prototype.initializeNotifier=function(e){l.__super__.initializeNotifier.call(this,e),this.createData()},l.prototype.createData=function(){null!=this.config&&this.setData(this.config)},l.prototype.getData=function(){return this.data},l.prototype.setData=function(e){var t,i,n,o,a;n={},a=this.defaults;for(i in a)t=a[i],o=i in e?e[i]:t,n[i]=o;return this.data=n,e},d.prototype.getModules=function(){return[]},d.prototype.getAPI=function(){return{}},i(c,puremvc.SimpleCommand),c.prototype.execute=function(){var e,t;e=this.facade.retrieveProxy(li.NAME),t=e.getActiveState()===wo.ACTIVE?wo.INACTIVE:wo.ACTIVE,this.sendNotification(vo.CHANGE_ACTIVE_STATE,t)
},i(u,puremvc.SimpleCommand),u.prototype.execute=function(){var e,t;e=this.facade.retrieveProxy(li.NAME),t=e.getDisplayState()===Po.FULL_SCREEN?Po.NORMAL:Po.FULL_SCREEN,this.sendNotification(vo.CHANGE_DISPLAY_STATE,t)};var _o={PERSISTENT:"persistent",NONE:"none"};i(p,puremvc.SimpleCommand),p.interval=null,p.prototype.execute=function(e){var t,i,n,o,a,r=this;a=e.getBody(),n=this.facade.retrieveProxy(di.NAME),t=n.getCore(),null!=t&&t.webkitSupportsFullscreen&&(o=this.facade.retrieveProxy(li.NAME),o.setDisplayState(a),i={},null!=t.webkitRequestFullScreen?(i.enter=function(){return t.webkitRequestFullScreen()},i.exit=function(){return document.webkitCancelFullScreen()},i.event="onwebkitfullscreenchange",i.element="webkitFullscreenElement"):null!=t.requestFullscreen?(i.enter=function(){return t.requestFullscreen()},i.exit=function(){return document.cancelFullscreen()},i.event="onfullscreenchange",i.element="fullscreenElement"):null!=t.mozRequestFullScreen?(i.enter=function(){return t.mozRequestFullscreen()},i.exit=function(){return document.mozCancelFullScreen()},i.event="onmozfullscreenchange",i.element="mozFullscreenElement"):null!=t.webkitEnterFullscreen&&(i.enter=function(){return t.webkitEnterFullscreen()},i.exit=function(){return t.webkitExitFullscreen()},i.event=null),a===Po.FULL_SCREEN?(i.enter(),null!=i.event?t[i.event]=function(){return null==document[i.element]?r.sendNotification(vo.CHANGE_DISPLAY_STATE,Po.NORMAL):void 0}:(clearInterval(p.interval),p.interval=setInterval(function(){return t.webkitDisplayingFullscreen!==!0?(r.sendNotification(vo.CHANGE_DISPLAY_STATE,Po.NORMAL),clearInterval(p.interval)):void 0},100))):a===Po.NORMAL&&(i.exit(),t[i.event]=null,clearInterval(p.interval)),this.sendNotification(vo.DISPATCH_EVENT,new fi("fullscreenchange",a===Po.FULL_SCREEN)))},i(h,puremvc.SimpleCommand),h.prototype.execute=function(e){var t,i,n,o,a,r=this;this.facade.logger.debug("ChangePlaybackCoreCommand"),a=this.facade.retrieveProxy(di.NAME),n=this.facade.retrieveProxy(ui.NAME),t=e.getBody(),o=this.facade.getVideo(),this.facade.setVideo(t),null!=o&&ci.clear(o),i=[],i.push(ci.create(t,"timeupdate",function(e){return r.sendNotification(vo.TIME_UPDATE,e.target.currentTime)})),i.push(ci.create(t,"durationchange",function(e){r.facade.logger.debug("Playback core: durationchange: "+e.target.duration),/Android 4/.test(navigator.userAgent)&&-1!==e.target.src.indexOf(".m3u8")||r.sendNotification(vo.CHANGE_DURATION,e.target.duration)})),i.push(ci.create(t,"playing",function(){r.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.PLAYING),r.sendNotification(vo.PLAYING)})),i.push(ci.create(t,"play",function(){})),i.push(ci.create(t,"pause",function(e){e.target.readyState>0&&r.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.PAUSED)})),i.push(ci.create(t,vo.LOADED_DATA,function(){r.sendNotification(vo.LOADED_DATA)})),i.push(ci.create(t,"waiting",function(){r.sendNotification(vo.WAITING)})),i.push(ci.create(t,"seeked",function(){r.sendNotification(vo.SEEKING)})),i.push(ci.create(t,"seeked",function(){r.sendNotification(vo.SEEKED)})),i.push(ci.create(t,"ended",function(){r.sendNotification(vo.ENDED)})),i.push(ci.create(t,"progress",function(e){var t,i;try{i=e.target,t=i.buffered,r.sendNotification(vo.PROGRESS,t.end(t.length-1)/i.duration)}catch(n){}})),i.push(ci.create(t,"error",function(e){r.sendNotification(vo.ERROR,e.target.error)})),i.push(ci.create(t,vo.LOAD_START,function(){r.sendNotification(vo.LOAD_START)})),i.push(ci.create(t,"canplay",function(){r.sendNotification(vo.CAN_PLAY)})),i.push(ci.create(t,"canplaythrough",function(){r.sendNotification(vo.CAN_PLAY_THROUGH),r.sendNotification(vo.PROGRESS,n.getDuration())})),i.push(ci.create(t,"loadedmetadata",function(e){r.sendNotification(vo.ENABLE_FULL_SCREEN),r.sendNotification(vo.LOADED_METADATA),/Android 4/.test(navigator.userAgent)&&-1!==e.target.src.indexOf(".m3u8")||r.sendNotification(vo.CHANGE_DURATION,t.duration)})),this.sendNotification(vo.DISABLE_FULL_SCREEN),a.setVideo(t),a.setHandlers(i)},i(g,puremvc.SimpleCommand),g.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(zt.NAME),t.setAutoplay(e.getBody())},i(f,puremvc.SimpleCommand),f.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(zt.NAME),t.setLoop(e.getBody())},i(m,puremvc.SimpleCommand),m.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(di.NAME),t.setVolume(e.getBody()),t=this.facade.retrieveProxy(Yt.NAME),t.setVolume(e.getBody())},i(y,puremvc.SimpleCommand),y.prototype.execute=function(e){var t,i,n,o;o=e.getBody(),n=this.facade.retrieveProxy(di.NAME),i=this.facade.retrieveProxy(ui.NAME),0===o&&i.getType()===Ei.mimeTypes.m3u8&&(o=.25),0===n.core.readyState?(t=function(){return n.core.removeEventListener("loadedmetadata",t,!1),n.setCurrentTime(o)},n.core.addEventListener("loadedmetadata",t,!1)):n.setCurrentTime(o),this.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.WAITING)},i(v,puremvc.SimpleCommand),v.prototype.execute=function(){var e,t;e=this.facade.retrieveProxy(di.NAME),t=e.getSrc(),-1===t.indexOf(".m3u8")&&this.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.PLAYING),e.getPaused()&&this.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.PAUSED)},i(_,puremvc.SimpleCommand),_.prototype.execute=function(){var e;e=this.facade.retrieveProxy(di.NAME),e.setCurrentTime(.25),this.sendNotification(vo.PLAY)},i(E,puremvc.SimpleCommand),E.prototype.execute=function(e){var t,i;return this.facade.logger.debug("EndCommand",e),i=e.getBody(),t=this.facade.retrieveProxy(di.NAME),t.pause(),t.getCurrentTime()!==t.getDuration()?t.setCurrentTime(t.getDuration()):void 0},i(A,puremvc.SimpleCommand),A.prototype.execute=function(){var e;this.facade.logger.debug("StartedCommand"),e=this.facade.retrieveProxy(di.NAME),e.setStarted(!0)},i(C,puremvc.SimpleCommand),C.prototype.execute=function(){var e;this.facade.logger.debug("WaitingCommand"),e=this.facade.retrieveProxy(li.NAME),e.getPlayState()!==PlayState.LOADING&&this.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.WAITING)},i(b,puremvc.SimpleCommand),b.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(di.NAME),t.setMuted(e.getBody())},i(P,puremvc.SimpleCommand),P.prototype.execute=function(e){var t,i;this.facade.logger.debug("CheckAuthorizationCommand"),i=this.facade.retrieveProxy(wt.NAME),t=e.getBody(),i.setMedia(t),i.getAuthorized()===!1?this.sendNotification(So.AUTHORIZE,t):this.sendNotification(vo.MEDIA_CHANGE,t)},i(T,puremvc.SimpleCommand),T.prototype.execute=function(){var e,t,i;this.facade.logger.debug("AuthorizedCommand"),e=this.facade.retrieveProxy(ui.NAME),e.authorized=!0,t=this.facade.retrieveProxy(wt.NAME),i=t.createURL(e.getSrc()),e.setSrc(i),this.sendNotification(vo.MEDIA_CHANGE,e.getData())},i(N,puremvc.SimpleCommand),N.prototype.execute=function(){var e;this.facade.logger.debug("InitializedCommand"),e=this.facade.retrieveProxy(di.NAME),e.initialized=!0},i(S,puremvc.SimpleCommand),S.prototype.execute=function(){var e;this.facade.logger.debug("LoadedMetadataCommand"),e=this.facade.retrieveProxy(di.NAME),e.loadedMetadata=!0},i(w,puremvc.SimpleCommand),w.prototype.execute=function(e){var t,i,o,a,r,s,l;for(this.facade.logger.debug("DisableVideoEventsCommand",e.getBody()),t=e.getBody(),a=this.facade.retrieveProxy(di.NAME),o=a.getHandlers(),r=0,s=o.length;s>r;r++)i=o[r],l=i.type,n.call(t,l)>=0&&i.unbind()},i(I,puremvc.SimpleCommand),I.prototype.execute=function(e){var t,i,o,a,r,s,l;for(this.facade.logger.debug("EnableVideoEventsCommand",e.getBody()),t=e.getBody(),a=this.facade.retrieveProxy(di.NAME),o=a.getHandlers(),r=0,s=o.length;s>r;r++)i=o[r],l=i.type,n.call(t,l)>=0&&i.bind()},i(x,puremvc.Mediator),x.prototype.config=null,x.prototype.cssPrefix=null,x.prototype.initializeNotifier=function(e){var t;x.__super__.initializeNotifier.call(this,e),t=this.facade.app||this.facade,this.config=t.retrieveProxy(l.NAME),this.classList={prefix:this.cssPrefix,element:this.viewComponent,contains:function(e,t){var i,n;return null==t&&(t=this.element),i=this.prefix+e,null!=(null!=(n=t.classList)?n.contains:void 0)?t.classList.contains(i):-1!==t.className.indexOf(i)},add:function(e,t){var i,n;null==t&&(t=this.element),i=this.prefix+e,null!=(null!=(n=t.classList)?n.add:void 0)?t.classList.add(i):this.contains(e)||(""!==t.className?t.className+=" "+i:t.className=i)},remove:function(e,t){var i,n,o;null==t&&(t=this.element),i=this.prefix+e,null!=(null!=(o=t.classList)?o.remove:void 0)?t.classList.remove(i):this.contains(e)&&(n=new RegExp(" ?"+i),t.className=t.className.replace(n,""))}}},i(M,x),M.NAME="LocalizedMediator",M.prototype.localizationManager=null,M.prototype.initializeNotifier=function(e){var t;return M.__super__.initializeNotifier.call(this,e),t=this.facade.app||this.facade,this.localizationManager=t.retrieveProxy($t.NAME)},i(L,M),L.NAME="OverlayMediator",L.prototype.onRegister=function(){L.__super__.onRegister.call(this),this.sendNotification(vo.ADD_OVERLAY,this.viewComponent)},i(D,L),D.NAME="EndSlateMediator",D.prototype.onRegister=function(){null!=this.config.getEndSlate()&&(this.classList.add("end-slate"),D.__super__.onRegister.call(this))},D.prototype.listNotificationInterests=function(){return[vo.MEDIA_CHANGE]},D.prototype.handleNotification=function(e){var t,i,n;switch(e.getName()){case vo.MEDIA_CHANGE:i=e.getBody(),t=this.config.getEndSlate(),this.viewComponent.innerHTML="",null!=t&&(n=t.usePoster===!0?i.poster:t.url,null!=n&&""!==n&&(this.viewComponent.innerHTML='<img src="'+n+'" class="end-slate-image" />'))}},i(k,L),k.NAME="WaitingOverlayMediator",k.prototype.bar=null,k.prototype.onRegister=function(){var e;this.classList.add("waiting-overlay"),this.bar=document.createElement("div"),this.classList.add("waiting-bar",this.bar),this.viewComponent.appendChild(this.bar),e=document.createElement("div"),this.classList.add("waiting-text",e),e.textContent=this.localizationManager.getString(V.MSG_BUFFERING),this.viewComponent.appendChild(e),k.__super__.onRegister.call(this)},i(R,L),R.NAME="LoadingOverlayMediator",R.prototype.onRegister=function(){return this.classList.add("loading-overlay"),R.__super__.onRegister.call(this)},V.MSG_LIVE="MSG_LIVE",V.MSG_REPLAY="MSG_REPLAY",V.MSG_BUFFERING="MSG_BUFFERING_TEXT",V.MSG_CC="MSG_CC",i(O,L),O.NAME="ReplayOverlayMediator",O.prototype.replay=null,O.prototype.icon=null,O.prototype.label=null,O.prototype.onRegister=function(){var e=this;this.classList.add("replay-overlay"),this.replay=document.createElement("div"),this.classList.add("replay-button",this.replay),this.viewComponent.appendChild(this.replay),ci.create(this.replay,ci.CLICK,function(t){return t.stopImmediatePropagation(),e.sendNotification(vo.REPLAY),!1}),this.icon=document.createElement("span"),this.classList.add("replay-icon",this.icon),this.replay.appendChild(this.icon),this.label=document.createElement("span"),this.classList.add("replay-label",this.label),this.label.textContent=this.localizationManager.getString(V.MSG_REPLAY),this.replay.appendChild(this.label),O.__super__.onRegister.call(this)},i(U,puremvc.SimpleCommand),U.prototype.execute=function(e){var t,i,n;t=this.facade.retrieveProxy(zt.NAME),n=t.getControls().mode!==_o.PERSISTENT?e.getBody():wo.ACTIVE,i=this.facade.retrieveProxy(li.NAME),i.setActiveState(n)},i(H,l),H.NAME=l.NAME,H.prototype.tokens=null,H.prototype.value=null,H.prototype.key=null,H.prototype.onRegister=function(){var e;return e=this.facade.app||this.facade,this.tokens=e.retrieveProxy(Xt.NAME),this.tokens.add(this.key||this.facade.key,this)},H.prototype.setData=function(e){var t,i,n,o;i={},o=this.defaults;for(t in o)n=o[t],i[t]=t in e?e[t]:n;return this.data.parse(i),this.data},H.prototype.getValue=function(e){var t;return this.tokens.update(),this.value[e]=null!=(t=this.data.data[e])?t.compile(this.tokens.context):void 0,this.value[e]},H.prototype.compile=function(e,t){null==t&&(t=!1),this.value=this.data.compile(e,t)};var Eo={BREAK_START:"adbreakstart",BREAK_END:"adbreakend",AD_CONTAINER_CREATED:"adcontainercreated",AD_LOADED:"adloaded",AD_STARTED:"adstarted",AD_TIME_UPDATE:"adtimeupdate",AD_TIME_REMAINING:"adtimeremaining",AD_DURATION_CHANGE:"addurationchange",AD_ENDED:"adended",AD_ERROR:"aderror",AD_PLAY:"adplay",AD_PAUSE:"adpause",AD_COMPANION:"adcompanion"};i(B,puremvc.SimpleCommand),B.prototype.ads=null,B.prototype.initializeNotifier=function(e){B.__super__.initializeNotifier.call(this,e),this.ads=this.facade.retrieveProxy(l.NAME)},i(G,B),G.prototype.execute=function(){this.facade.logger.debug("AdContentEndedCommand"),this.ads.contentEnded()},i(F,puremvc.MacroCommand),F.prototype.ads=null,F.prototype.initializeNotifier=function(e){F.__super__.initializeNotifier.call(this,e),this.ads=this.facade.retrieveProxy(Q.NAME)},F.prototype.initializeMacroCommand=function(){this.addSubCommand(bt)},F.prototype.execute=function(e){var t;F.__super__.execute.call(this,e),this.facade.logger.debug("AdStartCommand"),t=this.facade.app.retrieveProxy(di.NAME),t.initialized===!1&&this.facade.app.sendNotification(vo.INITIALIZED),this.facade.app.video.load(),this.ads.start(),this.facade.app.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.PLAYING)},i(z,B),z.prototype.execute=function(){return this.facade.logger.debug("AdPlayCommand"),this.ads.getStarted()===!1?void this.sendNotification(vo.START,!0):(this.ads.play(),void this.facade.app.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.PLAYING))},i(j,B),j.prototype.execute=function(){this.facade.logger.debug("AdPauseCommand"),this.ads.pause(),this.facade.app.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.PAUSED)},i(q,B),q.prototype.execute=function(){var e;this.facade.logger.debug("AdTogglePlayPauseCommand"),e=this.ads.getPaused()||this.ads.getStarted()===!1?vo.PLAY:vo.PAUSE,this.sendNotification(e,!0)},i(W,puremvc.SimpleCommand),W.prototype.execute=function(e){var t;this.facade.logger.debug("EndedCommand",e),t=this.facade.retrieveProxy(zt.NAME),t.getLoop()===!0?this.sendNotification(vo.REPLAY):(this.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.ENDED),this.sendNotification(vo.CHANGE_ACTIVE_STATE,wo.ACTIVE))},i(Y,puremvc.SimpleCommand),Y.prototype.execute=function(e){var t,i;this.facade.logger.debug("StartCommand"),i=this.facade.retrieveProxy(di.NAME),t=this.facade.retrieveProxy(ui.NAME),t.getSrc()!==i.getSrc()&&this.sendNotification(vo.UPDATE_PLAYBACK_CORE),this.sendNotification(vo.STARTED,e.getBody()),this.sendNotification(vo.PLAY,e.getBody()),this.sendNotification(vo.CHANGE_ACTIVE_STATE,wo.INACTIVE)},i($,puremvc.MacroCommand),$.prototype.initializeMacroCommand=function(){this.addSubCommand(bt)},$.prototype.execute=function(e){var t,i,n;this.facade.logger.debug("PlayCommand"),$.__super__.execute.call(this,e),n=e.getBody(),t=this.facade.retrieveProxy(ui.NAME),i=this.facade.retrieveProxy(di.NAME),n&&i.initialized!==!0&&this.sendNotification(vo.INITIALIZED),i.initialized===!0&&(t.getSrc()||t.getSource())&&(i.getStarted()?i.play():this.sendNotification(vo.START))},i(K,puremvc.SimpleCommand),K.prototype.execute=function(){var e;e=this.facade.retrieveProxy(di.NAME),e.pause()},i(X,puremvc.SimpleCommand),X.prototype.execute=function(){var e,t,i;switch(this.facade.logger.debug("TogglePlayPauseCommand"),e=this.facade.retrieveProxy(li.NAME),i=this.facade.retrieveProxy(di.NAME),e.getPlayState()){case PlayState.ENDED:t=vo.REPLAY;break;case PlayState.PAUSED:t=i.getStarted()?vo.PLAY:vo.START;break;case PlayState.READY:t=vo.START;break;case PlayState.PLAYING:case PlayState.WAITING:t=vo.PAUSE}this.sendNotification(t,!0)},i(Z,B),Z.prototype.execute=function(){this.facade.logger.debug("AdContentStartedCommand"),this.ads.contentStarted()},i(J,H),J.NAME=l.NAME,J.prototype.enabled=!0,J.prototype.loaded=!1,J.prototype.plugin=null,J.prototype.load=function(e){var t,i=this;t=this.getScript(),null!=t?Ei.loadAMPScript(t,function(){i.loaded=!0,"function"==typeof e&&e(!0)}):(this.loaded=!1,"function"==typeof e&&e(!1))},J.prototype.getLoaded=function(){return this.loaded},J.prototype.getScript=function(){var e,t,i;return null!=(e=this.getData())?null!=(t=e.value)?null!=(i=t.plugin)?i.js:void 0:void 0:void 0},J.prototype.setEnabled=function(e){return this.enabled=e,e},J.prototype.getEnabled=function(){return this.enabled},J.prototype.createPlugin=function(){},J.prototype.initialize=function(){this.plugin=this.createPlugin()},J.prototype.error=function(e){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",e)},i(Q,J),Q.NAME=l.NAME,Q.prototype.inprogress=!1,Q.prototype.paused=!1,Q.prototype.started=!1,Q.prototype.companions=null,Q.prototype.loadedMetadata=!1,Q.prototype.setLoadedMetadata=function(e){return this.loadedMetadata=e,e},Q.prototype.getLoadedMetadata=function(){return this.loadedmetadata},Q.prototype.setCompanions=function(e){return this.companions=e,this.sendNotification(Eo.AD_COMPANION,this.companions),e},Q.prototype.getCompanions=function(){return this.companions},Q.prototype.getInProgress=function(){return this.inprogress},Q.prototype.setInProgress=function(e){return this.inprogress=e},Q.prototype.getStarted=function(){return this.started},Q.prototype.setStarted=function(e){return this.started=e,e},Q.prototype.getPaused=function(){return this.paused},Q.prototype.setPaused=function(e){return this.paused=e,e},Q.prototype.play=function(){this.setPaused(!1),this.sendNotification(Eo.AD_PLAY)},Q.prototype.pause=function(){this.setPaused(!0),this.sendNotification(Eo.AD_PAUSE)},Q.prototype.breakStart=function(){},Q.prototype.breakEnd=function(){this.setInProgress(!1),this.reset()},Q.prototype.error=function(e){var t;t=("function"==typeof e.getMessage?e.getMessage():void 0)||e.message,this.facade.logger.error("[AMP AD ERROR]",""+t+" Skipping ad content.",e),this.sendNotification(Eo.AD_ERROR,e),this.sendNotification(Eo.BREAK_END)},Q.prototype.engage=function(){this.getEnabled()!==!1&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.app.sendNotification(vo.REMOVE_APPLICATION_STATE,"ad-mode")),this.facade.app.removeCommand(vo.START),this.facade.app.removeCommand(vo.PLAY),this.facade.app.removeCommand(vo.PAUSE),this.facade.app.removeCommand(vo.ENDED),this.facade.app.removeCommand(vo.TOGGLE_PLAY_PAUSE),this.facade.removeCommand(vo.STARTED),this.facade.removeCommand(vo.ENDED),this.facade.registerCommand(vo.START,F),this.facade.registerCommand(vo.PLAY,z),this.facade.registerCommand(vo.PAUSE,j),this.facade.registerCommand(vo.TOGGLE_PLAY_PAUSE,q))},Q.prototype.reset=function(){this.facade.removeCommand(vo.START),this.facade.removeCommand(vo.PLAY),this.facade.removeCommand(vo.PAUSE),this.facade.removeCommand(vo.TOGGLE_PLAY_PAUSE),this.facade.app.registerCommand(vo.START,Y),this.facade.app.registerCommand(vo.PLAY,$),this.facade.app.registerCommand(vo.PAUSE,K),this.facade.app.registerCommand(vo.ENDED,W),this.facade.app.registerCommand(vo.TOGGLE_PLAY_PAUSE,X),this.facade.registerCommand(vo.STARTED,Z),this.facade.registerCommand(vo.ENDED,G)},Q.prototype.start=function(){return this.getEnabled()===!1?(this.sendNotification(Eo.BREAK_END),!1):(this.setStarted(!0),!0)},Q.prototype.contentPlay=function(){this.facade.app.sendNotification(vo.PLAY,!0)},Q.prototype.contentPause=function(){this.facade.app.video.pause()},Q.prototype.contentStarted=function(){},Q.prototype.contentEnded=function(){},i(et,s),et.prototype.getContainer=function(){},et.prototype.getVideo=function(){},et.prototype.getConfig=function(){},et.prototype.evaluateBinding=function(){},et.prototype.canPlayType=function(){},et.prototype.load=function(){},et.prototype.play=function(){},et.prototype.replay=function(){},et.prototype.pause=function(){},et.prototype.end=function(){},et.prototype.setParams=function(){},et.prototype.getParams=function(){},et.prototype.setAutoplay=function(){},et.prototype.getAutoplay=function(){},et.prototype.setLoop=function(){},et.prototype.getLoop=function(){},et.prototype.setMuted=function(){},et.prototype.getMuted=function(){},et.prototype.mute=function(){return this.setMuted(!0)},et.prototype.unmute=function(){return this.setMuted(!1)},et.prototype.setMedia=function(){},et.prototype.getMedia=function(){},et.prototype.setCurrentTime=function(){},et.prototype.getCurrentTime=function(){},et.prototype.getDuration=function(){},et.prototype.setSrc=function(){},et.prototype.getSrc=function(){},et.prototype.setSource=function(){},et.prototype.getSource=function(){},et.prototype.setVolume=function(){},et.prototype.getVolume=function(){},et.prototype.getSeeking=function(){},et.prototype.getPaused=function(){},et.prototype.getEnded=function(){},et.prototype.enterFullScreen=function(){},et.prototype.exitFullScreen=function(){},et.prototype.destroy=function(){},i(tt,et),i(it,r),it.prototype.moduleName="amp",it.prototype.playerType=null,it.prototype.dispatcher=null,it.prototype.config=null,it.prototype.video=null,it.prototype.getVideo=function(){return this.video},it.prototype.setVideo=function(e){return this.video=e,e},it.prototype.getPlayerType=function(){return this.playerType},it.prototype.createPlugins=function(){var e,t,i,n,o,a,r,s;o=[],a=this.getPlayerType(),s=ki.plugins;for(i in s)if(r=s[i],i in this.config&&(t=this.config[i],null!=t&&t.enabled!==!1))if(e=r[a],null!=e)try{n=new e(this,t),o.push(n)}catch(l){this.logger.error("Plugin could not be created: "+i);continue}else this.logger.debug("Plugin could not be found: "+i);return this.sendNotification(Io.REGISTER_PLUGINS,o),o},it.prototype.createVideo=function(){return null},it.prototype.initialize=function(){it.__super__.initialize.call(this),this.video=this.createVideo(),this.createPlugins()},it.prototype.listNotificationEvents=function(){return it.__super__.listNotificationEvents.call(this).concat([vo.LOAD_START,vo.TIME_UPDATE,vo.DURATION_CHANGE,vo.ERROR,vo.LOADED_METADATA,vo.WAITING,vo.SEEKING,vo.SEEKED,vo.ENDED,vo.PROGRESS,vo.CAN_PLAY,vo.CAN_PLAY_THROUGH,vo.PAUSE,vo.PLAY,vo.PLAYING,vo.STARTED,vo.PLAY_REQUEST,vo.READY,vo.MEDIUM_CHANGE,vo.TEMPORAL_TYPE_CHANGE,vo.MEDIA_CHANGE,vo.FULL_SCREEN_CHANGE,vo.VOLUME_CHANGE,So.AUTHORIZE,So.AUTHORIZED])},i(nt,it),nt.prototype.playerType="html",nt.prototype.createAPI=function(){return new tt(this,this.dispatcher)},nt.prototype.createVideo=function(){var e;return e=document.createElement("video"),e.preload="none",e.autoplay=!1,null==e.dataset&&(e.dataset={}),this.sendNotification(vo.CHANGE_PLAYBACK_CORE,e),e},nt.prototype.createModel=function(){var e,t;t=new Xt,this.registerProxy(t),this.registerProxy(new wt),this.registerProxy(new zt(this.config)),this.registerProxy(new $t(this.config)),e=new li,this.registerProxy(e),e.setRenderMode(To.HTML),this.registerProxy(new di),this.registerProxy(new ui),this.registerProxy(new Yt),this.registerProxy(new ai(this.config.params)),t.initialize()},nt.prototype.createView=function(){var e,t,i=this;e=this.getViewComponent(),this.registerMediator(new lt(e,"html5")),this.registerMediator(new qt),this.registerMediator(new Wt),this.registerMediator(new Ht),t=new St,this.registerMediator(t),ci.create(t.viewComponent,ci.CLICK,function(){return i.sendNotification(vo.TOGGLE_ACTIVE)}),this.registerMediator(new R),this.registerMediator(new k),this.registerMediator(new O),this.registerMediator(new D),this.registerMediator(new Gt),this.registerMediator(new Bt)},nt.prototype.createController=function(){this.registerCommand(vo.TOGGLE_PLAY_PAUSE,X),this.registerCommand(vo.PLAY,$),this.registerCommand(vo.PAUSE,K),this.registerCommand(vo.CHANGE_PLAY_STATE,It),this.registerCommand(vo.TOGGLE_FULL_SCREEN,u),this.registerCommand(vo.CHANGE_DISPLAY_STATE,p),this.registerCommand(vo.TOGGLE_ACTIVE,c),this.registerCommand(vo.CHANGE_ACTIVE_STATE,U),this.registerCommand(vo.CHANGE_MEDIA,Ut),this.registerCommand(vo.MEDIA_CHANGE,xt),this.registerCommand(vo.SET_MEDIA,Ot),this.registerCommand(vo.UPDATE_TOKEN_CONTEXT,Rt),this.registerCommand(vo.CHANGE_PLAYBACK_CORE,h),this.registerCommand(vo.UPDATE_PLAYBACK_CORE,Mt),this.registerCommand(vo.START,Y),this.registerCommand(vo.STARTED,A),this.registerCommand(vo.SEEK,y),this.registerCommand(vo.SEEKED,v),this.registerCommand(vo.CHANGE_VOLUME,m),this.registerCommand(vo.CHANGE_MUTED,b),this.registerCommand(vo.CHANGE_AUTOPLAY,g),this.registerCommand(vo.CHANGE_LOOP,f),this.registerCommand(vo.END,E),this.registerCommand(vo.ENDED,W),this.registerCommand(vo.REPLAY,_),this.registerCommand(vo.ERROR,Dt),this.registerCommand(vo.READY,kt),this.registerCommand(vo.WAITING,C),this.registerCommand(vo.CHANGE_DURATION,Lt),this.registerCommand(vo.CHANGE_PARAMS,Vt),this.registerCommand(So.CHECK_AUTHORIZATION,P),this.registerCommand(So.AUTHORIZED,T),this.registerCommand(So.SET_KEY,rt),this.registerCommand(So.SET_TOKEN,at),this.registerCommand(vo.INITIALIZED,N),this.registerCommand(vo.LOADED_METADATA,S),this.registerCommand(vo.ENABLE_VIDEO_EVENTS,I),this.registerCommand(vo.DISABLE_VIDEO_EVENTS,w)},ot.createTextContent=function(e,t){var i;return i=/[\&<>]/.test(t)?e.createCDATASection(t):e.createTextNode(t)},ot.updateTextContent=function(e,t){var i;return i=ot.createTextContent(e.ownerDocument,t),e.removeChild(e.childNodes[0]),e.appendChild(i),e},ot.serialize=function(e){var t;if(null!=e){if("string"==typeof e)return e;try{return t=new XMLSerializer,t.serializeToString(e)}catch(i){try{return t=document.implementation.createLSSerializer(),xmlSerializer.writeToString(e)}catch(n){try{return e.xml}catch(o){}}}}},ot.parse=function(e){var t,i;return window.DOMParser?(t=new DOMParser,i=t.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(e)),i};var Ao={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",PLAYER_ERROR:"mediaPlayerError",MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",BUFFERING:"mediaPlayerBuffering",DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",INITIALIZED:"mediaPlayerInitialized",FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",AUTO_ADVANCE:"mediaPlayerAutoAdvance",CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",FEED_LOADED:"mediaPlayerFeedLoaded"};i(at,puremvc.SimpleCommand),at.prototype.execute=function(e){var t,i;t=this.facade.retrieveProxy(wt.NAME),i=e.getBody(),t.setToken(i),t.setAuthorized(!0)},i(rt,puremvc.SimpleCommand),rt.prototype.execute=function(e){var t,i;i=this.facade.retrieveProxy(wt.NAME),t=e.getBody(),i.setKey(t)},i(st,puremvc.Mediator),st.prototype.config=null,st.NAME="LocalizationWrapper",st.prototype.listNotificationInterests=function(){return[Ao.CREATE_FLASH_VARS,Ao.CREATE_XML]},st.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f;switch(st.__super__.handleNotification.call(this,e),c=e.getName(),i=e.getBody(),c){case Ao.CREATE_FLASH_VARS:a=i.flashvars,n=i.config,null!=n.language&&(a.locale_setting=n.language);break;case Ao.CREATE_XML:g=i.xml,t=g.getElementsByTagName("application")[0],d=g.getElementsByTagName("locales")[0],null==d&&(d=g.createElement("locales"),t.appendChild(d)),f=this.config.locales;for(s in f){l=f[s],o=g.createElement("locale"),o.setAttribute("id",s),d.appendChild(o);for(r in l)h=l[r],u=g.createElement("property"),u.setAttribute("key",r),p=ot.createTextContent(g,h),u.appendChild(p),o.appendChild(u)}}},i(lt,x),lt.NAME="PlayerMediator",lt.prototype.core=null,lt.prototype.medium=null,lt.prototype.layers=null,lt.prototype.type=null,lt.prototype.ready=!1,lt.prototype.classList=null,lt.prototype.onRegister=function(){var e;return lt.__super__.onRegister.call(this),this.classList.add("player"),this.classList.add(this.type),e=Ei.getDevice(),null!=e?this.classList.add(e):void 0},lt.prototype.listNotificationInterests=function(){return[vo.DISPLAY_STATE_CHANGE,vo.ACTIVE_STATE_CHANGE,vo.PLAY_STATE_CHANGE,vo.ADD_APPLICATION_STATE,vo.REMOVE_APPLICATION_STATE,vo.MEDIUM_CHANGE,vo.DURATION_CHANGE,vo.TEMPORAL_TYPE_CHANGE,vo.ADD_LAYER,vo.REMOVE_LAYER,vo.READY]},lt.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c;switch(n=e.getName(),t=e.getBody(),n){case vo.ACTIVE_STATE_CHANGE:case vo.PLAY_STATE_CHANGE:case vo.DISPLAY_STATE_CHANGE:case vo.MEDIUM_CHANGE:s=t,o=s.newState,a=s.oldState,null!=a&&this.classList.contains(a)&&this.classList.remove(a),null!=o&&this.classList.add(o);break;case vo.ADD_APPLICATION_STATE:r=t,this.classList.add(r);break;case vo.REMOVE_APPLICATION_STATE:r=t,this.classList.remove(r);break;case vo.TEMPORAL_TYPE_CHANGE:"live"===t?this.sendNotification(vo.ADD_APPLICATION_STATE,"live"):this.sendNotification(vo.REMOVE_APPLICATION_STATE,"live");break;case vo.DURATION_CHANGE:t>3600?this.sendNotification(vo.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(vo.REMOVE_APPLICATION_STATE,"long-form");break;case vo.ADD_LAYER:this.addLayer(t);break;case vo.REMOVE_LAYER:this.removeLayer(t);break;case vo.READY:for(this.ready=!0,c=this.layers,l=0,d=c.length;d>l;l++)i=c[l],this.viewComponent.contains(i)||this.viewComponent.appendChild(i)}},lt.prototype.addLayer=function(e){this.layers.push(e),this.ready&&this.viewComponent.appendChild(e)},lt.prototype.removeLayer=function(e){var t;this.viewComponent.contains(e)&&this.viewComponent.removeChild(e),t=this.layers.indexOf(e),t>=0&&this.layers.splice(t,1)},i(dt,lt),dt.NAME="FlashPlayerMediator",dt.prototype.type="flash",dt.prototype.addLayer=function(e){dt.__super__.addLayer.call(this,e),-1===e.className.indexOf("video-layer")||this.viewComponent.contains(e)||this.viewComponent.appendChild(e)};var Co={SET_DIMENSIONS:"mediaanalytics:setDimensions"},bo={START_AUTHENTICATION:"startAuthentication",AUTHENTICATED:"aisauthenticated",AUTHENTICATING:"aisathenticating",AUTHENTICATION_COMPLETE:"authenticationComplete",CHOOSE_AUTH_PROVIDER:"chooseAuthProvider",CHOOSE_PLAY_OPTIONS:"choosePlayOptions",LAUNCH_IDP_LOGIN:"launchIDPLogin"};i(ct,puremvc.SimpleCommand),ct.prototype.getProxy=function(){return this.facade.retrieveProxy(ft.NAME)},i(ut,ct),ut.prototype.execute=function(){var e;this.facade.logger.debug("AISPauseCommand"),e=this.getProxy(),e.vcsSet(e.currentTime)},i(pt,ct),pt.prototype.execute=function(){this.facade.logger.debug("AISEndedCommand"),this.getProxy().vcsSet(0)},ht.setCookie=function(e,t,i,n,o){var a;return t=escape(t),null!=i&&(a=new Date,a.setDate(a.getDate()+i),t+="; expires="+a.toUTCString()),null!=o&&(t+="; domain="+o),null!=n&&(t+="; path="+n),document.cookie=e+"="+t},ht.getCookie=function(e){var t,i,n,o,a,r,s;for(i=document.cookie.split(";"),r=0,s=i.length;s>r;r++)if(t=i[r],n=t.indexOf("="),o=t.substr(0,n).replace(/^\s+|\s+$/g,""),a=unescape(t.substr(n+1)),o===e)return a},ht.deleteCookie=function(e){return this.setCookie(e,"",-1)},i(gt,ct),gt.prototype.execute=function(e){var t,i;i=this.getProxy(),t=Math.floor(e.getBody()),0!==t&&t%30===0&&t!==i.currentTime&&i.vcsSet(t),i.currentTime=t},i(ft,J),ft.NAME=l.NAME,ft.prototype.client=null,ft.prototype.currentTime=null,ft.prototype.idps=null,ft.prototype.idp=null,ft.prototype.token=null,ft.prototype.authz=null,ft.prototype.defaults={plugin:null,platformID:null,resourceID:null,contentID:null,responseTargets:null,logos:{base:null,group:null,key:"full"}},ft.prototype.getScript=function(){return this.value.plugin},ft.prototype.initialize=function(){this.client=window.ais_client,this.client.setLogging(this.facade.logger.enabled),this.client.setPlatformId(this.value.platformID),this.client.setUseCache(!/MSIE [7-8]/.test(navigator.userAgent)),this.client.assignhandler("bounce",this.bounceHandler.bind(this)),this.client.assignhandler("chooser",this.chooserHandler.bind(this)),this.client.assignhandler("init",this.initHandler.bind(this)),this.client.assignhandler("authz_query",this.authz_queryHandler.bind(this)),this.client.assignhandler("identity",this.identityHandler.bind(this)),this.client.assignhandler("logout_result",this.logoutHandler.bind(this)),this.client.assignhandler("vcs",this.vcsHandler.bind(this)),window.onunload=function(){}
},ft.prototype.authorize=function(){this.authz=null,this.token=null,this.disengage(),this.sendNotification(bo.START_AUTHENTICATION)},ft.prototype.authorized=function(e){null==e&&(e=this.token),this.engage(),this.sendNotification(bo.AUTHENTICATION_COMPLETE),this.sendNotification(So.AUTHORIZED,e)},ft.prototype.play=function(e){return this.sendNotification(vo.INITIALIZED),this.sendNotification(vo.PLAY),null!=e?this.sendNotification(vo.SEEK,e):void 0},ft.prototype.engage=function(){this.facade.registerCommand(vo.TIME_UPDATE,gt),this.facade.registerCommand(vo.PAUSE,ut),this.facade.registerCommand(vo.ENDED,pt)},ft.prototype.disengage=function(){this.facade.removeCommand(vo.TIME_UPDATE),this.facade.removeCommand(vo.PAUSE),this.facade.removeCommand(vo.ENDED)},ft.prototype.logout=function(){var e,t,i,n,o;switch(t=(null!=(o=this.idp.window_display)?o.method:void 0)||"redirect",i=this.getTarget(t),this.setRedirect(t),t){case"redirect":window.open(this.client.logoutFormat(i),"_top");break;case"popup":n=this.idp.window_display.width||320,e=this.idp.window_display.height||240,window.open(this.client.logoutFormat(i),"ais_popup","width="+n+",height="+e)}},ft.prototype.bounce=function(){this.client.bounce()},ft.prototype.init=function(){this.client.init()},ft.prototype.choose=function(){this.client.chooser()},ft.prototype.resourceAccess=function(e){null==e&&(e=this.value.resourceID),this.client.resourceAccess(e)},ft.prototype.vcsSet=function(e){return e=Ei.formatTimecode(e),this.client.vcsSet(this.value.contentID,e)},ft.prototype.bounceHandler=function(e,t){var i;i="true"===t.authenticated.toString(),i===!1?(this.sendNotification(vo.DISPATCH_EVENT,new fi("authenticationfailed")),this.choose()):i===!0&&this.init()},ft.prototype.initHandler=function(e,t){var i,n,o,a,r;this.facade.logger.debug(e,t),this.idp=t.idps,this.facade.idps={},r=t.idps;for(i in r){o=r[i],this.facade.idps.key=i;for(n in o)a=o[n],this.facade.idps[n]=a;break}for(i in t)o=t[i],"idps"!==i&&null!=o&&(this.facade[i]=o);this.facade.idps.logo=this.value.logos.base+this.facade.idps.logos[this.value.logos.key],this.facade.app.sendNotification(vo.REMOVE_APPLICATION_STATE,"authenticating"),this.sendNotification(bo.AUTHENTICATED,this.facade.idps),this.resourceAccess(this.value.resourceID)},ft.prototype.chooserHandler=function(e,t){this.facade.logger.debug(e,t.authenticated),this.facade.sendNotification(vo.ADD_APPLICATION_STATE,"authenticating"),t.possible_idps=this.idps=this.sort(t.possible_idps,"value","display_name"),this.sendNotification(bo.CHOOSE_AUTH_PROVIDER,t)},ft.prototype.launchIDPLogin=function(e){var t,i,n,o,a,r;switch(this.sendNotification(bo.AUTHENTICATING,!0),i=this.idps[e],n=(null!=(r=i.window_display)?r.method:void 0)||"redirect",o=this.getTarget(n),this.setRedirect(n),n){case"redirect":window.open(this.client.loginFormat(e,o),"_top");break;case"popup":n=i.window_display.method||"popup",a=i.window_display.width||320,t=i.window_display.height||240,window.open(this.client.loginFormat(e,o),"ais_popup","width="+a+",height="+t)}},ft.prototype.identityHandler=function(e,t){var i;this.facade.logger.debug(e,t),i=t.identity.attributes.aisuid},ft.prototype.authz_queryHandler=function(e,t){var i,n,o;this.facade.logger.debug(e,t),i="true"===t.authorization.toString(),i===!1?(this.sendNotification(So.AUTHORIZATION_FAILED),this.authorize()):i===!0&&(this.authz=t,n={mvpdName:this.facade.idps.name,viewerId:this.client.aisuid,"std:viewerId":this.client.aisuid},this.facade.app.sendNotification(Co.SET_DIMENSIONS,n),this.facade.viewerId=this.client.aisuid,o=t.resource,null!=o&&(this.facade.resource=o),this.token="hdnea="+t.security_token,this.sendNotification(So.SET_KEY,"hdnea="),this.sendNotification(So.SET_TOKEN,t.security_token),this.sendNotification(bo.AUTHENTICATING,!1),null!=this.value.contentID?this.client.vcsGet(this.value.contentID):this.authorized(this.token))},ft.prototype.logoutHandler=function(){top.location.href=top.location.href},ft.prototype.vcsHandler=function(e,t){"get"===t.operation&&("00:00:00"===t.ph_pos||"00:00"===t.ph_pos?(this.client.vcsSet(this.value.contentID,t.ph_pos),this.authorized(this.token)):this.sendNotification(bo.CHOOSE_PLAY_OPTIONS,Ei.flattenTimecode(t.ph_pos)))},ft.prototype.sort=function(e,t,i){var n,o,a,r,s,l,d,c;s={},n=[],o=0;for(r in e)l=e[r],n[o]={key:r,value:l[i]},o++;for(n.sort(function(e,i){var n,o;return n="value"===t?e.value.toLowerCase():e.key.toLowercase(),o="value"===t?i.value.toLowerCase():i.key.toLowercase(),o>n?-1:n>o?1:0}),o=d=0,c=n.length;c>d;o=++d)a=n[o],s[a.key]=e[a.key];return s},ft.prototype.setRedirect=function(e){var t,i,n;try{t=/\/dev\./,n=window.top.location.href||window.top.location,i=t.test(n)?n.replace(t,"/"):null,ht.setCookie(this.getTarget(e),n,1,"/",i)}catch(o){}},ft.prototype.getTarget=function(e){return null==e&&(e="redirect"),this.value.responseTargets[e]},i(mt,puremvc.Proxy),mt.NAME="FlashMediaProxy",mt.prototype.getSrc=function(){return this.data.src},mt.prototype.setSrc=function(e){return this.data.src=e,e},i(yt,puremvc.SimpleCommand),yt.prototype.execute=function(){var e,t,i;this.facade.logger.debug("FlashAuthorizedCommand"),e=this.facade.retrieveProxy(mt.NAME),t=this.facade.retrieveProxy(wt.NAME),i=e.getSrc()||"",-1===i.indexOf(".smil")&&(i=t.createURL(i)),e.setSrc(i),this.facade.video.authenticationComplete({media:e.getData()})},i(vt,et),vt.prototype.getConfigXMLString=function(){},vt.prototype.getConfigXML=function(){},vt.prototype.getFlashVars=function(){},i(_t,it),_t.prototype.playerType="flash",_t.prototype.flashObjectID="flashObject",_t.prototype.playState=null,_t.prototype.loaded=!1,_t.prototype.flashvars=null,_t.prototype.seeking=!1,_t.prototype.paused=!1,_t.prototype.ended=!1,_t.prototype.media=null,_t.prototype.muted=!1,_t.prototype.autoplay=!1,_t.prototype.plugins=null,_t.prototype.debug=!1,_t.prototype.createAPI=function(){return new vt(this,this.dispatcher)},_t.prototype.createModel=function(){this.registerProxy(new Xt),this.registerProxy(new wt),this.registerProxy(new mt)},_t.prototype.createView=function(){this.registerMediator(new dt(this.getViewComponent())),this.registerMediator(new Wt),this.registerMediator(new St),this.registerMediator(new st(this.config))},_t.prototype.createController=function(){this.registerCommand(So.AUTHORIZED,yt),this.registerCommand(So.SET_TOKEN,at),this.registerCommand(So.SET_KEY,rt)},_t.prototype.createVideo=function(){var e;return e=document.createElement("div"),e.id=e.name=this.flashObjectID,this.sendNotification(vo.PLAYBACK_CORE_CHANGE,e),e},_t.prototype.createParams=function(e){var t;return t={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"},null!=e.params&&(null!=e.params.allowFullScreen&&(t.allowFullScreen=e.params.allowFullScreen),null!=e.params.allowScriptAccess&&(t.allowScriptAccess=e.params.allowScriptAccess),null!=e.params.wmode&&(t.wmode=e.params.wmode),null!=e.params.bgColor&&(t.bgColor=e.params.bgColor)),"direct"===t.wmode&&/MSIE/.test(navigator.userAgent)&&(t.wmode="transparent"),t},_t.prototype.getModules=function(){return this.plugins},_t.prototype.createPlugins=function(){var e,t,i,n;n=ki.plugins;for(t in n)if(i=n[t],t in this.config&&this.config[t].enabled!==!1)if(e=i[this.getPlayerType()],null!=e)try{this.plugins[t]=new e(this,this.config[t]),this.registerMediator(this.plugins[t]),this.logger.debug("Plugin loaded: "+t)}catch(o){this.logger.error("Plugin could not be loaded: "+t);continue}else this.logger.debug("Plugin could not be found: "+t)},_t.prototype.createAttributes=function(e){var t;return t={id:this.flashObjectID,name:this.flashObjectID},null!=e.attributes&&(null!=e.attributes.id&&(t.id=e.attributes.id),null!=e.attributes.name&&(t.name=e.attributes.name)),t},_t.prototype.createFlashVars=function(e){var t,i,n,o,a,r;if(t={},null!=this.config.autoplay&&(this.setAutoplay(this.config.autoplay),t.auto_play=this.config.autoplay),null!=this.config.rules&&Ei.mergeRules(this.config.rules),t.hinting_rules=escape(JSON.stringify(Ei.rules)),null!=this.config.media&&(null!=this.config.media.src&&(this.setSrc(this.config.media.src),t.video_url=escape(this.config.media.src)),null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),t.medium=this.config.media.medium),null!=this.config.media.source&&this.config.media.source.length>0&&(this.setSource(this.config.media.source),t.video_url=escape(this.media.src)),null!=this.config.media.title&&(t.title=escape(this.config.media.title)),null!=this.config.media.poster&&(t.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&(t.temporalType=this.config.media.temporalType)),"audio"===this.getMedium()&&(t.controls=!0,t.auto_hide=-1),null!=(null!=(o=this.config.ima)?null!=(a=o.overlay)?a.delay:void 0:void 0)&&(t.overlay_ad_delay=this.config.ima.overlay.delay),null!=this.config.volume&&(t.volume=Ei.clamp(this.config.volume,0,1)),null!=this.config.target&&(t.external_target=this.config.target),null!=this.config.name&&(t.core_player_name=this.config.name),null!=this.config.domain&&(t.embed_domain=t.domain=this.config.domain),t.auto_replay=this.config.loop===!0,null!=this.config.ticker&&this.config.ticker.enabled!==!1&&(null!=this.config.ticker.url&&(t.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&(t.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(t.ticker_speed=this.config.ticker.speed)),null!=this.config.fullscreen&&(t.fullscreen_enabled=this.config.fullscreen.enabled!==!1),null!=this.config.params&&(t.params=escape(JSON.stringify(this.config.params))),null!=this.config.version&&(t.context_menu_label=this.config.version),t.show_play_button_overlay=!1,t.auto_play_list=!1,t.next_video_timer=0,null==t.context_menu_mode&&(t.context_menu_mode=this.debug===!0?"long":"short"),this.sendNotification(Ao.CREATE_FLASH_VARS,{flashvars:t,config:this.config}),null!=e.vars){r=e.vars;for(i in r)n=r[i],t[i]=n}return t},_t.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c,u,p;if(l=ot.parse(e.flash.xml),this.sendNotification(Ao.CREATE_XML,{config:e,xml:l}),o=l.getElementsByTagName("plugin"),a=e.flash["static"],(null!=a?a.enabled:void 0)===!0&&null!=a.plugins)for(d=0,u=o.length;u>d;d++)n=o[d],null!=(i=a.plugins[n.getAttribute("id")])&&(n.setAttribute("type","static"),ot.updateTextContent(n,i));else if(this.debug===!0)for(c=0,p=o.length;p>c;c++)n=o[c],"AkamaiAdvancedStreamingPlugin"===n.getAttribute("id")&&(s=n.textContent||n.text,ot.updateTextContent(n,s.replace("AkamaiAdvancedStreamingPlugin.swf","AkamaiAdvancedStreamingPlugin-logging.swf")));return r=ot.serialize(l),t=r.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||r,t=t.replace(/[\n\r\t]/g,""),escape(t)},_t.prototype.createdHandler=function(e){var t=this;this.video=e.ref,this.video.className="video",this.video.eventHandler=function(e,i){return t.eventHandler(e,i)},this.sendNotification(Ao.FLASH_CREATED),null!=this.getMedium()&&this.setMedium(this.media.medium)},_t.prototype.eventHandler=function(e,t){var i,n,o;try{switch(e!==Ao.TIME_UPDATE&&e!==Ao.AD_PLAYBACK_PROGRESS&&e!==Ao.AD_TIME_ELAPSED&&e!==Ao.CAPTION_DATA_CHANGE&&this.logger.log(e,t),e){case Ao.INITIALIZED:o=n="ready";break;case Ao.RESET:n="ready";break;case Ao.LOADING:o="loadstart";break;case Ao.PLAYER_ERROR:o=n="error";break;case Ao.MEDIA_ERROR:o=n="error";break;case Ao.ERROR_STREAM_NOT_FOUND:o=n="error";break;case Ao.CAPABILITY_CHANGE:i=t.type,"canPlayChange"===i&&t.enabled===!0?(o="canplay",this.loaded=!0):"canSeekChange"===i&&t.enabled===!0?o="canplaythrough":"temporalChange"===i&&t.enabled===!0&&(o="loadedmetadata");break;case Ao.PLAYBACK_OPEN:o="started";break;case Ao.PLAYING:o=n="playing",this.ended=!1,this.paused=!1;break;case Ao.PLAY_REQUEST:o="playrequest";break;case Ao.STATE_CHANGE:"playing"===t.state&&"playing"!==this.playState&&"waiting"!==this.playState&&(o="play");break;case Ao.ENDED:o=n="ended",this.ended=!0;break;case Ao.PAUSED:o="pause",n="paused",this.paused=!0;break;case Ao.BUFFERING:"ended"!==this.className&&(o=n="waiting");break;case Ao.DURATION_CHANGE:isNaN(t.time)||(o="durationchange",t=t.time);break;case Ao.VOLUME_CHANGE:o="volumechange";break;case Ao.TIME_UPDATE:o="timeupdate";break;case Ao.SEEKING_CHANGE:o=t.seeking?"seeking":"seeked",this.seeking=t.seeking;break;case Ao.FULLSCREEN_CHANGE:o="fullscreenchange",t="fullScreen"===t.displayState;break;case Ao.ERROR:this.logger.error(t),o=n="error"}null==o&&(o=e),this.sendNotification(o,t),null!=n&&this.setPlayState(n)}catch(a){this.logger.error("Flash Event Error:",a)}},_t.prototype.setPlayState=function(e){var t;if(e!==this.playState)return t={newState:e,oldState:this.playState},this.playState=e,this.sendNotification(vo.PLAY_STATE_CHANGE,t),e},_t.prototype.setMedia=function(e){return e!==this.media?(this.media=e,null!=this.playState&&this.setPlayState("ready"),null!=e.src&&this.setSrc(e.src),null!=e.source&&e.source.length>0&&this.setSource(e.source),this.sendNotification(vo.MEDIA_CHANGE,e),this.loaded=!0,null==e.autoplay&&(e.autoplay=this.autoplay),this.video.loadURL(this.media.src,e),e):void 0},_t.prototype.getMedia=function(){return this.media},_t.prototype.load=function(){this.loaded=!0,this.video.loadURL(this.media.src)},_t.prototype.play=function(){return this.loaded?void this.video.unpause():void this.load()},_t.prototype.setMuted=function(e){this.muted=e;try{e===!0?this.video.mute():this.video.unmute()}catch(t){this.logger.error(t)}return e},_t.prototype.getMuted=function(){return this.muted},_t.prototype.getSrc=function(){return this.video.getURL()},_t.prototype.setSrc=function(e){return this.media.src=e,this.loaded=!1,this.setMedium(Ei.getMimeType(e)),e},_t.prototype.setAutoplay=function(e){return this.autoplay=e,e},_t.prototype.getAutoplay=function(){return this.autoplay},_t.prototype.getMedium=function(){return this.media.medium},_t.prototype.setMedium=function(e){var t,i;if(e!==this.media.medium)return null!=this.media.medium&&null!=this.media.medium&&(i="medium-"+this.media.medium),t=this.media.medium=/audio/.test(e)?"audio":"video",this.sendNotification(vo.MEDIUM_CHANGE,{newState:"medium-"+t,oldState:i}),e},_t.prototype.setSource=function(e){var t,i=this;if(!(null==e||e.length<1)){if(this.media.source=e,this.loaded=!1,t=Ei.selectSource(e,function(e){return i.canPlayType(e)}),null==(null!=t?t.src:void 0)||""===t.src)throw new Error("No valid source could be found");return this.setSrc(t.src),"undefined"!=typeof type&&null!==type&&this.setMedium(type),e}},_t.prototype.getSource=function(){return this.media.source},_t.prototype.getSeeking=function(){return this.seeking},_t.prototype.getPaused=function(){return this.paused},_t.prototype.getEnded=function(){return this.ended},_t.prototype.getFlashXML=function(){return ot.parse(this.getConfigXMLString())},_t.prototype.getFlashVars=function(){return this.flashvars},_t.prototype.evaluateBinding=function(e){return this.video.evaluateBinding(e)},_t.prototype.canPlayType=function(e){return n.call(Ei.flashTypes,e)>=0?"maybe":""},_t.prototype.replay=function(){this.video.replay()},_t.prototype.pause=function(){this.video.pause()},_t.prototype.end=function(){this.video.stopPlayer()},_t.prototype.getCurrentTime=function(){return this.video.getCurrentTime()},_t.prototype.setCurrentTime=function(e){return this.video.jumpToTime(e),e},_t.prototype.getParams=function(){return this.video.getParams()},_t.prototype.setParams=function(e){return this.video.setParams(e),e},_t.prototype.getVolume=function(){return this.video.getVolume()},_t.prototype.setVolume=function(e){return this.video.setVolume(e),e},_t.prototype.getDuration=function(){return this.video.getDuration()},_t.prototype.exitFullScreen=function(){this.video.exitFullScreen()},i(Et,puremvc.Mediator),Et.NAME="ModuleDispatcher",Et.prototype.dispatcher=null,Et.prototype.api=null,Et.prototype.onRegister=function(){var e,t=this;e=this.dispatcher.dispatchEvent,this.dispatcher.dispatchEvent=function(i){t.log(t.getMessage(i),i),e(i)}},Et.prototype.listNotificationInterests=function(){return[vo.DISPATCH_EVENT].concat(this.facade.listNotificationEvents())},Et.prototype.handleNotification=function(e){var t,i;i=e.getName(),t=e.getBody(),this.dispatcher.dispatchEvent(i===vo.DISPATCH_EVENT?t:new fi(this.getType(i),t))},Et.prototype.getType=function(e){return e.replace(new RegExp("^"+this.facade.getModuleName()),"")},Et.prototype.getMessage=function(){return"["+this.facade.getModuleName().toUpperCase()+" EVENT]"},Et.prototype.log=function(e,t){null!=e&&null!=t&&this.facade.logger.log(e,t.type,t.data)},i(At,puremvc.Mediator),At.prototype.module=null,At.prototype.mediator=null,At.prototype.initializeNotifier=function(e){var t,i=this;At.__super__.initializeNotifier.call(this,e),t=this.module.listNotificationPublications(),null!=t&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=function(){return t},this.mediator.handleNotification=function(e){i.facade.sendNotification(e.getName(),e.getBody(),e.getType())})},At.prototype.onRegister=function(){null!=this.mediator&&this.module.registerMediator(this.mediator)},At.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMeditator(this.mediator)},At.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()},At.prototype.handleNotification=function(e){this.module.sendNotification(e.getName(),e.getBody(),e.getType())},Ct.enabled=!1,Ct.enable=function(e){return null==e&&(e=/debug\=true/.test(location.search.toLowerCase())),this.enabled=e,this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){}),e},Ct.log=function(){try{console.log.apply(console,arguments)}catch(e){}},Ct.trace=function(){try{console.trace.apply(console,arguments)}catch(e){}},Ct.debug=function(){try{console.log.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}},Ct.info=function(){try{console.info.apply(console,arguments)}catch(e){}},Ct.warn=function(){try{console.warn.apply(console,arguments)}catch(e){}},Ct.error=function(){try{console.error.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}},Ct.fatal=function(){try{console.fatal.apply(console,arguments)}catch(e){}},PlayState={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",SEEKING:"seeking",ERROR:"error"};var Po={NORMAL:"normal",FULL_SCREEN:"full-screen"},To={FLASH:"flash",HTML:"html"};i(bt,puremvc.SimpleCommand),bt.prototype.execute=function(){this.sendNotification(vo.PLAY_REQUEST)},i(Pt,Et),Pt.NAME="PlayerDispatcher",Pt.prototype.getMessage=function(e){return"timeupdate"!==e.type&&"progress"!==e.type?Pt.__super__.getMessage.call(this,e):void 0},i(Tt,Et),Tt.NAME="PluginDispatcher",Tt.prototype.getMessage=function(e){return Tt.__super__.getMessage.call(this,e).replace("[","["+this.facade.app.getModuleName().toUpperCase()+" ")};var No={PREFIX:"akamai-"};i(Nt,M),Nt.NAME="LayerMediator",Nt.prototype.onRegister=function(){Nt.__super__.onRegister.call(this),this.sendNotification(vo.ADD_LAYER,this.viewComponent)},i(St,Nt),St.NAME="OverlayLayerMediator",St.prototype.onRegister=function(){St.__super__.onRegister.call(this),this.classList.add("overlays-layer")},St.prototype.listNotificationInterests=function(){return[vo.ADD_OVERLAY,vo.REMOVE_OVERLAY]},St.prototype.handleNotification=function(e){var t,i;switch(t=e.getName(),i=e.getBody(),t){case vo.ADD_OVERLAY:this.viewComponent.appendChild(i);break;case vo.REMOVE_OVERLAY:this.viewComponent.removeChild(i)}};var So={CHECK_AUTHORIZATION:"checkAuthorization",AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",SET_TOKEN:"settoken",SET_KEY:"setkey"};i(wt,puremvc.Proxy),wt.NAME="SecurityProxy",wt.prototype.setupHDN1=function(){var e=this;return window.retrieveToken=function(t,i){var n;return e.facade.logger.debug("HDN1: Token Requested",t,i),n=e.getToken(),null!=n?e.facade.video.tokenRetrievalSuccess("&primaryToken="+n):e.sendNotification(So.AUTHORIZE),!0}},wt.prototype.getKey=function(){return this.data.key},wt.prototype.setKey=function(e){return this.data.key=e,e},wt.prototype.getToken=function(){return this.data.token},wt.prototype.setToken=function(e){return this.data.token=e,e},wt.prototype.getSecret=function(){var e;return null==this.data.token?null:(e="",null!=this.data.key&&(e+=this.data.key),e+=this.data.token)},wt.prototype.createURL=function(e){var t;return t=this.getSecret(),null!=t&&(e+=/\?/.test(e)?"&":"?",e+=t),e},wt.prototype.getAuthorized=function(){return this.data.authorized},wt.prototype.setAuthorized=function(e){return this.data.authorized=e,e},wt.prototype.getProvider=function(){return this.data.provider},wt.prototype.setProvider=function(e){return this.data.provider=e,e},i(It,puremvc.SimpleCommand),It.prototype.execute=function(e){var t,i;t=this.facade.retrieveProxy(li.NAME),i=e.getBody(),t.setPlayState(i)},i(xt,puremvc.SimpleCommand),xt.prototype.execute=function(e){var t,i,n,o;this.facade.logger.debug("MediaChangeCommand",e.getBody()),n=e.getBody(),this.sendNotification(vo.UPDATE_PLAYBACK_CORE,!1),o=this.facade.retrieveProxy(di.NAME),i=this.facade.retrieveProxy(zt.NAME),t=o.initialized&&(i.getAutoplay()||n.autoplay),t===!0&&this.sendNotification(vo.START)},i(Mt,puremvc.SimpleCommand),Mt.prototype.execute=function(e){var t,i,n,o,a;this.facade.logger.debug("UpdatePlaybackCoreCommand"),i=this.facade.retrieveProxy(ui.NAME),n=this.facade.retrieveProxy(di.NAME),a=this.facade.retrieveProxy(Yt.NAME),n.setVolume(a.getVolume()),o=i.getSrc(),null!=o&&""!==o&&"undefined"!==o&&(n.setSrc(o),t=null!=e.getBody()?e.getBody():!0,t===!0&&n.load())},i(Lt,puremvc.SimpleCommand),Lt.prototype.execute=function(e){var t,i;this.facade.logger.debug("ChangeDurationCommand",e.getBody()),t=e.getBody(),i=this.facade.retrieveProxy(ui.NAME),i.getDuration()!==t&&i.setDuration(t)},i(Dt,puremvc.SimpleCommand),Dt.prototype.execute=function(e){var t,i;i=this.facade.retrieveProxy(di.NAME),t=i.getCore(),ci.clear(t),this.facade.logger.error("[AMP ERROR]",e.getBody()),this.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.ERROR)},i(kt,puremvc.SimpleCommand),kt.prototype.execute=function(){var e,t;this.facade.logger.debug("ReadyCommand"),this.sendNotification(vo.CHANGE_DISPLAY_STATE,Po.NORMAL),this.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.READY),this.sendNotification(vo.CHANGE_ACTIVE_STATE,wo.ACTIVE),e=null!=(t=this.facade.config)?t.media:void 0,null!=e&&this.sendNotification(vo.SET_MEDIA,e)},i(Rt,puremvc.SimpleCommand),Rt.prototype.execute=function(e){var t;this.facade.logger.debug("UpdateTokenContextCommand"),t=this.facade.retrieveProxy(Xt.NAME),t.compile(e.getBody())},i(Vt,puremvc.SimpleCommand),Vt.prototype.execute=function(e){var t,i;this.facade.logger.debug("ChangeParamsCommand",e.getBody()),t=e.getBody(),i=this.facade.retrieveProxy(ai.NAME),i.setData(t),this.sendNotification(vo.UPDATE_TOKEN_CONTEXT,!0)},i(Ot,puremvc.SimpleCommand),Ot.prototype.execute=function(e){var t,i;t=e.getBody(),this.facade.logger.debug("SetMediaCommand",t),this.sendNotification(vo.CHANGE_MEDIA,t),i=this.facade.retrieveProxy(ui.NAME),t=i.getData(),i.authorized===!0&&this.sendNotification(vo.MEDIA_CHANGE,t)},i(Ut,puremvc.SimpleCommand),Ut.prototype.execute=function(e){var t,i;this.facade.logger.debug("ChangeMediaCommand",e.getBody()),t=e.getBody(),i=this.facade.retrieveProxy(ui.NAME),this.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.READY),this.sendNotification(vo.CHANGE_ACTIVE_STATE,wo.ACTIVE),i.setData(t),this.sendNotification(vo.UPDATE_TOKEN_CONTEXT),this.sendNotification(So.AUTHORIZE)},i(Ht,Nt),Ht.NAME="PosterMediator",Ht.prototype.poster=null,Ht.prototype.clickHandler=null,Ht.prototype.onRegister=function(){var e=this;this.classList.add("poster-layer"),this.poster=document.createElement("div"),this.classList.add("poster-content",this.poster),this.viewComponent.appendChild(this.poster),this.clickHandler=ci.create(this.viewComponent,ci.CLICK,function(t){return t.stopImmediatePropagation(),t.preventDefault(),e.sendNotification(vo.TOGGLE_PLAY_PAUSE,!0),!1}),Ht.__super__.onRegister.call(this)},Ht.prototype.listNotificationInterests=function(){return[vo.CHANGE_MEDIA]},Ht.prototype.handleNotification=function(e){var t;switch(e.getName()){case vo.CHANGE_MEDIA:this.poster.innerHTML="",t=e.getBody().poster,null!=t&&""!==t&&(this.poster.innerHTML='<img src="'+t+'" class="'+this.cssPrefix+'poster-image" />')}},i(Bt,Nt),Bt.NAME="ErrorSlateMediator",Bt.prototype.message=null,Bt.prototype.onRegister=function(){return Bt.__super__.onRegister.call(this),this.classList.add("error-layer"),this.message=document.createElement("div"),this.classList.add("error-message",this.message),this.viewComponent.appendChild(this.message)},Bt.prototype.listNotificationInterests=function(){return[vo.ERROR]},Bt.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case vo.ERROR:switch(t=e.getBody(),i="Error: ",t.code){case MediaError.MEDIA_ERR_ABORTED:i+="Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:i+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:i+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:i+="Source not supported.";break;default:i+=t}return this.message.textContent=i}},i(Gt,L),Gt.NAME="TitleBarMediator",Gt.prototype.title=null,Gt.prototype.description=null,Gt.prototype.onRegister=function(){this.classList.add("title-bar"),this.title=document.createElement("div"),this.classList.add("title-text",this.title),this.viewComponent.appendChild(this.title),this.description=document.createElement("div"),this.classList.add("description-text",this.description),this.viewComponent.appendChild(this.description),Gt.__super__.onRegister.call(this)},Gt.prototype.listNotificationInterests=function(){return[vo.CHANGE_MEDIA]},Gt.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case vo.CHANGE_MEDIA:return t=e.getBody(),i=t.title,null==i||""===i||"undefined"===i?this.classList.add("hidden"):(this.title.innerHTML=i,null!=t.duration&&(this.title.innerHTML+=" - "+Ei.formatTimecode(t.duration)),this.description.innerHTML=t.description?t.description:"",this.classList.remove("hidden"))}},i(Ft,s),Ft.prototype.getConfig=function(){},i(zt,l),zt.NAME=l.NAME,zt.prototype.defaults={name:null,autoplay:!1,loop:!1,controls:{},fullscreen:null,target:"_blank",domain:null,endslate:null},zt.prototype.setData=function(e){return null!=e.rules&&Ei.mergeRules(e.rules),zt.__super__.setData.call(this,e)},zt.prototype.getAutoplay=function(){return this.data.autoplay},zt.prototype.setAutoplay=function(e){return this.data.autoplay=e},zt.prototype.getLoop=function(){return this.data.loop},zt.prototype.setLoop=function(e){return this.data.loop=e},zt.prototype.getEndSlate=function(){return this.data.endslate},zt.prototype.setEndSlate=function(e){return this.data.endslate=e},zt.prototype.getDomain=function(){return this.data.domain},zt.prototype.setDomain=function(e){return this.data.domain=e},zt.prototype.getTarget=function(){return this.data.target},zt.prototype.setTarget=function(e){return this.data.target=e},zt.prototype.getNative=function(){return this.data["native"]},zt.prototype.setNative=function(e){return this.data["native"]=e},zt.prototype.getName=function(){return this.data.name},zt.prototype.setName=function(e){return this.data.name=e},zt.prototype.getControls=function(){return this.data.controls},zt.prototype.setControls=function(e){return this.data.controls=e},zt.prototype.getFullscreen=function(){return this.data.fullscreen},zt.prototype.setFullscreen=function(e){return this.data.fullscreen=e},i(jt,r),jt.NAME="Plugin",jt.prototype.app=null,jt.prototype.initialize=function(){this.createModel(),this.createController()},jt.prototype.createAPI=function(){return new Ft(this)},jt.prototype.onRegister=function(){var e;e=this.retrieveProxy(J.NAME),null==(null!=e?e.getLoaded:void 0)||e.getLoaded()?this.registered():e.load(this.registered.bind(this))},jt.prototype.registered=function(){var e;this.createView(),this.sendNotification(Io.PLUGIN_REGISTERED,this),null!=(e=this.retrieveProxy(J.NAME))&&"function"==typeof e.initialize&&e.initialize()},jt.prototype.listNotificationPublications=function(){var e,t,i;return t=[vo.ADD_LAYER,vo.REMOVE_LAYER,vo.ADD_OVERLAY,vo.REMOVE_OVERLAY,vo.ADD_APPLICATION_STATE,vo.REMOVE_APPLICATION_STATE],t.concat(function(){var t;t=[];for(e in Io)i=Io[e],t.push(i);return t}())},i(qt,puremvc.Mediator),qt.NAME="PluginAdapter",qt.prototype.plugins=null,qt.prototype.registered=null,qt.prototype.onRegister=function(){return qt.__super__.onRegister.call(this)},qt.prototype.listNotificationInterests=function(){return[Io.REGISTER_PLUGINS,Io.PLUGIN_REGISTERED]},qt.prototype.handleNotification=function(e){var t,i,n,o,a,r;switch(i=e.getName(),t=e.getBody(),i){case Io.REGISTER_PLUGINS:for(this.plugins=t,r=this.plugins,o=0,a=r.length;a>o;o++)n=r[o],this.facade.registerModule(n);break;case Io.PLUGIN_REGISTERED:this.registered.push(t),this.facade.logger.debug("Plugin Registered: "+t.constructor.NAME),this.registered.length===this.plugins.length&&this.sendNotification(vo.READY,this.facade.config)}},i(Wt,Nt),Wt.NAME="VideoMediator",Wt.prototype.video=null,Wt.prototype.onRegister=function(){this.classList.add("video-layer"),Wt.__super__.onRegister.call(this)},Wt.prototype.listNotificationInterests=function(){return[vo.PLAYBACK_CORE_CHANGE]},Wt.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case vo.PLAYBACK_CORE_CHANGE:null!=this.video&&this.viewComponent.removeChild(this.video),this.video=t,this.classList.add("video",this.video),this.viewComponent.appendChild(this.video)}},i(Yt,puremvc.Proxy),Yt.NAME="UserSettingsProxy",Yt.prototype.getVolume=function(){return localStorage.getItem(No.PREFIX+"volume")||1},Yt.prototype.setVolume=function(e){return localStorage.setItem(No.PREFIX+"volume",e)},i($t,puremvc.Proxy),$t.NAME="LocalizationProxy",$t.prototype.data={language:navigator.language,locales:{en:{MSG_LIVE:"LIVE",MSG_REPLAY:"Replay",MSG_BUFFERING:"buffering...",MSG_CC:"CC",MSG_CLOSE:"close",MSG_EN:"English",MSG_ES:"Spanish",MSG_DE:"German",MSG_FR:"French",MSG_IT:"Italian",MSG_RU:"Russian"}}},$t.prototype.locale=null,$t.prototype.getLanguage=function(){return this.data.language},$t.prototype.setLanguage=function(e){return this.data.language=e,this.setLocale(e),this.sendNotification(vo.LANGUAGE_CHANGED,e),e},$t.prototype.setLocale=function(e){return this.locale=this.data.locales[e],null==this.locale&&(this.locale=this.data.locales[e.substring(0,2)]),e},$t.prototype.getLocales=function(){return this.data.locales},$t.prototype.setLocales=function(e){return this.data.locales=e,e},$t.prototype.getString=function(e){var t;return t=this.locale||this.data.locales.en,t[e]||""},$t.prototype.getLanguageString=function(e){var t,i;return"string"!=typeof e||null==e||""===e?"":(t="MSG_"+e.toUpperCase(),i=this.getString(t),""===i&&(e=e.split("-").shift(),t="MSG_"+e.toUpperCase(),i=this.getString(t)),i)},Kt.prototype.data=null,Kt.prototype.value=null,Kt.prototype.source=null,Kt.prototype.parse=function(){},Kt.prototype.compile=function(e,t){null==e&&(e={}),null==t&&(t=!1)},i(Xt,puremvc.Proxy),Xt.NAME="TokenizationProxy",Xt.prototype.context=null,Xt.prototype.add=function(e,t){return this.data[e]=t,t.compile(this.context,!0)},Xt.prototype.initialize=function(){return this.update()},Xt.prototype.evaluateBinding=function(e){var t;return t=new ii(e),t.compile(this.context),t.value},Xt.prototype.update=function(){var e,t,i,n,o,a,r,s,l;e=this.facade.retrieveProxy(zt.NAME),r=this.facade.retrieveProxy(di.NAME),o=this.facade.retrieveProxy(ui.NAME),n=this.facade.retrieveProxy($t.NAME),a=this.facade.retrieveProxy(ai.NAME),t=this.facade.getViewComponent(),this.context={media:{width:o.getWidth(),height:o.getHeight(),title:o.getTitle(),description:o.getDescription(),src:o.getSrc(),duration:o.getDuration(),guid:o.getGUID(),isLive:o.getIsLive(),metadata:o.getMetadata(),temporalType:o.getTemporalType(),poster:o.getPoster(),category:o.getCategory()},player:{width:t.offsetWidth,height:t.offsetHeight,mode:"html5",autoplay:e.getAutoplay(),domain:e.getDomain(),name:e.getName(),currentTime:r.getCurrentTime(),timecode:{duration:Ei.formatTimecode(o.getDuration()),currentTime:Ei.formatTimecode(r.getCurrentTime())}},l10n:n.locale,now:Date.now()},a.compile(this.context),l=a.value;
for(i in l)s=l[i],this.context[i]=s;return this.context},Xt.prototype.compile=function(e){var t,i,n,o;null==e&&(e=!1),this.update(),t=Ei.clone(this.context),o=this.data;for(i in o)n=o[i],n.compile(t,e)},i(Zt,Kt),Zt.prototype.data=null,Zt.prototype.value=null,Zt.prototype.source=null,Zt.prototype.parse=function(e){var t;return t=e instanceof Array?new Jt(e):e instanceof Object?new ni(e):new ii(e)},i(Jt,Zt),Jt.prototype.parse=function(e){var t,i,n,o;for(this.data=[],t=n=0,o=e.length;o>n;t=++n)i=e[t],this.data[t]=Jt.__super__.parse.call(this,i);return this.data},Jt.prototype.compile=function(e,t){var i,n,o,a,r;for(null==e&&(e={}),null==t&&(t=!1),this.value=[],r=this.data,i=o=0,a=r.length;a>o;i=++o){n=r[i];try{this.value[i]=n.compile(e,t)}catch(s){this.value[i]=null,t||Ct.error(s)}}return this.value},i(Qt,Error),Qt.MESSAGE="Tokenization Error: Could not find token value for: ",i(ei,Zt),ei.prototype.parse=function(e){return this.source=this.data=this.value=e,e},ei.prototype.compile=function(e,t){return null==e&&(e=null),null==t&&(t=!1),this.value},i(ti,Zt),ti.prototype.exec=null,ti.prototype.parse=function(e){return this.source=this.data=e,this.exec=new Function("context","var value; with(context){value = "+this.data+";}return value;"),this.data},ti.prototype.compile=function(e,t){if(null==e&&(e={}),null==t&&(t=!1),null==this.exec)return this.value;try{this.value=this.exec(e)}catch(i){if(this.value=null,!suppressErors)throw new Qt(this.data)}return this.value},i(ii,Zt),ii.prototype.exec=null,ii.prototype.tokenStart=/#{/,ii.prototype.tokenEnd=/}/,ii.prototype.token=null,ii.prototype.parse=function(e){var t,i,n,o,a,r,s,l,d;if(this.source=e,this.data=[],this.token.test(this.source)){for(s=[],n="<<>>",o=null,a=this.source.replace(this.token,function(e,t,i,a){return s.push(t),o=n,i>0&&i<a.length-e.length&&(o+=n),o}),i=a.split(n),r=0,l=0,d=i.length;d>l;l++)t=i[l],""===t&&s[r]?(this.data.push(new ti(s[r])),r++):this.data.push(new ei(t));1===this.data.length&&(this.data=this.data[0])}else this.data=new ei(e);return this.data},ii.prototype.compile=function(e,t){var i,n,o,a;if(null==e&&(e={}),null==t&&(t=!1),null==this.data)return this.value;try{if(this.data instanceof Kt)this.value=this.data.compile(e,t);else for(this.value="",a=this.data,n=0,o=a.length;o>n;n++)i=a[n],this.value+=i.compile(e,t)}catch(r){if(this.value=null,!t)throw new Qt(this.source)}return this.value},i(ni,Zt),ni.prototype.parse=function(e){var t,i;this.source=e,this.data={};for(t in e)i=e[t],this.data[t]=ni.__super__.parse.call(this,i);return this.data},ni.prototype.compile=function(e,t){var i,n,o;null==e&&(e={}),null==t&&(t=!1),this.value={},o=this.data;for(i in o){n=o[i];try{this.value[i]=n.compile(e,t)}catch(a){this.value[i]=null,Ct.error(a)}}return this.value},i(oi,puremvc.Proxy),oi.NAME="PlaybackProxy",oi.prototype.src=null,oi.prototype.canPlayType=function(e){return"external"===e},oi.prototype.getSrc=function(){return this.src},oi.prototype.setSrc=function(e){return(null==e||""===e)&&this.sendNotification(vo.ERROR,"The value of src is not supported: "+e),e!==this.src&&(this.src=e),e},oi.prototype.play=function(){window.open(this.getSrc(),"_blank")},oi.prototype.load=function(){},oi.prototype.setVolume=function(){},i(ai,H),ai.NAME="ParamsProxy",ai.prototype.defaults={},ai.prototype.key="params",ai.prototype.setData=function(e){var t,i,n;i=this.data.source||{};for(t in e)n=e[t],i[t]=e[t];return this.data.parse(i),this.data},i(ri,et),i(si,puremvc.MacroCommand),si.prototype.initializeMacroCommand=function(){return this.addSubCommand(bt)},si.prototype.execute=function(e){var t;this.facade.logger.debug("PlayCommand"),si.__super__.execute.call(this,e),t=this.facade.retrieveProxy(di.NAME),t.play()};var wo={ACTIVE:"active",INACTIVE:"inactive"},Io={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered"};i(li,puremvc.Proxy),li.NAME="ApplicationStateProxy",li.prototype.displayState=null,li.prototype.playState=null,li.prototype.renderMode=null,li.prototype.activeState=null,li.prototype.getDisplayState=function(){return this.displayState},li.prototype.setDisplayState=function(e){var t;e!==t&&(t=this.displayState,this.displayState=e,this.sendNotification(vo.DISPLAY_STATE_CHANGE,{oldState:t,newState:this.displayState}))},li.prototype.getPlayState=function(){return this.playState},li.prototype.setPlayState=function(e){var t;e!==this.playState&&(t=this.playState,this.playState=e,this.sendNotification(vo.PLAY_STATE_CHANGE,{oldState:t,newState:this.playState}))},li.prototype.getRenderMode=function(){return this.renderMode},li.prototype.setRenderMode=function(e){e!==this.renderMode&&(this.renderMode=e)},li.prototype.getMedium=function(){return this.medium},li.prototype.setMedium=function(e){var t;e!==this.medium&&(t=null!=this.medium?"medium-"+this.medium:this.medium,this.medium=e,this.sendNotification(vo.MEDIUM_CHANGE,{oldState:t,newState:"medium-"+this.medium}))},li.prototype.getActiveState=function(){return this.activeState},li.prototype.setActiveState=function(e){var t;e!==this.activeState&&(t=this.activeState,this.activeState=e,this.sendNotification(vo.ACTIVE_STATE_CHANGE,{oldState:t,newState:this.activeState}))},i(di,puremvc.Proxy),di.NAME="PlaybackProxy",di.prototype.core=null,di.prototype.muted=!1,di.prototype.interval=null,di.prototype.readyState=0,di.prototype.started=!1,di.prototype.volume=1,di.prototype.handlers=null,di.prototype.initialized=!1,di.prototype.loadedMetadata=!1,di.prototype.getCore=function(){return this.facade.getVideo()},di.prototype.getStarted=function(){return this.started},di.prototype.setStarted=function(e){return this.started=e,e},di.prototype.getHandlers=function(){return this.handlers},di.prototype.setHandlers=function(e){var t,i,n,o;if(null!=this.handlers)for(o=this.handlers,i=0,n=o.length;n>i;i++)t=o[i],t.clear();return this.handlers=e,e},di.prototype.getVideo=function(){return this.core},di.prototype.setVideo=function(e){return e!==this.core?(this.core=e,this.sendNotification(vo.PLAYBACK_CORE_CHANGE,this.core),this.core):void 0},di.prototype.stateCheck=function(){},di.prototype.canPlayType=function(e){var t;return t=this.core.canPlayType(e)||"",/Android 4\.[1-9]/.test(navigator.userAgent)&&e===Ei.mimeTypes.m3u8&&(t="maybe"),t},di.prototype.getPaused=function(){return this.core.paused},di.prototype.getEnded=function(){return this.core.ended},di.prototype.getSeeking=function(){return this.core.seeking},di.prototype.getCurrentTime=function(){var e;return null!=(e=this.core)?e.currentTime:void 0},di.prototype.setCurrentTime=function(e){return this.core&&e!==this.core.currentTime?this.core.currentTime=Ei.clamp(e,0,this.getDuration()):void 0},di.prototype.getSrc=function(){return this.core.src},di.prototype.setSrc=function(e){return(null==e||""===e)&&this.sendNotification(vo.ERROR,"The value of src is not supported: "+e),e!==this.core.src&&(this.started=!1,this.core.src=e),e},di.prototype.getVolume=function(){return this.core.volume},di.prototype.setVolume=function(e){return e>=0&&1>=e&&e!==this.core.volume&&this.sendNotification(vo.VOLUME_CHANGE,this.core.volume=e),e},di.prototype.getMuted=function(){return this.muted},di.prototype.setMuted=function(e){var t;return this.muted=e,this.muted===!0?(this.volume=this.getVolume(),t=0):t=this.volume,this.sendNotification(vo.CHANGE_VOLUME,t),e},di.prototype.getDuration=function(){var e;return null!=(e=this.core)?e.duration:void 0},di.prototype.play=function(){this.started||(this.started=!0),this.core.play()},di.prototype.pause=function(){this.core.pause()},di.prototype.load=function(){this.core.load()},di.prototype.end=function(){this.core&&(this.core.currentTime=this.core.duration)},ci.PRESS=0,ci.RELEASE=1,ci.MOVE=2,ci.CLICK=3,ci.EVENTS=[ci.PRESS,ci.RELEASE,ci.MOVE,ci.CLICK],ci.MOUSE_EVENTS=["mousedown","mouseup","mousemove","click"],ci.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"],ci.instances=[],ci.create=function(e,t,i){return new ci(e,t,i)},ci.bind=function(e,t){var i,n,o,a,r;for(r=ci.instances,i=o=0,a=r.length;a>o;i=++o)n=r[i],n.target===e&&(null==t||n.type===t)&&n.bind()},ci.unbind=function(e,t){var i,n,o,a,r;for(r=ci.instances,i=o=0,a=r.length;a>o;i=++o)n=r[i],n.target===e&&(null==t||n.type===t)&&n.unbind()},ci.clear=function(e,t){var i,n,o,a,r;for(r=ci.instances,i=o=0,a=r.length;a>o;i=++o)n=r[i],(null!=n?n.target:void 0)===e&&(null==t||n.type===t)&&(n.clear(),ci.instances.splice(i,1))},ci.prototype.types=null,ci.prototype.bind=function(){var e,t,i,n;for(n=this.types,t=0,i=n.length;i>t;t++)e=n[t],null!=this.target.addEventListener?this.target.addEventListener(e,this.trigger,!1):null!=this.target.attachEvent&&this.target.attachEvent("on"+e,this.trigger)},ci.prototype.unbind=function(){var e,t,i,n;for(n=this.types,t=0,i=n.length;i>t;t++)e=n[t],null!=this.target.removeEventListener?this.target.removeEventListener(e,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+e,this.trigger)},ci.prototype.clear=function(){this.unbind(),this.target=null,this.handler=null,this.type=null,this.types=null},ci.prototype.trigger=function(e){this.handler(e)},i(ui,puremvc.Proxy),ui.NAME="MediaProxy",ui.prototype.data=null,ui.prototype.authorized=!0,ui.prototype.getData=function(){return this.data},ui.prototype.setData=function(e){var t;return this.data.autoplay=e.autoplay===!0,this.data.type=e.type,null!=e.source&&this.setSource(e.source),null!=e.src&&this.setSrc(e.src),this.data.title=e.title,this.setDuration(e.duration),this.data.poster=e.poster,this.data.guid=e.guid,this.data.link=e.link,this.data.embed=e.embed,this.data.width=e.width,this.data.height=e.height,this.data.category=e.category,this.data.description=e.description,this.data.status=e.status||{},"blocked"===(null!=(t=this.data.status)?t.state:void 0)&&(this.authorized=!1),this.data.category=e.category,this.data.metadata=e.metadata||{},null!=e.isLive&&this.setIsLive(e.isLive),null!=e.temporalType&&this.setTemporalType(e.temporalType),null!=e.medium&&this.setMedium(e.medium),null!=e.pubDate&&this.setPubDate(e.pubDate),e},ui.prototype.getGUID=function(){return this.data.guid},ui.prototype.setGUID=function(e){return this.data.guid=e},ui.prototype.getLink=function(){return this.data.link},ui.prototype.setLint=function(e){return this.data.link=e},ui.prototype.getEmbed=function(){return this.data.embed},ui.prototype.setEmbed=function(e){return this.data.embed=e},ui.prototype.getAutoplay=function(){return this.data.autoplay},ui.prototype.setAutoplay=function(e){return this.data.autoplay=e},ui.prototype.getPubDate=function(){return this.data.pubDate},ui.prototype.setPubDate=function(e){return this.data.pubDate=e},ui.prototype.getCategory=function(){return this.data.category},ui.prototype.setCategory=function(e){return this.data.category=e},ui.prototype.getSrc=function(){return this.data.src},ui.prototype.setSrc=function(e){return this.data.src=e,null!=this.data.src&&null==this.data.type?this.setType(Ei.getMimeType(this.data.src)):void 0},ui.prototype.getType=function(){return this.data.type},ui.prototype.setType=function(e){var t;return this.data.type=e,t=/audio/.test(this.data.type)?"audio":"video",this.setMedium(t)},ui.prototype.getMedium=function(){return this.data.medium},ui.prototype.setMedium=function(e){return e!==this.data.medium?(this.data.medium=e,this.facade.retrieveProxy(li.NAME).setMedium(e)):void 0},ui.prototype.getMetadata=function(){return this.data.metadata},ui.prototype.setMetadata=function(e){return this.data.metadata=e},ui.prototype.getSource=function(){return this.data.source},ui.prototype.setSource=function(e){var t,i;if(!(null==e||e.length<1)){if(this.data.source=e,i=this.facade.retrieveProxy(di.NAME),t=Ei.selectSource(e,function(e){return i.canPlayType(e)}),null==(null!=t?t.src:void 0)||""===t.src)throw new Error("No valid source could be found");return this.setSrc(t.src),"undefined"!=typeof type&&null!==type?this.setType(type):void 0}},ui.prototype.getTrack=function(){return this.data.track},ui.prototype.setTrack=function(e){return this.data.track=e},ui.prototype.getTitle=function(){return this.data.title},ui.prototype.setTitle=function(e){return this.data.title=e},ui.prototype.getWidth=function(){return this.data.width},ui.prototype.setWidth=function(e){return this.data.width=e},ui.prototype.getHeight=function(){return this.data.height},ui.prototype.setHeight=function(e){return this.data.height=e},ui.prototype.getDescription=function(){return this.data.description},ui.prototype.setDescription=function(e){return this.data.description=e},ui.prototype.getCategory=function(){return this.data.category},ui.prototype.setCategory=function(e){return this.data.category=e},ui.prototype.getDuration=function(){return this.data.duration},ui.prototype.setDuration=function(e){return 0!==e?(e!==this.data.duration&&(this.data.duration=e,this.sendNotification(vo.DURATION_CHANGE,e)),1/0===e?this.setTemporalType("live"):void 0):void 0},ui.prototype.getPoster=function(){return this.data.poster},ui.prototype.setPoster=function(e){return this.data.poster=e},ui.prototype.getIsLive=function(){return this.data.isLive},ui.prototype.setIsLive=function(e){return e!==this.data.isLive?this.data.isLive=e:void 0},ui.prototype.getTemporalType=function(){return this.data.temporalType},ui.prototype.setTemporalType=function(e){return e!==this.data.temporalType?(this.data.temporalType=e,this.sendNotification(vo.TEMPORAL_TYPE_CHANGE,e)):void 0},i(pi,ui),pi.NAME="MediaProxy",pi.prototype.setSource=function(e){return null==e||e.length<1?void 0:(e=e.filter(function(e){return"external"===e.type}),pi.__super__.setSource.call(this,e))},i(hi,it),hi.prototype.playerType="external",hi.prototype.createAPI=function(){return new ri(this,this.dispatcher)},hi.prototype.createModel=function(){this.registerProxy(new $t(this.config)),this.registerProxy(new li),this.registerProxy(new Xt),this.registerProxy(new Yt),this.registerProxy(new zt(this.config)),this.registerProxy(new oi),this.registerProxy(new pi),this.registerProxy(new ai(this.config.params))},hi.prototype.createView=function(){var e,t,i=this;this.registerMediator(new lt(this.viewComponent,"external")),this.registerMediator(new qt),t=new St,this.registerMediator(t),ci.create(t.viewComponent,ci.CLICK,function(){return i.sendNotification(vo.TOGGLE_ACTIVE)}),this.registerMediator(new Ht),this.registerMediator(new Gt),e=document.createElement("div"),this.viewComponent.appendChild(e),this.registerMediator(new Bt(e))},hi.prototype.createController=function(){this.registerCommand(vo.UPDATE_TOKEN_CONTEXT,Rt),this.registerCommand(vo.UPDATE_TOKEN_CONTEXT,Mt),this.registerCommand(vo.TOGGLE_PLAY_PAUSE,si),this.registerCommand(vo.PLAY,si),this.registerCommand(vo.CHANGE_PLAY_STATE,It),this.registerCommand(vo.SET_MEDIA,Ot),this.registerCommand(vo.CHANGE_MEDIA,Ut),this.registerCommand(vo.MEDIA_CHANGE,xt),this.registerCommand(vo.ERROR,Dt),this.registerCommand(vo.READY,kt),this.registerCommand(vo.CHANGE_PARAMS,Vt)},gi.decode=function(e){var t;return null!=e&&(t={},e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,i,n,o){t[decodeURIComponent(i)]=decodeURIComponent(o)})),t},gi.encode=function(e){var t,i,n;i=[];for(t in e)n=e[t],i.push(""+encodeURIComponent(t)+"="+encodeURIComponent(n));return i.join("&")},gi.prototype.decode=function(e){var t,i,n;if(null!=e){i=gi.decode(e);for(t in i)n=i[t],this[t]=n}return i},gi.prototype.encode=function(){return gi.encode(this)},fi.prototype.type=null,fi.prototype.target=null,fi.prototype.data=null,mi.prototype.addEventListener=function(){},mi.prototype.dispatchEvent=function(){},mi.prototype.removeEventListener=function(){},i(yi,mi),yi.prototype.xhr=null,yi.prototype.headers=null,yi.prototype.response=null,yi.prototype.responseXML=null,yi.prototype.responseText=null,yi.prototype.responseType=null,yi.prototype.withCredentials=!1,yi.prototype.open=function(e,t){var i,n,o,a,r,s,l=this;if(o=new XMLHttpRequest,yi.isCORS(t)&&(Object.prototype.hasOwnProperty.call(o,"withCredentials")?o.withCredentials=this.withCredentials:"undefined"!=typeof XDomainRequest&&(n=!0,o=new XDomainRequest)),null!=o){if(n&&(o.onload=function(e){"function"==typeof o.onreadystatechange&&(o.readyState=4,o.status=200,o.contentType.match(/\/xml/)&&(o.responseXML=new ActiveXObject("Microsoft.XMLDOM"),o.responseXML.async=!1,o.responseXML.loadXML(o.responseText)),o.onreadystatechange.call(o,e,!1))}),o.onreadystatechange=function(){var e,t;if(4===o.readyState)if(199<(e=o.status)&&299>e){if(null==o.responseText&&(o.responseText=o.text),l.responseText=o.responseText,null!=o.responseXML&&(null!=(t=o.responseXML.childNodes)?t.length:void 0)>0)l.response=l.responseXML=o.responseXML,l.responseType="document";else try{l.response=JSON.parse(o.responseText),l.responseType="json"}catch(i){l.response=o.responseText,l.responseType="text"}l.dispatchEvent(new fi("load",o))}else l.dispatchEvent(new fi("error",o))},o.onerror=function(){l.dispatchEvent(new fi("error",o))},this.headers.length>0)for(s=this.headers,a=0,r=s.length;r>a;a++)i=s[a],o.setRequestHeader(i.key,i.value);o.open(e,t)}this.xhr=o},yi.prototype.send=function(e){this.xhr.send(e)},yi.prototype.setRequestHeader=function(e,t){"undefined"!=typeof name&&null!==name&&""!==name&&this.headers.push({key:e,value:t})},yi.prototype.getResponseHeader=function(e){var t;return null!=(t=this.xhr)?"function"==typeof t.getResponseHeader?t.getResponseHeader(e):void 0:void 0},yi.prototype.getAllResponseHeaders=function(){var e;return null!=(e=this.xhr)?"function"==typeof e.getAllResponseHeaders?e.getAllResponseHeaders():void 0:void 0},yi.isCORS=function(e){var t,i,n,o;return i=document.createElement("a"),i.href=e,t=""!==i.hostname?i.hostname:location.hostname,n="0"!==i.port?i.port:location.port,o=":"!==i.protocol?i.protocol:location.protocol,location.protocol!==o||location.hostname!==t||location.port!==n},vi.construct=function(){var e,t,i;i=gi.decode(window.location.search);for(e in i)t=i[e],vi[e]=t;return!0},vi.constructed=vi.construct(),vi.serialize=function(e,t){var i,n,o,a;o=[];for(n in e)a=e[n],i=t?t+"["+n+"]":n,o.push("object"==typeof a?this.serialize(a,i):encodeURIComponent(i)+"="+encodeURIComponent(a));return o.join("&")},_i.prototype.addEventListener=function(){},_i.prototype.dispatchEvent=function(){},_i.prototype.removeEventListener=function(){},Ei.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC",Ei.flashTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"],Ei.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm"},Ei.rules={flashTablets:{label:"Android 2 & 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android 4|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}},Ei.getPlaybackMode=function(e){var t;return null==e&&(e=(null!=(t=vi.mode)?t.toLowerCase():void 0)||"auto"),"auto"!==e?("flash"!==e||this.hasFlash()||(e="none"),e):(this.hasFlash()||(e=this.supportsHTML5Video()?"html":"none"),"auto"===e&&(e=this.isHTML5()?"html":"flash"),e)},Ei.mergeRules=function(e){var t,i,n;n=[];for(t in e)i=e[t],n.push(Ei.rules[t]=i);return n},Ei.checkRules=function(e){var t,i,n,o,a;if(null!=e&&e.length>0)for(o=0,a=e.length;a>o;o++)if(t=e[o],(n=Ei.rules[t])&&(i=new RegExp(n.regexp),i.test(navigator.userAgent)))return!0;return!1},Ei.selectSource=function(e,t){var i,n,o,a,r;for(n=0,a=e.length;a>n;n++)if(i=e[n],Ei.checkRules(i.rules))return i;for(o=0,r=e.length;r>o;o++)if(i=e[o],""!==t(i.type||Ei.getMimeType(i.src)))return i;return null},Ei.getMimeType=function(e){return this.mimeTypes[Ei.getFileExtension(e)]},Ei.selectTrack=function(e,t){var i,n,o,a;for(o=0,a=e.length;a>o;o++)if(i=e[o],i.kind===t){n=i;break}return n},Ei.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)},Ei.isIPad=function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)},Ei.isAndroid4=function(){return/Android 4/.test(navigator.userAgent)},Ei.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)},Ei.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)},Ei.isBlackBerry=function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)},Ei.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)},Ei.supportsHTML5Video=function(){var e;return e=document.createElement("video"),null!=e.canPlayType},Ei.isHTML5=function(){return this.isIOS()||this.isAndroid4()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()},Ei.isIOS=function(){var e,t;return e=/iPad|iPhone|iPod/i,t=e.test(navigator.platform)||e.test(navigator.userAgent)},Ei.hasFlash=function(){return swfobject.hasFlashPlayerVersion("1")},Ei.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()},Ei.getDevice=function(){var e;return e=null,this.isIPhone()?e="iphone":this.isIPad()?e="ipad":/Android/.test(navigator.userAgent)?e="android":this.isKindleFireHD()?e="kindlefirehd":this.isKindleFire()?e="kindlefire":/Mac|Win32/.test(navigator.platform)&&(e="desktop"),e},Ei.xmlToJson=function(e){var t,i,n,o,a,r,s,l,d,c,u,p;if(r={},9===e.nodeType&&(e=e.firstChild),1===e.nodeType){if(e.attributes.length>0)for(r["@attributes"]={},u=e.attributes,o=s=0,d=u.length;d>s;o=++s)t=u[o],r["@attributes"][t.nodeName]=t.nodeValue}else(3===e.nodeType||4===e.nodeType)&&(r=e.nodeValue);if(e.hasChildNodes())for(p=e.childNodes,o=l=0,c=p.length;c>l;o=++l)i=p[o],(3!==i.nodeType||/\S/.test(i.nodeValue))&&(a=i.nodeName.replace(/:/,"-"),n=this.xmlToJson(i),null==n["@attributes"]&&null!=n["#text"]&&(n=n["#text"]),null==r[a]?r[a]=n:(r[a]instanceof Array||(r[a]=[r[a]]),r[a].push(n)));return r},Ei.getXHR=function(){return new yi},Ei.get=function(e,t,i){var n,o,a,r,s,l;for(null==t&&(t={}),null==i&&(i=[]),r=Ei.getXHR(),null!=t&&(null!=t.withCredentials&&(r.withCredentials=t.withCredentials),null!=t.onload&&(r.onload=t.onload),null!=t.onerror&&(r.onerror=t.onerror)),r.open("GET",e),s=0,l=i.length;l>s;s++){n=i[s];for(o in n)a=n[o],r.setRequestHeader(o,a)}return r.send(),r},Ei.send=function(e,t,i,n){var o,a,r,s,l,d;for(null==i&&(i={}),null==n&&(n=[{"Content-Type":"String"}]),s=Ei.getXHR(),null!=i.onload&&(s.onload=i.onload),null!=i.onerror&&(s.onerror=i.onerror),s.open("POST",e),l=0,d=n.length;d>l;l++){o=n[l];for(a in o)r=o[a],s.setRequestHeader(a,r)}return s.send(t),s},Ei.loadAMPScript=function(e,t){return this.loadScript(e,t,this.getAMPParent())},Ei.getAMPParent=function(){var e,t;return t=this.getAMPScriptTag(),null!=t?t.parentNode:(e=document.getElementsByTagName("head"),null!=(null!=e?e[0]:void 0)?e[0]:void 0)},Ei.getAMPScriptTag=function(){var e,t,i,n;for(t=document.getElementsByTagName("script"),i=0,n=t.length;n>i;i++)if(e=t[i],/amp(\..*)?\.js/.test(e.src))return e;return null},Ei.loadScript=function(e,t,i){var n,o;return n=i||document.getElementsByTagName("head")[0],o=document.createElement("script"),o.type="text/javascript",null!=t&&(o.addEventListener?o.onload=function(){this.onload=null,t()}:o.readyState&&(o.onreadystatechange=function(){("loaded"===this.readyState||"complete"===this.readyState)&&(this.onreadystatechange=null,t())})),o.src=e,n.appendChild(o)},Ei.loadStyleSheet=function(e){var t,i;return t=document.getElementsByTagName("head")[0],i=document.createElement("link"),i.rel="stylesheet",i.type="text/css",i.href=e,t.appendChild(i)},Ei.read=function(e,t,i,n){var o,a;null==t&&(t={}),null==i&&(i=""),null==n&&(n=[]);try{return a=this.get(e,t,n),o=a.responseText||a.text,i===Ei.mimeTypes.json?JSON.parse(o):i===Ei.mimeTypes.xml&&null!=a.responseXML?a.responseXML:o}catch(r){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.error&&console.error("Read Error: ",r),null}},Ei.getFileExtension=function(e){return e.split(".").pop().replace(/\?.*/,"")},Ei.getResponseHeader=function(e,t,i){var n;return null==i&&(i={}),n=Ei.getXHR(),null!=i.onerror&&(n.onerror=i.onerror),n.open("HEAD",e,!1),n.send(),n.getResponseHeader(t)},Ei.getResponseHeaders=function(e,t,i){var n,o,a,r,s;if(null==i&&(i={}),a=Ei.getXHR(),null!=i.onerror&&(a.onerror=i.onerror),a.open("HEAD",e,!1),a.send(),o={},null==t)return a.getAllResponseHeaders();for(r=0,s=t.length;s>r;r++)n=t[r],o[n]=a.getResponseHeader(n);return o},Ei.isTouchDevice=function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}},Ei.clamp=function(e,t,i){return t>e&&(e=t),e>i&&(e=i),e},Ei.beacon=function(e){var t;return t=document.getElementById("beaconId"),null==t&&(t=document.createElement("img"),t.setAttribute("id","beaconId"),t.setAttribute("height",0),t.setAttribute("width",0),document.body.appendChild(t),t.style.display="none"),t.setAttribute("src",e),t},Ei.getElementOffset=function(e){var t;if(t={left:0,top:0},e.offsetParent)for(t.left=e.offsetLeft,t.top=e.offsetTop;e=e.offsetParent;)t.left+=e.offsetLeft,t.top+=e.offsetTop;return t},Ei.override=function(e,t,i){var n,o;if(null==i&&(i=!0),null==e)return t;if(null==t)return e;i===!0&&(e=Ei.clone(e),t=Ei.clone(t));for(n in t)o=t[n],"object"==typeof o?(null==e[n]&&(e[n]=o instanceof Array?[]:{}),e[n]=Ei.override(e[n],o,!1)):e[n]=o;return e},Ei.clone=function(e,t){var i,n,o,a,r,s,l,d;if(null==t&&(t=!0),"object"!=typeof e)i=e;else{i=e instanceof Array?[]:{};for(a in e)if(s=e[a],"object"==typeof s&&t===!0)if(s instanceof Array)for(i[a]=[],l=0,d=s.length;d>l;l++)n=s[l],i[a].push(this.clone(n));else{i[a]={};for(o in s)r=s[o],i[a][o]=this.clone(r)}else i[a]=s}return i},Ei.formatTimecode=function(e,t){var i;return e=parseInt(e),isNaN(e)?"00:00":(i=Ei.formatZeroFill(e%60),e=parseInt(e/60),i=Ei.formatZeroFill(e%60)+":"+i,e=parseInt(e/60),e>0&&(i=Ei.formatZeroFill(e)+":"+i),t>=3600&&5===i.length&&(i="00:"+i),i)},Ei.formatZeroFill=function(e){var t;return t=e.toString(),10>e&&(t="0"+t),t},Ei.flattenTimecode=function(e,t){var i,n,o,a;if(null==t&&(t=30),null==e||""===e)return 0/0;for(o=e.split(":"),i=0,4===o.length?i=parseInt(o.pop())/t:3===o.length&&(o[2]=o[2].replace(",","."),-1!==o[2].indexOf(".")&&(n=o[2].split(".")),n.length>1&&(o[2]=n[0],i=parseInt(n[1])/1e3)),a=parseInt(o.pop());o.length>0;)a+=Math.pow(60,o.length)*parseInt(o.shift());return a+i},Ei.cacheBust=function(e,t,i){var n;return null==t&&(t="cacheBust"),null==i&&(i=Date.now()),n=-1===e.indexOf("?")?"?":"&",e+n+t+"="+i},Ei.formatStyleName=function(e){return e.replace(/([A-Z])/,"-$1").toLowerCase()},Ei.trim=function(e){var t;return t=e.replace(/^\s*(.*)/,"$1"),t.replace(/(.*)\s*$/,"$1")},Ei.getJson=function(e,t,i){var n;return n=Ei.getXHR(),n.open("GET",e),n.onload=function(){var e;e="document"===n.responseType?Ei.xmlToJson(n.responseXML):n.response,"function"==typeof t&&t(e)},n.onerror=function(e){"function"==typeof i&&i(e)},n.send(),n},i(Ai,l),Ai.prototype.defaults={mode:"auto",autoHide:5},Ai.prototype.timeout=null,Ai.prototype.initializeNotifier=function(e){return Ai.__super__.initializeNotifier.call(this,e),null!=this.config.mode?this.setMode(this.config.mode):void 0},Ai.prototype.setMode=function(e){return this.data.mode===e?e:("auto"===this.data.mode&&this.stop(),this.facade.sendNotification(vo.REMOVE_APPLICATION_STATE,"controls-"+this.data.mode),this.data.mode=e,this.facade.sendNotification(vo.ADD_APPLICATION_STATE,"controls-"+this.data.mode),e)},Ai.prototype.getMode=function(){return this.data.mode},Ai.prototype.setAutoHide=function(e){return this.data.autoHide=e,e},Ai.prototype.getAutoHide=function(){return this.data.autoHide},Ai.prototype.start=function(){var e=this;this.stop(),this.timeout=setTimeout(function(){"auto"===e.data.mode&&e.facade.sendNotification(vo.CHANGE_ACTIVE_STATE,wo.INACTIVE)},1e3*this.data.autoHide)},Ai.prototype.stop=function(){clearTimeout(this.timeout),this.timeout=null},i(Ci,x),Ci.NAME="PlayPauseMediator",Ci.prototype.onRegister=function(){var e=this;Ci.__super__.onRegister.call(this),ci.create(this.viewComponent,ci.CLICK,function(t){return t.stopImmediatePropagation(),e.sendNotification(vo.TOGGLE_PLAY_PAUSE),!1}),this.classList.add("play-pause-button")},i(bi,x),bi.NAME="FullScreenMediator",bi.prototype.clickHandler=null,bi.prototype.onRegister=function(){var e=this;bi.__super__.onRegister.call(this),this.clickHandler=ci.create(this.viewComponent,ci.CLICK,function(t){return t.stopImmediatePropagation(),e.sendNotification(vo.TOGGLE_FULL_SCREEN),!1}),this.classList.add("full-screen-button")},bi.prototype.listNotificationInterests=function(){return[vo.DISABLE_FULL_SCREEN,vo.ENABLE_FULL_SCREEN]},bi.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case vo.DISABLE_FULL_SCREEN:this.sendNotification(vo.ADD_APPLICATION_STATE,"disable-full-screen"),this.clickHandler.unbind();break;case vo.ENABLE_FULL_SCREEN:this.sendNotification(vo.REMOVE_APPLICATION_STATE,"disable-full-screen"),this.clickHandler.bind()}},i(Pi,puremvc.Mediator),Pi.NAME="PluginWrapper",Pi.prototype.player=null,Pi.prototype.config=null,Pi.prototype.dispatcher=null,Pi.prototype.createFlashVars=null,Pi.prototype.createXML=null,Pi.prototype.getAPI=function(){return this},Pi.prototype.addEventListener=function(e,t){this.dispatcher.addEventListener(e,t)},Pi.prototype.dispatchEvent=function(e){"timeupdate"!==e.type&&"timeremaining"!==e.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT]",e.type,e.data),this.dispatcher.dispatchEvent(e)},Pi.prototype.removeEventListener=function(e,t){this.dispatcher.removeEventListener(e,t)},Pi.prototype.createProperty=function(e,t,i,n){var o,a,r;if(o=e.createElement("property"),o.setAttribute("key",t),null!=n&&n.appendChild(o),null!=i)if("object"!=typeof i||i instanceof Array)a=ot.createTextContent(e,i.toString()),o.appendChild(a);else for(t in i)r=i[t],this.createProperty(e,t,r,o);return o},Pi.prototype.listNotificationInterests=function(){return[Ao.CREATE_FLASH_VARS,Ao.CREATE_XML]},Pi.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case Ao.CREATE_FLASH_VARS:"function"==typeof this.createFlashVars&&this.createFlashVars(t.flashvars);break;case Ao.CREATE_XML:"function"==typeof this.createXML&&this.createXML(t.xml)}},i(Ti,puremvc.SimpleCommand),Ti.prototype.execute=function(){var e;this.facade.logger.debug("ControlsPlayCommand"),e=this.facade.retrieveProxy(Ai.NAME),e.start()},i(Ni,puremvc.SimpleCommand),Ni.prototype.execute=function(){var e;this.facade.logger.debug("ControlsPauseCommand"),e=this.facade.retrieveProxy(Ai.NAME),e.stop()},i(Si,puremvc.SimpleCommand),Si.prototype.execute=function(e){var t,i,n;this.facade.logger.debug("ControlsActiveStateChangeCommand"),n=this.facade.retrieveProxy(Ai.NAME),t=this.facade.app.retrieveProxy(li.NAME),i=e.getBody(),i.newState===wo.ACTIVE&&t.getPlayState()!==PlayState.READY&&n.start()
},i(wi,Pi),wi.NAME="ControlsWrapper",wi.prototype.mode="auto",wi.prototype.autoHide=5,wi.prototype.listNotificationInterests=function(){return wi.__super__.listNotificationInterests.apply(this,arguments).concat([vo.MEDIUM_CHANGE])},wi.prototype.handleNotification=function(e){var t,i,n;switch(wi.__super__.handleNotification.call(this,e),n=e.getName(),t=e.getBody(),n){case vo.MEDIUM_CHANGE:i=/audio/.test(t)?"persistent":this.mode,this.setMode(i)}},wi.prototype.createFlashVars=function(e){return null!=this.config.mode&&(this.mode=e.controls_mode=this.config.mode),e},wi.prototype.createXML=function(e){var t,i,n,o,a,r;for(o=e.getElementsByTagName("view")[0],n=e.getElementsByTagName("element"),t=null,a=0,r=n.length;r>a;a++)if(i=n[a],"controls"===i.getAttribute("id")){t=i;break}return null==t&&(t=e.createElement("element"),t.setAttribute("id","controls"),o.appendChild(t)),null!=t.attributes.autoHideDelay?this.autoHide=t.getAttribute("autoHideDelay"):null!=this.config.autoHide&&(this.autoHide=this.config.autoHide,t.setAttribute("autoHideDelay",this.config.autoHide)),e},wi.prototype.getMode=function(){return this.mode},wi.prototype.setMode=function(e){if(e!==this.mode){try{this.mode=e,this.player.video.setPlayerProperty("controlsMode",e)}catch(t){this.facade.logger.error("Controls Error:",t)}return e}},wi.prototype.getAutoHide=function(){return this.autoHide},i(Ii,x),Ii.NAME="ProgressMediator",Ii.prototype.bufferValue=null,Ii.prototype.progressValue=null,Ii.prototype.scrubber=null,Ii.prototype.scrubTime=null,Ii.prototype.cuePoints=null,Ii.prototype.duration=0,Ii.prototype.scrubbing=!1,Ii.prototype.value=0,Ii.prototype.releaseHandler=null,Ii.prototype.dragHandler=null,Ii.prototype.pressHandler=null,Ii.prototype.onRegister=function(){var e,t=this;Ii.__super__.onRegister.call(this),this.classList.add("progress"),this.bufferValue=document.createElement("div"),this.classList.add("buffer-value",this.bufferValue),this.viewComponent.appendChild(this.bufferValue),this.progressValue=document.createElement("div"),this.classList.add("progress-value",this.progressValue),this.viewComponent.appendChild(this.progressValue),e=document.createElement("div"),this.classList.add("seek-bar",e),this.viewComponent.appendChild(e),ci.create(e,ci.CLICK,function(e){return e.stopImmediatePropagation(),t.setValue(t.calculateValue(e.clientX)),!1}),this.scrubber=document.createElement("div"),this.classList.add("scrubber",this.scrubber),this.viewComponent.appendChild(this.scrubber),this.pressHandler=ci.create(this.scrubber,ci.PRESS,function(e){return t.dragHandler.bind(),t.releaseHandler.bind(),t.scrubbing=!0,t.classList.add("scrubbing"),e.stopImmediatePropagation(),!1}),this.releaseHandler=ci.create(window,ci.RELEASE,function(e){return e.stopImmediatePropagation(),t.dragHandler.unbind(),t.releaseHandler.unbind(),t.setValue(t.value),t.classList.remove("scrubbing"),t.scrubbing=!1,!1}),this.releaseHandler.unbind(),this.dragHandler=ci.create(window,ci.MOVE,function(e){var i;return e.stopImmediatePropagation(),i=e.clientX?e.clientX:e.targetTouches[0].screenX,t.updateValue(t.calculateValue(i)),!1}),this.dragHandler.unbind(),this.scrubTime=document.createElement("div"),this.classList.add("scrub-time",this.scrubTime),this.viewComponent.appendChild(this.scrubTime)},Ii.prototype.listNotificationInterests=function(){return[vo.MEDIA_CHANGE,vo.TIME_UPDATE,vo.DURATION_CHANGE,vo.PROGRESS,vo.ADD_CUE_POINTS,vo.REMOVE_CUE_POINTS]},Ii.prototype.handleNotification=function(e){var t,i,n,o,a,r;switch(e.getName()){case vo.MEDIA_CHANGE:this.updateValue(0),this.bufferValue.style.width="0%";break;case vo.TIME_UPDATE:this.scrubbing||this.updateValue(e.getBody()/this.duration);break;case vo.PROGRESS:o=Ei.clamp(e.getBody()/this.duration*100,0,100),this.bufferValue.style.width=o+"%";break;case vo.DURATION_CHANGE:this.duration=e.getBody();break;case vo.ADD_CUE_POINTS:for(this.removeCuePoints(),n=e.getBody(),this.cuePoints=document.createElement("div"),this.cuePoints.className="cue-points",this.viewComponent.appendChild(this.cuePoints),a=0,r=n.length;r>a;a++)t=n[a],0!==t&&-1!==t&&(i=document.createElement("div"),i.className="cue-point",i.style.left=t/this.duration*100+"%",this.cuePoints.appendChild(i));break;case vo.REMOVE_CUE_POINTS:this.removeCuePoints()}},Ii.prototype.removeCuePoints=function(){null!=this.cuePoints&&(this.cuePoints.innerHTML="",this.viewComponent.removeChild(this.cuePoints),this.cuePoints=null)},Ii.prototype.setValue=function(e){this.updateValue(e),this.sendNotification(vo.SEEK,e*this.duration)},Ii.prototype.updateValue=function(e){this.value=e,this.scrubbing===!0&&(this.scrubTime.textContent=Ei.formatTimecode(this.value*this.duration)),this.scrubber.style.marginLeft="-"+Math.round(this.value*this.scrubber.clientWidth-1)+"px",this.progressValue.style.width=this.scrubber.style.left=this.scrubTime.style.left=""+String(100*this.value).substr(0,5)+"%"},Ii.prototype.calculateValue=function(e){return Ei.clamp((e-Ei.getElementOffset(this.viewComponent).left)/this.viewComponent.offsetWidth,0,1)},i(xi,M),xi.NAME="TimeDisplayMediator",xi.prototype.currentTimeText=null,xi.prototype.currentTime=0,xi.prototype.separator=null,xi.prototype.durationText=null,xi.prototype.duration=null,xi.prototype.onRegister=function(){var e;xi.__super__.onRegister.call(this),this.classList.add("time-display"),e=document.createElement("div"),this.classList.add("live-display",e),e.textContent=this.localizationManager.getString(V.MSG_LIVE),this.viewComponent.appendChild(e),this.currentTimeText=document.createElement("div"),this.classList.add("current-time-display",this.currentTimeText),this.currentTimeText.textContent="00:00",this.viewComponent.appendChild(this.currentTimeText),this.separator=document.createElement("div"),this.classList.add("separator-display",this.separator),this.separator.textContent=" / ",this.viewComponent.appendChild(this.separator),this.durationText=document.createElement("div"),this.classList.add("duration-display",this.durationText),this.durationText.textContent="00:00",this.viewComponent.appendChild(this.durationText)},xi.prototype.listNotificationInterests=function(){return[vo.TIME_UPDATE,vo.DURATION_CHANGE]},xi.prototype.handleNotification=function(e){var t;switch(t=this.facade.retrieveProxy(ui.NAME),e.getName()){case vo.TIME_UPDATE:this.currentTime=e.getBody(),this.currentTimeText.textContent=Ei.formatTimecode(this.currentTime,this.duration);break;case vo.DURATION_CHANGE:this.duration=e.getBody(),this.currentTimeText.textContent=Ei.formatTimecode(this.currentTime,this.duration),this.durationText.textContent=Ei.formatTimecode(this.duration)}},i(Mi,mi),Mi.UNINITIALIZED=0,Mi.LOADING=1,Mi.LOADED=2,Mi.getConfigURL=function(){var e,t,i,n;return e=Ei.getAMPScriptTag(),null!=e&&(i=e.src,n=i.indexOf("?"),n>-1&&n<i.length-1)?t=i.substring(n+1):null},Mi.parseModule=function(e){var t,i,n,o,a,r,s,l,d;for(s={},o=0,i=e.childNodes,n=i.length,a=0,r=null,t=null,l=0,d=i.length;d>l;l++)r=i[l],1===(null!=r?r.nodeType:void 0)&&(s[r.nodeName]=this.parseItem(r));return s},Mi.parseItem=function(e){var t,i,n,o,a,r;if(n=(""+e.getAttribute("type")).toLowerCase(),o=e.textContent||e.text||e.innerText,"object"!==n&&"array"!==n&&/#\{.*\}/.test(o))return o;switch(n){case"object":o=this.parseModule(e);break;case"array":for(o=[],i=e.childNodes,a=0,r=i.length;r>a;a++)t=i[a],1===t.nodeType&&o.push(this.parseItem(t));break;case"boolean":o="true"===o.toLowerCase();break;case"number":o=parseFloat(o)}return o},Mi.loadHead=function(e,t){var i,n,o,a,r,s,l,d,c,u,p;if(o=Ei.getAMPParent(),s=function(e){var t;t=document.createElement("script"),t.type="text/javascript",t.src=e,t.addEventListener?t.addEventListener("load",d,!1):t.readyState&&(t.onreadystatechange=d),o.appendChild(t)},d=function(){return l++,i>l?s(c[l]):"function"==typeof t?t():void 0},null!=e.links&&e.links.length>0)for(r=e.links,u=0,p=r.length;p>u;u++)a=r[u],n=document.createElement("link"),n.rel="stylesheet",n.type="text/css",n.href=a,o.appendChild(n);null!=e.scripts&&e.scripts.length>0?(c=e.scripts,l=-1,i=c.length,d()):"function"==typeof t&&t()},Mi.prototype.url=null,Mi.prototype.data=null,Mi.prototype.xml=null,Mi.prototype.readyState=Mi.UNINITIALIZED,Mi.prototype.loaded=!1,Mi.prototype.loadURL=function(e,t){var i,n=this;null==t&&(t=!1),(null!=e||(e=Mi.getConfigURL(),null!=e))&&(this.url=e,this.setReadyState(Mi.LOADING),i=Ei.get(e,{withCredentials:t,onload:function(){var e,t;"document"===i.responseType?(n.xml=i.responseXML,t=7!==n.xml.firstChild.nodeType?n.xml.firstChild:n.xml.childNodes[1],e=Mi.parseModule(t)):e=i.response,n.loadModule(e)},onerror:function(e){this.dispatchEvent(new fi("error",e)),Ct.error(e)}}))},Mi.prototype.loadModule=function(e){var t=this;null!=e.head?Mi.loadHead(e.head,function(){t.loadData(e.config)}):this.loadData(e.config)},Mi.prototype.loadData=function(e){this.data=e,this.setReadyState(Mi.LOADED)},Mi.prototype.load=function(e,t){null==t&&(t=!1),"object"==typeof e?this.loadModule(e):(null==e||"string"==typeof e)&&this.loadURL(e,t)},Mi.prototype.setReadyState=function(e){this.readyState=e,this.dispatchEvent(new fi("readystatechange",e)),e!==Mi.LOADED||this.loaded||(this.loaded=!0,this.dispatchEvent(new fi("load",this.data)))},i(Li,Nt),Li.NAME="ControlsMediator",Li.prototype.onRegister=function(){var e,t;Li.__super__.onRegister.call(this),this.classList.add("controls-layer"),e=document.createElement("div"),this.viewComponent.appendChild(e),this.facade.registerMediator(new Ci(e)),e=document.createElement("div"),this.viewComponent.appendChild(e),this.facade.registerMediator(new xi(e)),t=document.createElement("div"),this.classList.add("progress-area",t),this.viewComponent.appendChild(t),e=document.createElement("div"),t.appendChild(e),this.facade.registerMediator(new Ii(e)),e=document.createElement("div"),this.classList.add("separator",e),this.viewComponent.appendChild(e)},Li.prototype.listNotificationInterests=function(){return[vo.READY,vo.ADD_CONTROL,vo.REMOVE_CONTROL]},Li.prototype.handleNotification=function(e){var t,i,n,o;switch(n=e.getName(),t=e.getBody(),n){case vo.READY:(null!=(o=t.fullscreen)?o.enabled:void 0)!==!1&&(i=document.createElement("div"),this.viewComponent.appendChild(i),this.facade.registerMediator(new bi(i)));break;case vo.ADD_CONTROL:this.viewComponent.appendChild(t);break;case vo.REMOVE_CONTROL:this.viewComponent.appendChild(t)}},i(Di,Ft),Di.prototype.setMode=function(){},Di.prototype.getMode=function(){},Di.prototype.setAutoHide=function(){},Di.prototype.getAutoHide=function(){},ki.prototype.createFlashPlayer=function(e,t,i){return new _t(e,t,i)},ki.prototype.createHTMLPlayer=function(e,t,i){return new nt(e,t,i)},ki.prototype.createExternalPlayer=function(e,t,i){return new hi(e,t,i)},ki.prototype.createInstallPlayer=function(e){return new d(e)},ki.VERSION="AMP Premier - NDN v1.0.0000",ki.defaults=new Mi,ki.plugins=[],ki.loadDefaults=function(e,t){null==t&&(t=!1),this.defaults.load(e,t)},ki.getPlaybackMode=function(){return Ei.getPlaybackMode()},ki.registerPlugin=function(e,t,i){var n;null==(n=this.plugins)[e]&&(n[e]={}),this.plugins[e][t]=i},i(Ri,Pi),Ri.NAME="PlayOverlayWrapper",Ri.prototype.createFlashVars=function(e){return e.show_play_button_overlay=null!=this.config.enabled?this.config.enabled:!0,e},ki.registerPlugin("playoverlay","flash",Ri),i(Vi,L),Vi.NAME="PlayOverlayMediator",Vi.prototype.onRegister=function(){var e=this;return ci.create(this.viewComponent,ci.CLICK,function(t){return t.stopImmediatePropagation(),t.preventDefault(),e.sendNotification(vo.TOGGLE_PLAY_PAUSE),!1}),this.classList.add("play-overlay"),Vi.__super__.onRegister.call(this)},i(Oi,J),Oi.NAME=l.NAME,Oi.prototype.defaults={config:null,dimensions:null,plugin:{js:"http://79423.analytics.edgesuite.net/html5/akamaihtml5-min.js"}},Oi.prototype.percent=0,Oi.prototype.initialize=function(){try{window.akamaiSetVideoObject(this.facade.app.getVideo())}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set video tag",e)}},Oi.prototype.setDimensions=function(e){var t,i,n;t=this.data.source.dimensions;for(i in e)n=e[i],null!=n&&(t[i]=n);return this.data.parse(this.data.source),this.applyDimensions(t),e},Oi.prototype.applyDimensions=function(e){var t,i;if(null!=window.setAkamaiMediaAnalyticsData)try{for(t in e)i=e[t],setAkamaiMediaAnalyticsData(t,i)}catch(n){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",n)}},Oi.prototype.setMedia=function(e){var t,i;return t=null!=(null!=(i=e.mediaanalytics)?i.dimensions:void 0)?Ei.override(this.value.dimensions,e.mediaanalytics.dimensions):this.value.dimensions,this.applyDimensions(t),e},i(Ui,jt),Ui.NAME="ControlsPlugin",Ui.prototype.moduleName="controls",Ui.prototype.createController=function(){this.registerCommand(vo.PLAY,Ti),this.registerCommand(vo.PAUSE,Ni),this.registerCommand(vo.ACTIVE_STATE_CHANGE,Si)},Ui.prototype.createModel=function(){this.registerProxy(new Ai(this.config))},Ui.prototype.createAPI=function(){return new Di(this)},Ui.prototype.createView=function(){this.registerMediator(new Li)},Ui.prototype.listNotificationInterests=function(){return[vo.MEDIA_CHANGE,vo.TIME_UPDATE,vo.DURATION_CHANGE,vo.PROGRESS,vo.ADD_CUE_POINTS,vo.REMOVE_CUE_POINTS,vo.DISABLE_FULL_SCREEN,vo.ENABLE_FULL_SCREEN,vo.READY,vo.ADD_CONTROL,vo.REMOVE_CONTROL]},Ui.prototype.listNotificationPublications=function(){return Ui.__super__.listNotificationPublications.call(this).concat([vo.CHANGE_ACTIVE_STATE,vo.TOGGLE_PLAY_PAUSE,vo.TOGGLE_FULL_SCREEN,vo.SEEK])},ki.registerPlugin("controls","html",Ui),ki.registerPlugin("controls","flash",wi),ki.registerPlugin("controls","external",Ui),i(Hi,Pi),Hi.NAME="MediaAnalyticsWrapper",Hi.prototype.listNotificationInterests=function(){return Hi.__super__.listNotificationInterests.call(this).concat([vo.MEDIA_CHANGE,Co.SET_DIMENSIONS])},Hi.prototype.createFlashVars=function(e){var t,i,n,o,a,r;if(t=null!=(o=this.player.config)?null!=(a=o.media)?null!=(r=a.mediaanalytics)?r.dimensions:void 0:void 0:void 0,null!=t)for(i in t)n=t[i],e["report_"+i]=n;return e},Hi.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c;if(t=e.getElementsByTagName("application")[0],a=e.getElementsByTagName("metrics")[0],null==a&&(a=e.createElement("metrics"),t.appendChild(a)),l=e.createElement("vendor"),l.setAttribute("id","akamai"),a.appendChild(l),null!=this.config.config&&(n=e.createElement("property"),n.setAttribute("key","MEDIA_ANALYTICS_BEACON"),n.appendChild(ot.createTextContent(e,this.config.config)),l.appendChild(n),r=(null!=(d=this.config.plugin)?d.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf",n=e.createElement("property"),n.setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH"),n.appendChild(ot.createTextContent(e,r)),l.appendChild(n)),null!=this.config.dimensions){i=e.createElement("property"),i.setAttribute("key","dimensions"),l.appendChild(i),c=this.config.dimensions;for(o in c)s=c[o],n=e.createElement("property"),n.setAttribute("key",o),n.appendChild(ot.createTextContent(e,s)),i.appendChild(n)}return e},Hi.prototype.handleNotification=function(e){var t,i,n,o,a,r,s;switch(Hi.__super__.handleNotification.call(this,e),o=e.getName(),t=e.getBody(),o){case vo.MEDIA_CHANGE:if(n=t,null!=(null!=(r=n.mediaanalytics)?r.dimensions:void 0)){n.dimensions=[],s=n.mediaanalytics.dimensions;for(i in s)a=s[i],n.dimensions.push({key:i,value:a})}break;case Co.SET_DIMENSIONS:this.setDimensions(t)}},Hi.prototype.setDimensions=function(e){return this.player.video.setPlayerProperty("maDimensions",e),e},i(Bi,puremvc.SimpleCommand),Bi.prototype.execute=function(e){var t,i;this.facade.logger.debug("MediaAnalyticsChangeMediaCommand"),t=e.getBody(),i=this.facade.retrieveProxy(Oi.NAME),i.setMedia(t)},i(Gi,puremvc.SimpleCommand),Gi.prototype.execute=function(){this.facade.logger.debug("MediaAnalyticsAdBreakStartCommand"),this.facade.app.getVideo().dataset.isad=!0},i(Fi,puremvc.SimpleCommand),Fi.prototype.execute=function(){this.facade.logger.debug("MediaAnalyticsAdBreakEndCommand"),this.facade.app.getVideo().dataset.isad=!1},i(zi,puremvc.SimpleCommand),zi.prototype.execute=function(e){var t,i;this.facade.logger.debug("MediaAnalyticsAdLoadedCommand");try{i=e.getBody(),t={adDuration:i.duration,adPartnerId:i.partner,adTitle:i.title,adId:i.id},"function"==typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(t)}catch(n){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",n)}},i(ji,puremvc.SimpleCommand),ji.prototype.execute=function(){this.facade.logger.debug("MediaAnalyticsAdStartCommand");try{"function"==typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",e)}},i(qi,puremvc.SimpleCommand),qi.prototype.execute=function(e){var t,i,n;t=e.getBody(),i=Math.round(t.currentTime/t.duration*100),n=this.facade.retrieveProxy(Oi.NAME);try{i>=25&&n.percent<25?(this.facade.logger.debug("MediaAnalytics: First Quartile"),"function"==typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()):i>=50&&n.percent<50?(this.facade.logger.debug("MediaAnalytics: Second Quartile"),"function"==typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()):i>=75&&n.percent<75&&(this.facade.logger.debug("MediaAnalytics: Third Quartile"),"function"==typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile())}catch(o){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",o)}n.percent=i},i(Wi,puremvc.SimpleCommand),Wi.prototype.execute=function(){this.facade.logger.debug("MediaAnalyticsAdEndCommand");try{"function"==typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted()}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",e)}this.facade.app.getVideo().dataset.isad=!0},i(Yi,puremvc.SimpleCommand),Yi.prototype.execute=function(e){var t,i;this.facade.logger.debug("MediaAnalyticsSetDimensionsCommand"),t=e.getBody(),i=this.facade.retrieveProxy(Oi.NAME),i.setDimensions(t)},i($i,Ft),$i.prototype.setDimensions=function(){},i(Ki,jt),Ki.NAME="PlayOverlayPlugin",Ki.prototype.moduleName="playoverlay",Ki.prototype.createModel=function(){},Ki.prototype.createView=function(){this.registerMediator(new Vi)},Ki.prototype.listNotificationPublications=function(){return Ki.__super__.listNotificationPublications.call(this).concat([vo.TOGGLE_PLAY_PAUSE])},ki.registerPlugin("playoverlay","html",Ki),ki.registerPlugin("playoverlay","external",Ki),Xi.prototype.title=null,Xi.prototype.link=null,Xi.prototype.description=null,Xi.prototype.category=null,Xi.prototype.pubDate=null,Xi.prototype.language=null,Xi.prototype.ttl=null,Xi.prototype.item=null,Xi.prototype.metadata=null,Zi.prototype.src=null,Zi.prototype.source=null,Zi.prototype.title=null,Zi.prototype.description=null,Zi.prototype.link=null,Zi.prototype.guid=null,Zi.prototype.pubDate=null,Zi.prototype.poster=null,Zi.prototype.thumbnail=null,Zi.prototype.embed=null,Zi.prototype.category=null,Zi.prototype.type=null,Zi.prototype.medium=null,Zi.prototype.duration=null,Zi.prototype.track=null,Zi.prototype.metadata=null,i(Ji,puremvc.SimpleCommand),Ji.prototype.execute=function(e){var t;this.facade.logger.debug("LoadFeedCommand",e.getBody()),t=this.facade.retrieveProxy(rn.NAME),t.setURL(e.getBody())},i(Qi,puremvc.SimpleCommand),Qi.prototype.execute=function(e){var t;this.facade.logger.debug("ChangeFeedCommand",e.getBody()),t=this.facade.retrieveProxy(rn.NAME),t.setFeedData(e.getBody())},i(en,puremvc.SimpleCommand),en.prototype.execute=function(e){var t,i;this.facade.logger.debug("FeedChangedCommand",e.getBody()),this.facade.app.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.READY),t=e.getBody(),i=t.item[0],this.facade.app.sendNotification(vo.SET_MEDIA,i)},i(tn,puremvc.SimpleCommand),tn.prototype.execute=function(){var e;this.facade.logger.debug("FeedInitializedCommand"),e=this.facade.retrieveProxy(rn.NAME),e.invoke()},i(nn,Ft),nn.prototype.setURL=function(){},nn.prototype.getURL=function(){},nn.prototype.setData=function(){},nn.prototype.getData=function(){};var xo={LOAD_FEED:"loadFeed",FEED_CHANGED:"feedChanged",FEED_LOADED:"feedLoaded"};on.prototype.getFeed=function(e,t,i){return Ei.getJson(e,t,i)},on.prototype.getMediaNode=function(e,t,i){var n,o,a,r;return null==i&&(i=!0),a="media-"+t,n=e["media-group"]||e,o=n["media-content"],null!=o&&null!=o[a]?r=o[a]:null!=n[a]?r=n[a]:null!=e[a]?r=e[a]:null!=e[t]&&i&&(r=e[t]),r},on.prototype.createEmbed=function(e){var t,i,n,o,a,r;try{if(t=this.getMediaNode(e,"embed"),null==t)return i;for(i={},i.url=t["@attributes"].url,i.width=t["@attributes"].width,i.height=t["@attributes"].height,i.params={},t["media-param"]instanceof Array||(t["media-param"]=[t["media-param"]]),r=t["media-param"],o=0,a=r.length;a>o;o++)n=r[o],i.params[n["@attributes"].name]=n["#text"]}catch(s){Ct.error(s.message)}return i},on.prototype.createFeed=function(e){var t,i,n,o,a,r,s,l,d;try{if(t=e.channel,i=new Xi,null!=t){for(i.title=t.title,i.description=t.description,i.language=t.language,i.category=t.category,i.pubDate=new Date(Date.parse(t.pubDate)),i.ttl=t.ttl,o=t.item instanceof Array?t.item:[t.item],l=0,d=o.length;d>l;l++)n=o[l],r=this.createMedia(n),i.item.push(r);for(a in t)s=t[a],a in i||(i.metadata[a]=s)}}catch(c){Ct.error(c)}return i},on.prototype.createMedia=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m,y,v,_;try{if(s=new Zi,r=this.getMediaNode(e,"content"),r instanceof Array)for(s.source=[],p=0,f=r.length;f>p;p++)n=r[p],d={src:n["@attributes"].url,type:n["@attributes"].type},i=n["media-category"],null!=i&&(t=i["@attributes"],"http://mrss.akamai.com/user_agent_hint"===t.schema&&(a=t.label||i["#text"],null!=a&&""!==a&&(null==d.rules&&(d.rules=[]),d.rules.push(a)))),s.source.push(d),s.medium=n["@attributes"].medium,s.duration=parseFloat(n["@attributes"].duration);else s.type=r["@attributes"].type,s.src=r["@attributes"].url,s.medium=r["@attributes"].medium,s.duration=parseFloat(r["@attributes"].duration);if(s.guid=e.guid,s.title=this.getMediaNode(e,"title"),s.link=e.link,s.description=this.getMediaNode(e,"description"),s.pubDate=new Date(Date.parse(e.pubDate)),s.thumbnail=s.poster=null!=(v=this.getMediaNode(e,"thumbnail"))?null!=(_=v["@attributes"])?_.url:void 0:void 0,s.embed=this.createEmbed(e),l=this.getMediaNode(e,"status",!1),null!=l&&(s.status={state:l["@attributes"].state,reason:l["@attributes"].reason}),s.category=e.category,s.category instanceof Array||(s.category=[s.category]),l=this.getMediaNode(e,"category",!1),null!=l)for(h=0,m=l.length;m>h;h++)i=l[h],null!=i["#text"]&&""!==i["#text"]&&s.category.push(i["#text"]);if(null!=s.category&&s.category.sort(function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e>t?1:t>e?-1:0}),l=this.getMediaNode(e,"subTitle"),null!=l)for(null==s.track&&(s.track=[]),l instanceof Array||(l=[l]),g=0,y=l.length;y>g;g++)c=l[g],null!=c["@attributes"]&&s.track.push({src:c["@attributes"].href,type:c["@attributes"].type,kind:"captioning",lang:c["@attributes"].lang||"en"});i=e.category,i instanceof Array||(i=[i]),s.isLive="live"===e.temporalType||null!=i&&-1!==i.join(",").indexOf("live_stream"),s.temporalType=s.isLive?"live":"ondemand";for(o in e)u=e[o],o in s||(s.metadata[o]=u)}catch(E){Ct.error(E)}return s},i(an,Pi),an.NAME="FeedWrapper",an.prototype.url=null,an.prototype.data=null,an.prototype.updateData=!0,an.prototype.createFlashVars=function(e){null!=this.url&&""!==this.url&&(e.data_feed_url=escape(this.url))},an.prototype.listNotificationInterests=function(){return an.__super__.listNotificationInterests.apply(this,arguments).concat([Ao.READY,Ao.FEED_LOADED])},an.prototype.handleNotification=function(e){var t,i,n,o=this;switch(an.__super__.handleNotification.call(this,e),i=e.getName(),t=e.getBody(),i){case Ao.FEED_LOADED:this.updateData===!1?this.updateData=!0:this.data=JSON.parse(t),n="loaded";break;case Ao.READY:null!=this.data&&setTimeout(function(){o.setData(o.data)},25)}null!=n&&this.dispatchEvent(new fi(n,t))},an.prototype.setURL=function(e){return null!=e&&""!==e&&(this.url=e,this.player.video.playFile(this.url,this.player.getAutoplay())),e},an.prototype.getURL=function(){return this.url},an.prototype.setData=function(e){return this.data=e,this.updateData=!1,this.player.video.playFile(this.data,this.player.getAutoplay()),e},an.prototype.getData=function(){return this.data},i(rn,l),rn.NAME=l.NAME,rn.prototype.defaults={url:null,data:null},rn.prototype.feed=null,rn.prototype.helper=null,rn.prototype.setURL=function(e){var t=this;return this.data.url=e,this.helper.getFeed(e,function(e){t.sendNotification(xo.CHANGE_FEED,e)}),e},rn.prototype.getURL=function(){return this.data.url},rn.prototype.setFeedData=function(e){return this.data.data=e,this.feed=this.helper.createFeed(e),this.sendNotification(xo.FEED_CHANGED,this.feed),this.sendNotification(vo.DISPATCH_EVENT,new fi("loaded",e)),e},rn.prototype.getFeedData=function(){return this.data.data},rn.prototype.invoke=function(){null!=this.data.url&&""!==this.data.url?this.sendNotification(xo.LOAD_FEED,this.data.url):null!=this.data.data&&this.sendNotification(xo.CHANGE_FEED,this.data.data)},i(sn,jt),sn.NAME="MediaAnalyticsPlugin",sn.prototype.moduleName="mediaanalytics",sn.prototype.createModel=function(){this.registerProxy(new Oi(this.config))},sn.prototype.createController=function(){this.registerCommand(vo.MEDIA_CHANGE,Bi),this.registerCommand(Eo.BREAK_START,Gi),this.registerCommand(Eo.BREAK_END,Fi),this.registerCommand(Eo.AD_LOADED,zi),this.registerCommand(Eo.AD_STARTED,ji),this.registerCommand(Eo.AD_TIME_UPDATE,qi),this.registerCommand(Eo.AD_ENDED,Wi),this.registerCommand(Co.SET_DIMENSIONS,Yi)},sn.prototype.createAPI=function(){return new $i(this)},sn.prototype.onRegister=function(){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=this.config.config,sn.__super__.onRegister.call(this)},sn.prototype.listNotificationInterests=function(){return[vo.MEDIA_CHANGE,Eo.BREAK_START,Eo.BREAK_END,Eo.AD_LOADED,Eo.AD_STARTED,Eo.AD_TIME_UPDATE,Eo.AD_ENDED,Co.SET_DIMENSIONS]},ki.registerPlugin("mediaanalytics","html",sn),ki.registerPlugin("mediaanalytics","flash",Hi),i(ln,Pi),ln.NAME="InfoWrapper",ln.prototype.listNotificationInterests=function(){return[Ao.CREATE_FLASH_VARS,Ao.CREATE_XML,Ao.SHARE,Ao.SHARE_REQUEST]},ln.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m;switch(l=e.getName(),i=e.getBody(),l){case Ao.CREATE_FLASH_VARS:r=i.flashvars;break;case Ao.CREATE_XML:for(g=i.xml,t=g.getElementsByTagName("application")[0],h=g.getElementsByTagName("view")[0],a=g.getElementsByTagName("element"),f=0,m=a.length;m>f;f++)if(o=a[f],"infoOverlayAdvanced"===o.getAttribute("id")){s=o;break}if(null==h)return;null==s&&(s=g.createElement("element"),s.setAttribute("id","infoOverlayAdvanced"),s.setAttribute("displayStates","preplay,paused,ns,fs,mouseover"),h.insertBefore(s,h.childNodes[0])),n=g.createElement("data"),s.appendChild(n),null!=this.config.title&&(d=g.createElement("property"),d.setAttribute("key","title"),u=ot.createTextContent(g,this.config.title),d.appendChild(u),n.appendChild(d)),null!=this.config.description&&(d=g.createElement("property"),d.setAttribute("key","description"),u=ot.createTextContent(g,this.config.description),d.appendChild(u),n.appendChild(d)),null!=this.config.more&&(d=g.createElement("property"),d.setAttribute("key","more"),u=ot.createTextContent(g,this.config.more),d.appendChild(u),n.appendChild(d)),null!=this.config.less&&(d=g.createElement("property"),d.setAttribute("key","less"),u=ot.createTextContent(g,this.config.less),d.appendChild(u),n.appendChild(d)),null!=this.config.provider&&(c=g.createElement("property"),c.setAttribute("key","provider"),n.appendChild(c),null!=this.config.provider.name&&(d=g.createElement("property"),d.setAttribute("key","name"),u=ot.createTextContent(g,this.config.provider.name),d.appendChild(u),c.appendChild(d)),null!=this.config.provider.image&&(d=g.createElement("property"),d.setAttribute("key","image"),u=ot.createTextContent(g,this.config.provider.image),d.appendChild(u),c.appendChild(d)));break;case Ao.SHARE:case Ao.SHARE_REQUEST:p="share"}return null!=p?this.dispatchEvent(new fi(p,i)):void 0},ki.registerPlugin("info","flash",ln),i(dn,L),dn.NAME="PluginMediator",dn.prototype.initializeNotifier=function(e){dn.__super__.initializeNotifier.call(this,e),this.plugin=this.facade.retrieveProxy(l.NAME),this.media=this.facade.app.retrieveProxy(ui.NAME)},i(cn,H),cn.prototype.key="info",cn.NAME=l.NAME,cn.prototype.defaults={title:"#{media.title}",description:"#{media.description}",provider:{},more:"read more",less:"less"},un.prototype.id=null,un.prototype.startTime=null,un.prototype.endTime=null,un.prototype.text=null,un.prototype.html=null,un.prototype.align=null,i(pn,dn),pn.NAME="InfoMediator",pn.prototype.more=null,pn.prototype.less=null,pn.prototype.close=null,pn.prototype.title=null,pn.prototype.shortDescription=null,pn.prototype.icon=null,pn.prototype.provider=null,pn.prototype.onRegister=function(){this.classList.add("info"),this.title=document.createElement("div"),this.classList.add("info-title",this.title),this.viewComponent.appendChild(this.title),this.provider=document.createElement("div"),this.classList.add("info-provider",this.provider),this.viewComponent.appendChild(this.provider),this.shortDescription=document.createElement("div"),this.classList.add("info-short-description",this.shortDescription),this.viewComponent.appendChild(this.shortDescription),this.icon=document.createElement("img"),this.classList.add("info-icon",this.icon),this.viewComponent.appendChild(this.icon),this.dataChangedHandler(),pn.__super__.onRegister.call(this)},pn.prototype.listNotificationInterests=function(){return[vo.MEDIA_CHANGE]},pn.prototype.handleNotification=function(e){var t,i;switch(i=e.getName(),t=e.getBody(),i){case vo.MEDIA_CHANGE:this.dataChangedHandler()}},pn.prototype.moreClicked=function(){return this.classList.add("open")},pn.prototype.closeClicked=function(){return this.classList.remove("open")},pn.prototype.dataChangedHandler=function(){var e,t;return null!=this.plugin.value.title&&(this.title.textContent=this.plugin.value.title),null!=(null!=(t=this.plugin.value.provider)?t.image:void 0)&&(this.icon.src=this.plugin.value.provider.image),e=getComputedStyle(this.title),this.title.clientHeight>parseInt(e.lineHeight)?(this.classList.add("info-small"),void(this.shortDescription.innerHTML=this.provider.innerHTML="")):(this.classList.remove("info-small"),this.truncateDescription(this.plugin.value.description,this.plugin.value.more),void(this.provider.textContent=null!=this.plugin.value.provider.name?""+this.plugin.value.provider.name:""))},pn.prototype.truncateDescription=function(e){var t,i,n,o,a,r,s;if(i="...",o="",a=this.shortDescription,a.textContent="",null!=e)for(n=r=0,s=e.length;s>r;n=++r){if(t=e[n],a.textContent=o+t+i,a.scrollHeight>a.clientHeight){a.textContent=o+i;break}o+=t}},hn.prototype.parse=function(e,t){var i,n,o,a,r,s,l,d,c,u,p;for(t=t.replace(/\r/g,""),n=t.split("\n\n"),u=0,p=n.length;p>u;u++)i=n[u],s=i.split("\n"),r=s[0],c=s[1].match(/([0-9:\,]+)\s*-->\s*([0-9:\,]+)/).slice(1),l=Ei.flattenTimecode(c[0]),a=Ei.flattenTimecode(c[1]),d=s.slice(2),o=new un(l,a,"cue_"+r),o.html=d.join("<br />"),o.text=d.join("\n"),e.cues.push(o);return e},gn.prototype.parse=function(e,t){var i,n,o,a,r;return a=Array.prototype.slice.call(t.querySelectorAll("styling style")),a.forEach(function(t){var i,n,o;o="",n=t.getAttribute("id")||t.getAttribute("xml:id"),i=Array.prototype.slice.call(t.attributes),i.forEach(function(e){return"tts"===e.prefix?o+=Ei.formatStyleName(e.localName)+":"+e.nodeValue+";":void 0}),e.styles[n]=o}),o=Array.prototype.slice.call(t.querySelectorAll("body [style]")),o.forEach(function(t){var i;i=t.getAttribute("style"),t.setAttribute("style",e.styles[i])}),r=t.querySelector("tt"),n=r.getAttribute("lang")||r.getAttribute("xml:lang"),i=Array.prototype.slice.call(t.querySelectorAll("body p[begin]")),i.forEach(function(t,n){var o,a,r,s,l;s=t.getAttribute("begin"),t.removeAttribute("begin"),null!=t.getAttribute("end")?(r=t.getAttribute("end"),t.removeAttribute("end")):null!=i[n+1]&&(r=i[n+1].getAttribute("begin")),a=new un(Ei.flattenTimecode(s),Ei.flattenTimecode(r),"cue_"+n),o=t.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"),null!=o&&(a.align="center"===o?"middle":o,t.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign")),l=ot.serialize(t),l=l.replace(/\s*xmlns="[^"]*"/,""),a.html=l,l=l.replace(/^<p[^>]*>/,""),l=l.replace(/<\/p>$/,""),l=l.replace(/<br\/>/,"\n"),l=l.replace(/<span style="([^"]*)"/,"<c.$1"),l=l.replace(/<\/span>/,"</c>"),a.text=l,e.cues.push(a)
}),e},i(fn,jt),fn.NAME="FeedPlugin",fn.prototype.moduleName="feed",fn.prototype.createModel=function(){this.registerProxy(new rn(this.config))},fn.prototype.createController=function(){fn.__super__.createController.call(this),this.registerCommand(vo.READY,tn),this.registerCommand(xo.LOAD_FEED,Ji),this.registerCommand(xo.CHANGE_FEED,Qi),this.registerCommand(xo.FEED_CHANGED,en)},fn.prototype.createAPI=function(){return new nn(this)},fn.prototype.listNotificationInterests=function(){return fn.__super__.listNotificationInterests.call(this).concat([vo.READY])},fn.prototype.listNotificationPublications=function(){var e,t;return fn.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in xo)t=xo[e],i.push(t);return i}())},ki.registerPlugin("feed","html",fn),ki.registerPlugin("feed","flash",an),i(mn,Pi),mn.NAME="CaptioningWrapper",mn.prototype.hidden=!0,mn.prototype.listNotificationInterests=function(){return[Ao.CREATE_FLASH_VARS,Ao.CREATE_XML,vo.MEDIA_CHANGE,Ao.CAPTIONING_REQUEST]},mn.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c,u,p;switch(r=e.getName(),i=e.getBody(),r){case Ao.CAPTIONING_REQUEST:this.setHidden(!this.getHidden()),this.dispatchEvent(new fi("visibilitychange",i.enabled));break;case Ao.CREATE_XML:c=i.xml,l=null!=(u=this.config.flash)?u.subply:void 0,null!=l&&(null!=l.timeMethod&&(s=c.getElementsByTagName("player")[0],s.setAttribute("subply_time_method",l.timeMethod)),null!=l.plugin&&(t=c.getElementsByTagName("application")[0],l=c.getElementsByTagName("subply")[0],null==l&&(l=c.createElement("subply"),t.appendChild(l)),this.createProperty(c,"SUBPLY_URL",this.config.flash.subply.plugin,l)));break;case Ao.CREATE_FLASH_VARS:o=i.flashvars,n=i.config,null!=(null!=(p=n.media)?p.track:void 0)&&(d=Ei.selectTrack(n.media.track,"captions"),null!=d.src&&""!==d.src&&(o.caption_url=d.src),o.caption_type=null!=d.type?encodeURIComponent(d.type):"application/ttml+xml");break;case vo.MEDIA_CHANGE:a=i,null!=a.track&&(d=Ei.selectTrack(a.track,"captions"),null!=(null!=d?d.src:void 0)&&""!==d.src&&(a.captioningUrl=d.src),a.captioningType=d.type||"application/ttml+xml")}},mn.prototype.getHidden=function(){return this.hidden},mn.prototype.setHidden=function(e){return this.hidden=e,e},ki.registerPlugin("captioning","flash",mn),i(yn,dn),yn.NAME="CaptioningMediator",yn.prototype.captionButton=null,yn.prototype.onRegister=function(){var e=this;this.classList.add("captioning-overlay"),this.captionButton=document.createElement("div"),this.classList.add("caption-button",this.captionButton),this.captionButton.textContent=this.localizationManager.getString(V.MSG_CC),ci.create(this.captionButton,ci.CLICK,function(t){return t.stopImmediatePropagation(),"embedded"===e.plugin.getTrack().type?e.sendNotification(Mo.VISIBILITY_CHANGE,e.plugin.getHidden()):e.sendNotification(Mo.SETTINGS_VISIBILITY_CHANGE,e.plugin.getHidden()),!1}),this.sendNotification(vo.ADD_CONTROL,this.captionButton),yn.__super__.onRegister.call(this)},yn.prototype.listNotificationInterests=function(){return[Mo.VISIBILITY_CHANGE,Mo.ENABLED,Mo.TRACK_SELECTED]},yn.prototype.handleNotification=function(e){var t,i,n;switch(t=e.getBody(),i=t?vo.ADD_APPLICATION_STATE:vo.REMOVE_APPLICATION_STATE,e.getName()){case Mo.TRACK_SELECTED:n="cc-embedded",i="embedded"===t.type?vo.ADD_APPLICATION_STATE:vo.REMOVE_APPLICATION_STATE;break;case Mo.VISIBILITY_CHANGE:n="cc-active";break;case Mo.ENABLED:n="cc-enabled"}this.sendNotification(i,n)},i(vn,M),vn.NAME="CaptioningHTMLMediator",vn.prototype.captioningObject={"default":{fontFamily:"Arial",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"Arial",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"Arial",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"Times New Roman",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"Times New Roman",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null},vn.prototype.captionText=null,vn.prototype.settingsUiVisible=!1,vn.prototype.captionningStyle=null,vn.prototype.swatchColorCurr=null,vn.prototype.swatchOpacityCurr=null,vn.prototype.colorPicker=null,vn.prototype.colorPickerOpacity=null,vn.prototype.advancedSettingContainer=null,vn.prototype.list={font:null,language:null,edge:null,size:null,scroll:null},vn.prototype.picker={color:null,background:null,edge:null,window:null},vn.prototype.onRegister=function(){var e,t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m,y,v,_,E,A,C,b,P=this;for(this.captionText=document.createElement("div"),this.classList.add("caption-text",this.captionText),this.viewComponent.appendChild(this.captionText),o=document.createElement("div"),this.classList.add("captioning-settings",o),_=document.createElement("div"),this.classList.add("captioning-titlebar",_),E=document.createElement("span"),this.classList.add("captioning-title",E),E.innerHTML="Caption Settings",_.appendChild(E),r=document.createElement("button"),this.classList.add("captioning-titlebar-close",r),r.innerHTML="X",_.appendChild(r),ci.create(r,ci.CLICK,function(e){return e.stopImmediatePropagation(),P.sendNotification(Mo.SETTINGS_VISIBILITY_CHANGE,P.settingsUiVisible),!1}),o.appendChild(_),i=document.createElement("div"),this.classList.add("captioning-row",i),n=document.createElement("span"),this.classList.add("captioning-label",n),n.innerHTML="Language:",i.appendChild(n),this.list.language=document.createElement("select"),this.classList.add("captioning-dropdown",this.list.language),this.languageListPopulate(),ci.create(this.list.language,"change",function(e){var t;return e.stopImmediatePropagation(),t=0!==e.target.selectedIndex,P.sendNotification(Mo.VISIBILITY_CHANGE,t),t&&P.facade.moduleAPI.setTrack(P.facade.moduleAPI.selectTrackByIndex(e.target.selectedIndex-1)),!1}),i.appendChild(this.list.language),n=document.createElement("span"),this.classList.add("captioning-label",n),n.innerHTML="Presets :",i.appendChild(n),u=document.createElement("div"),this.classList.add("captioning-preset",u),this.classList.add("captioning-preset1",u),u.innerHTML="Aa",p=document.createElement("div"),this.classList.add("captioning-preset",p),this.classList.add("captioning-preset2",p),p.innerHTML="Aa",h=document.createElement("div"),this.classList.add("captioning-preset",h),this.classList.add("captioning-preset3",h),h.innerHTML="Aa",g=document.createElement("div"),this.classList.add("captioning-preset",g),this.classList.add("captioning-preset4",g),g.innerHTML="Aa",ci.create(u,ci.CLICK,function(e){return e.stopImmediatePropagation(),P.captioningObject.selected=P.cloneObject(P.captioningObject.preset1),P.applyCaptioningStyle(),!1}),ci.create(p,ci.CLICK,function(e){return e.stopImmediatePropagation(),P.captioningObject.selected=P.cloneObject(P.captioningObject.preset2),P.applyCaptioningStyle(),!1}),ci.create(h,ci.CLICK,function(e){return e.stopImmediatePropagation(),P.captioningObject.selected=P.cloneObject(P.captioningObject.preset3),P.applyCaptioningStyle(),!1}),ci.create(g,ci.CLICK,function(e){return e.stopImmediatePropagation(),P.captioningObject.selected=P.cloneObject(P.captioningObject.preset4),P.applyCaptioningStyle(),!1}),i.appendChild(u),i.appendChild(p),i.appendChild(h),i.appendChild(g),o.appendChild(i),this.advancedSettingContainer=document.createElement("div"),i=document.createElement("div"),this.classList.add("captioning-row",i),n=document.createElement("span"),this.classList.add("captioning-label",n),n.innerHTML="Font:",i.appendChild(n),this.list.font=document.createElement("select"),this.classList.add("captioning-dropdown",this.list.font),d=document.createElement("option"),d.innerHTML="Arial",this.list.font.appendChild(d),d=document.createElement("option"),d.innerHTML="Times New Roman",this.list.font.appendChild(d),d=document.createElement("option"),d.innerHTML="Courier",this.list.font.appendChild(d),d=document.createElement("option"),d.innerHTML="Georgia",this.list.font.appendChild(d),d=document.createElement("option"),d.innerHTML="Helvetica",this.list.font.appendChild(d),d=document.createElement("option"),d.innerHTML="Verdana",this.list.font.appendChild(d),d=document.createElement("option"),d.innerHTML="Impact",this.list.font.appendChild(d),d=document.createElement("option"),d.innerHTML="Comic Sans Serif",this.list.font.appendChild(d),ci.create(this.list.font,"change",function(e){return e.stopImmediatePropagation(),P.captioningObject.selected.fontFamily=e.target.value,P.applyCaptioningStyle(!1),!1}),i.appendChild(this.list.font),n=document.createElement("span"),this.classList.add("captioning-label",n),n.innerHTML="Edge:",i.appendChild(n),this.list.edge=document.createElement("select"),this.classList.add("captioning-dropdown",this.list.edge),d=document.createElement("option"),d.innerHTML="none",d.value="none",this.list.edge.appendChild(d),d=document.createElement("option"),d.innerHTML="Right drop shadow",d.value="text-shadow: 3px 3px 2px",this.list.edge.appendChild(d),d=document.createElement("option"),d.innerHTML="Left drop shadow",d.value="text-shadow: -3px 3px 2px",this.list.edge.appendChild(d),d=document.createElement("option"),d.innerHTML="Uniform",d.value="text-shadow: 0px 0px 4px",this.list.edge.appendChild(d),d=document.createElement("option"),d.innerHTML="Raised",d.value="text-shadow: 0px 1px 1px",this.list.edge.appendChild(d),d=document.createElement("option"),d.innerHTML="Depressed",d.value="text-shadow: 0px 1px 0px",this.list.edge.appendChild(d),ci.create(this.list.edge,"change",function(e){return e.stopImmediatePropagation(),P.captioningObject.selected.edgeType=e.target.value,P.applyCaptioningStyle(!1),!1}),i.appendChild(this.list.edge),this.advancedSettingContainer.appendChild(i),i=document.createElement("div"),this.classList.add("captioning-row",i),n=document.createElement("span"),this.classList.add("captioning-label",n),n.innerHTML="Size :",i.appendChild(n),this.list.size=document.createElement("select"),this.classList.add("captioning-dropdown",this.list.size),d=document.createElement("option"),d.innerHTML="Small",d.value=".8em",this.list.size.appendChild(d),d=document.createElement("option"),d.innerHTML="Medium",d.value="1.3em",this.list.size.appendChild(d),d=document.createElement("option"),d.innerHTML="Large",d.value="2.3em",this.list.size.appendChild(d),this.list.size.selectedIndex=1,i.appendChild(this.list.size),ci.create(this.list.size,"change",function(e){return e.stopImmediatePropagation(),P.captioningObject.selected.size=e.target.value,P.applyCaptioningStyle(!1),!1}),n=document.createElement("span"),this.classList.add("captioning-label",n),n.innerHTML="Scroll :",i.appendChild(n),this.list.scroll=document.createElement("select"),this.classList.add("captioning-dropdown",this.list.scroll),d=document.createElement("option"),d.innerHTML="Roll up",this.list.scroll.appendChild(d),d=document.createElement("option"),d.innerHTML="Roll down",this.list.scroll.appendChild(d),ci.create(this.list.scroll,"change",function(e){return e.stopImmediatePropagation(),!1}),i.appendChild(this.list.scroll),this.advancedSettingContainer.appendChild(i),i=document.createElement("div"),this.classList.add("captioning-row",i),n=document.createElement("span"),this.classList.add("captioning-label-small",n),n.innerHTML="Color :",this.picker.color=document.createElement("div"),this.classList.add("captioning-color-picker",this.picker.color),this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,ci.create(this.picker.color,ci.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),P.colorPicker.style.display="block"===P.colorPicker.style.display?"none":"block","block"===P.colorPicker.style.display&&(null!=(i=P.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),P.colorPicker.style.left="152px",P.colorPicker.name="fontColor",P.captioningObject.instance=P.picker.color,-1!==P.picker.color.style.backgroundColor.indexOf("rgba")&&(t=P.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),P.colorPickerOpacity.value=null!=t?t:1),!1}),i.appendChild(n),i.appendChild(this.picker.color),n=document.createElement("span"),this.classList.add("captioning-label-small",n),n.innerHTML="Background :",this.picker.background=document.createElement("div"),this.classList.add("captioning-color-picker",this.picker.background),this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,ci.create(this.picker.background,ci.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),P.colorPicker.style.display="block"===P.colorPicker.style.display?"none":"block","block"===P.colorPicker.style.display&&(null!=(i=P.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),P.colorPicker.style.left="264px",P.colorPicker.name="backgroundColor",P.captioningObject.instance=P.picker.background,-1!==P.picker.background.style.backgroundColor.indexOf("rgba")&&(t=P.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),P.colorPickerOpacity.value=null!=t?t:1),!1}),i.appendChild(n),i.appendChild(this.picker.background),n=document.createElement("span"),this.classList.add("captioning-label-small",n),n.innerHTML="Edge :",this.picker.edge=document.createElement("div"),this.classList.add("captioning-color-picker",this.picker.edge),this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,ci.create(this.picker.edge,ci.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),P.colorPicker.style.display="block"===P.colorPicker.style.display?"none":"block","block"===P.colorPicker.style.display&&(null!=(i=P.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),P.colorPicker.style.left="212px",P.colorPicker.name="edgeColor",P.captioningObject.instance=P.picker.edge,-1!==P.picker.edge.style.backgroundColor.indexOf("rgba")&&(t=P.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),P.colorPickerOpacity.value=null!=t?t:1),!1}),i.appendChild(n),i.appendChild(this.picker.edge),n=document.createElement("span"),this.classList.add("captioning-label-small",n),n.innerHTML="Window :",this.picker.window=document.createElement("div"),this.classList.add("captioning-color-picker",this.picker.window),this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor,ci.create(this.picker.window,ci.CLICK,function(e){var t,i;return e.stopImmediatePropagation(),P.colorPicker.style.display="block"===P.colorPicker.style.display?"none":"block","block"===P.colorPicker.style.display&&(null!=(i=P.swatchColorCurr)&&(i.style.borderColor="rgba(0,0,0,0.3)"),P.colorPicker.style.left="300px",P.colorPicker.name="windowColor",P.captioningObject.instance=P.picker.window,-1!==P.picker.window.style.backgroundColor.indexOf("rgba")&&(t=P.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),P.colorPickerOpacity.value=null!=t?t:1),!1}),i.appendChild(n),i.appendChild(this.picker.window),this.advancedSettingContainer.appendChild(i),this.classList.add("captioning-advanced-container",this.advancedSettingContainer),o.appendChild(this.advancedSettingContainer),f=document.createElement("div"),this.classList.add("caption-text",f),this.classList.add("caption-text-preview",f),m=document.createElement("p"),m.innerHTML="Lorem ipsum dolor sit amet",f.appendChild(m),o.appendChild(f),i=document.createElement("div"),this.classList.add("captioning-footer-container",i),e=document.createElement("button"),this.classList.add("captioning-footer-button",e),e.innerHTML="Apply",t=document.createElement("button"),this.classList.add("captioning-footer-button",t),t.innerHTML="Cancel",y=document.createElement("button"),this.classList.add("captioning-footer-button",y),y.innerHTML="Reset",A=document.createElement("button"),this.classList.add("captioning-advanced-button",A),A.innerHTML="Show Advanced Settings",i.appendChild(e),i.appendChild(t),i.appendChild(y),this.facade.app.getViewComponent().clientWidth>450&&i.appendChild(A),ci.create(e,ci.CLICK,function(e){return e.stopImmediatePropagation(),localStorage.setItem(No.PREFIX+"captioningDefault",JSON.stringify(P.captioningObject.selected)),P.sendNotification(Mo.SETTINGS_VISIBILITY_CHANGE,P.settingsUiVisible),P.applyCaptioningStyle(!1,!0),!1}),ci.create(t,ci.CLICK,function(e){return e.stopImmediatePropagation(),P.sendNotification(Mo.SETTINGS_VISIBILITY_CHANGE,P.settingsUiVisible),!1}),ci.create(y,ci.CLICK,function(e){return e.stopImmediatePropagation(),P.applyCaptioningStyle(!0),!1}),ci.create(A,ci.CLICK,function(e){return e.stopImmediatePropagation(),"block"===P.advancedSettingContainer.style.display?(e.target.innerHTML="Show Advanced Settings",P.advancedSettingContainer.style.display="none"):(e.target.innerHTML="Hide Advanced Settings",P.advancedSettingContainer.style.display="block"),!1}),o.appendChild(i),this.viewComponent.appendChild(o),this.captionningStyle=document.createElement("style"),this.captionningStyle.type="text/css",document.getElementsByTagName("head")[0].appendChild(this.captionningStyle),l=["#000000","#660000","#990000","#ff0000","#000066","#660066","#990066","#ff0066","#006600","#666600","#996600","#ff6600","#006666","#666666","#996666","#ff6666","#009900","#669966","#999900","#ff9900","#009966","#669966","#999966","#ff9966","#00ff00","#66ff00","#99ff00","#ffff00","#00ff66","#66ff66","#99ff66","#ffff66","#000099","#660099","#990099","#ff0099","#0000ff","#6600ff","#9900ff","#ff00ff","#006699","#666699","#996699","#ff6699","#0066ff","#6666ff","#9966ff","#ff66ff","#009999","#669999","#999999","#ff9999","#0099ff","#6699ff","#9999ff","#ff99ff","#0099ff","#66ff99","#99ff99","#ffff99","#00ffff","#66ffff","#99ffff","#ffffff"],this.colorPicker=document.createElement("div"),this.classList.add("colorpicker-palette",this.colorPicker),v=document.createElement("div"),this.classList.add("colorpicker-swatch",v),v.innerHTML="&nbsp;",C=0,b=l.length;b>C;C++)s=l[C],v.style.backgroundColor=s,a=v.cloneNode(),ci.create(a,ci.CLICK,function(e){return e.stopImmediatePropagation(),null!==P.swatchColorCurr&&(P.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)"),P.swatchColorCurr=e.target,P.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)",P.captioningObject.instance.style.backgroundColor=P.captioningObject.selected[P.colorPicker.name]=P.toRGBA(e.target.style.backgroundColor),P.applyCaptioningStyle(!1),!1}),this.colorPicker.appendChild(a);this.colorPickerOpacity=document.createElement("input"),this.colorPickerOpacity.type="range",this.classList.add("colorpicker-slider",this.colorPickerOpacity),this.colorPickerOpacity.min=0,this.colorPickerOpacity.max=1,this.colorPickerOpacity.step=.1,this.colorPickerOpacity.value=1,ci.create(this.colorPickerOpacity,"change",function(e){return e.stopImmediatePropagation(),P.captioningObject.instance.style.backgroundColor=P.captioningObject.selected[P.colorPicker.name]=P.toRGBA(P.captioningObject.instance.style.backgroundColor),P.applyCaptioningStyle(!1),!1}),c=document.createElement("span"),this.classList.add("opacity-label",c),c.innerHTML="Opacity: ",this.colorPicker.appendChild(c),this.colorPicker.appendChild(this.colorPickerOpacity),this.swatchOpacityCurr=this.colorPickerOpacity,this.viewComponent.appendChild(this.colorPicker),ci.create(document,ci.CLICK,function(e){return e.stopImmediatePropagation(),"akamai-colorpicker-palette"!==e.target.className&&"akamai-opacity-label"!==e.target.className&&"akamai-colorpicker-slider"!==e.target.className&&"none"!==P.colorPicker.style.display&&(P.colorPicker.style.display="none"),!1}),null!=localStorage.getItem(No.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(No.PREFIX+"captioningDefault")),this.applyCaptioningStyle(!1)):this.applyCaptioningStyle(!0),vn.__super__.onRegister.call(this)},vn.prototype.toRGBA=function(e){var t,i;return i=e.replace(/^rgba?\(|\s+|\)$/g,"").split(","),t="rgba("+i[0]+","+i[1]+","+i[2]+","+this.swatchOpacityCurr.value+")"},vn.prototype.languageListPopulate=function(){var e,t,i,n,o,a;for(n=this.facade.moduleAPI.getTracks(),this.list.language.innerHTML="",t=document.createElement("option"),t.innerHTML="None",this.list.language.appendChild(t),o=0,a=n.length;a>o;o++)i=n[o],t=document.createElement("option"),e=i.language,e=this.facade.app.retrieveProxy($t.NAME).getLanguageString(e),t.innerHTML=e,null!=e&&""!==e&&this.list.language.appendChild(t)},vn.prototype.cloneObject=function(e){var t,i;t={};for(i in e)t[i]=e[i];return t},vn.prototype.applyCaptioningStyle=function(e,t){var i,n,o,a,r,s;null==e&&(e=!1),null==t&&(t=!1),e?(this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]),this.list.font.value=this.captioningObject["default"].fontFamily,this.list.edge.value=null!=this.captioningObject["default"].edgeType?this.captioningObject["default"].edgeType:"none",this.list.size.value=this.captioningObject["default"].size,this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor):(null!=this.captioningObject.selected.fontFamily&&(this.list.font.value=this.captioningObject.selected.fontFamily),this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:"none",null!=this.captioningObject.selected.size&&(this.list.size.value=this.captioningObject.selected.size),this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),null!=this.captioningObject.selected.edgeColor&&(this.picker.edge.style.backgroundColor=this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor)),a="font-family: "+(e?this.captioningObject["default"].fontFamily:this.list.font.value)+" ;",o=(e?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+";",r="font-size: "+(e?this.captioningObject["default"].size:this.list.size.value)+" ;",n="color: "+(e?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" ;",i="background-color: "+(e?this.captioningObject["default"].backgroundColor:this.picker.background.style.backgroundColor)+" ;",s="background-color: "+(e?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+" ;",this.captionningStyle.innerHTML=t?this.captioningObject.appliedStyleText=".akamai-caption-text { "+a+r+o+s+" }.akamai-caption-text p { "+n+i+" }":this.captioningObject.appliedStyleText+".akamai-caption-text-preview { "+a+r+o+s+" }.akamai-caption-text-preview p { "+n+i+" }"},vn.prototype.listNotificationInterests=function(){return[Mo.CUE_CHANGE,Mo.SETTINGS_VISIBILITY_CHANGE]},vn.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l;switch(o=e.getName(),t=e.getBody(),o){case Mo.CUE_CHANGE:for(i="",s=0,l=t.length;l>s;s++)n=t[s],i+=n.html;this.captionText.innerHTML=i;break;case Mo.SETTINGS_VISIBILITY_CHANGE:this.settingsUiVisible=!this.settingsUiVisible,this.settingsUiVisible&&1===this.list.language.length&&this.languageListPopulate(),a=this.settingsUiVisible?vo.ADD_APPLICATION_STATE:vo.REMOVE_APPLICATION_STATE,r="cc-setting-active",this.sendNotification(a,r)}},i(_n,puremvc.Proxy),_n.NAME="LiveCaptionProxy",_n.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1e3},_n.prototype.caption=null,_n.prototype.head=null,_n.prototype.script=null,_n.prototype.timeout=null,_n.prototype.getURL=function(){return this.data.url},_n.prototype.setURL=function(e){return this.data.url=e,e},_n.prototype.start=function(){this.send()},_n.prototype.poll=function(){var e,t=this;e=setTimeout(function(){t.send()},this.data.interval||1e3)},_n.prototype.send=function(){null!=this.script&&this.head.removeChild(this.script),this.script=document.createElement("script"),this.script.src=this.data.base+this.data.url+".js?nocache="+Date.now(),this.head.appendChild(this.script)},_n.prototype.stop=function(){clearTimeout(timeout)},_n.prototype.parse=function(e){var t,i,n,o,a;if(e.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=e.Ticks)){for(this.caption=new un(Ei.flattenTimecode(e.From),Ei.flattenTimecode(e.To),e.Ticks),this.caption.text=e.Text,t="",a=e.Text.split("\n"),n=0,o=a.length;o>n;n++)i=a[n],""!==t&&(t+="<br />"),t+="<span>"+i+"</span>";return this.caption.html=t,this.sendNotification(Mo.CUE_CHANGE,[this.caption]),this.caption}},i(En,M),En.NAME="CaptioningNativeMediator",En.prototype.video=null,En.prototype.index=-1,En.prototype.plugin=null,En.prototype.onRegister=function(){this.video=this.facade.app.video,this.plugin=this.facade.retrieveProxy(Nn.NAME)},En.prototype.listNotificationInterests=function(){return[Mo.VISIBILITY_CHANGE,Mo.TRACK_SELECTED,Mo.TRACKS_LOADED]},En.prototype.handleNotification=function(e){var t,i,n,o,a,r,s,l,d,c;switch(t=e.getBody(),e.getName()){case Mo.TRACKS_LOADED:for(r=0,l=t.length;l>r;r++)if(a=t[r],"captions"===a.kind||"subtitles"===a.kind)for(n=this.video.addTextTrack(a.kind,a.label,a.srclang),c=a.cues,s=0,d=c.length;d>s;s++)i=c[s],o=new TextTrackCue(i.startTime,i.endTime,i.text),i.id=i.id,n.addCue(o);break;case Mo.TRACK_SELECTED:this.index>-1&&(this.video.textTracks[this.index].mode="hidden"),this.index=this.plugin.getTracks().indexOf(t),this.plugin.getHidden()||(this.video.textTracks[this.index].mode="showing");break;case Mo.VISIBILITY_CHANGE:this.video.textTracks[this.index].mode=this.plugin.getHidden()?"hidden":"showing"}},i(An,puremvc.SimpleCommand),An.prototype.execute=function(e){var t,i,o,a,r,s,l,d,c,u;if(l=e.getBody(),s=this.facade.retrieveProxy(Nn.NAME),d=s.getTrack(),null!=d){for(t=d.activeCues,a=d.cues,i=!1,c=0,u=a.length;u>c;c++)o=a[c],l>=o.startTime&&l<o.endTime?n.call(t,o)>=0||(t.push(o),i=!0):(r=t.indexOf(o),-1!==r&&(t.splice(r,1),i=!0));i===!0&&this.sendNotification(Mo.CUE_CHANGE,t)}},i(Cn,puremvc.SimpleCommand),Cn.prototype.execute=function(e){var t,i;t=e.getBody(),i=this.facade.retrieveProxy(Nn.NAME),null!=t.track&&i.setTracks(t.track),null!=t.track&&this.sendNotification(Mo.ENABLED,!0)},i(bn,puremvc.SimpleCommand),bn.prototype.execute=function(e){var t;t=this.facade.retrieveProxy(Nn.NAME),t.setHidden(!e.getBody())},i(Pn,puremvc.SimpleCommand),Pn.prototype.execute=function(){var e,t,i;this.facade.logger.debug("CaptioningStartedCommand"),e=this.facade.retrieveProxy(Nn.NAME),t=e.getTrack(),null==t&&(null!=(i=e.getTracks())?i.length:void 0)>0&&(t=e.autoSelectTrack()),(null!=t?t.isLive:void 0)===!0&&(this.facade.removeCommand(vo.TIME_UPDATE),e=this.facade.retrieveProxy(_n.NAME),null==e&&(e=new _n,this.facade.registerProxy(e)),e.setURL(t.src),e.start())},CaptionParsers={"application/ttml+xml":new gn,"application/x-subrip":new hn};var Mo={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningEnabled",TRACKS_LOADED:"captioningTracksLoaded",TRACK_SELECTED:"captioningTrackSelected",CUE_CHANGE:"captioningCueChange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility"};Tn.prototype.kind=null,Tn.prototype.src=null,Tn.prototype.language=null,Tn.prototype.cues=null,Tn.prototype.label=null,Tn.prototype.activeCues=null,Tn.prototype.type=null,Tn.prototype.styles=null,Tn.prototype.isLive=!1;var Lo={REGISTER_FEATURE:"registerfeature"};i(Nn,J),Nn.NAME=l.NAME,Nn.prototype.defaults={},Nn.prototype.hidden=!0,Nn.prototype.tracks=null,Nn.prototype.track=null,Nn.prototype.activeCaptions=null,Nn.prototype.captions=null,Nn.prototype.useNative=function(){var e;return null!=this.facade.app.video.textTracks&&3===(null!=(e=window.TextTrackCue)?e.length:void 0)},Nn.prototype.getTracks=function(){return this.tracks},Nn.prototype.setTracks=function(e){var t,i,n,o,a,r,s,l=this;for(this.tracks=[],this.track=null,t=e.length,n=0,a=function(){n++,n===t&&(l.sendNotification(Mo.TRACKS_LOADED,l.tracks),l.autoSelectTrack())},r=0,s=e.length;s>r;r++)i=e[r],o=new Tn(i,a),this.tracks.push(o);return e},Nn.prototype.getTrack=function(){return this.track},Nn.prototype.setTrack=function(e){return this.track=e,this.captions=this.track.cues,this.activeCaptions=[],this.sendNotification(Mo.TRACK_SELECTED,this.track),e},Nn.prototype.selectTrackByIndex=function(e){var t;return e>=0&&e<this.tracks.length&&(t=this.tracks[e],this.setTrack(t)),t},Nn.prototype.selectTrackByLanguage=function(e){var t,i,n,o,a;for(a=this.tracks,n=0,o=a.length;o>n;n++)if(t=a[n],t.language===e){i=t;break}return null!=i&&this.setTrack(i),i},Nn.prototype.getHidden=function(){return this.hidden},Nn.prototype.setHidden=function(e){return this.hidden=e,e},Nn.prototype.autoSelectTrack=function(){var e,t,i;return e=null!=(i=this.facade.app.retrieveProxy($t.NAME))?i.getLanguage():void 0,null!=e&&(e=e.split("-").shift(),t=this.selectTrackByLanguage(e)),null==t&&(t=this.tracks[0],this.setTrack(t)),t},i(Sn,jt),Sn.NAME="InfoPlugin",Sn.prototype.moduleName="info",Sn.prototype.createModel=function(){this.registerProxy(new cn(this.config))},Sn.prototype.createView=function(){this.registerMediator(new pn)},Sn.prototype.listNotificationInterests=function(){return[vo.MEDIA_CHANGE]},ki.registerPlugin("info","html",Sn),ki.registerPlugin("info","external",Sn),i(wn,Ft),wn.prototype.getHidden=function(){},wn.prototype.setHidden=function(){},wn.prototype.getTracks=function(){},wn.prototype.getTrack=function(){},wn.prototype.setTrack=function(){},wn.prototype.selectTrackByIndex=function(){},wn.prototype.selectTrackByLanguage=function(){},i(In,jt),In.NAME="Feature",In.prototype.feature=null,In.prototype.getFeature=function(){return this.feature},In.prototype.registerFeature=function(){null!=this.getFeature()&&this.app.sendNotification(Lo.REGISTER_FEATURE,this)},In.prototype.onRegister=function(){this.registerFeature(),In.__super__.onRegister.call(this)},In.prototype.listNotificationPublications=function(){return In.__super__.listNotificationPublications.call(this).concat([Lo.REGISTER_FEATURE])},i(xn,Pi),xn.NAME="ShareWrapper",xn.prototype.createFlashVars=function(e){return e.share_mode=2,e},xn.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c,u;for(t=e.getElementsByTagName("application")[0],d=e.getElementsByTagName("view")[0],o=e.getElementsByTagName("element"),c=0,u=o.length;u>c;c++)switch(n=o[c],r=n.getAttribute("id")){case"controls":i=n;break;case"shareBtn":s=n;break;case"facebookBtn":a=n;break;case"twitterBtn":l=n}return null!=i?(null==s&&(s=e.createElement("element"),s.setAttribute("id","shareBtn"),i.appendChild(s)),null==a&&this.config.facebook===!0&&(a=e.createElement("element"),a.setAttribute("id","facebookBtn"),i.appendChild(a)),null==l&&this.config.twitter===!0&&(l=e.createElement("element"),l.setAttribute("id","twitterBtn"),i.appendChild(l)),e):void 0},xn.prototype.listNotificationInterests=function(){return[Ao.SHARE,Ao.SHARE_REQUEST]},xn.prototype.handleNotification=function(e){var t,i,n;switch(xn.__super__.handleNotification.call(this,e),i=e.getName(),t=e.getBody(),i){case Ao.SHARE:case Ao.SHARE_REQUEST:n="share"}null!=n&&this.dispatchEvent(new fi(n,t))},ki.registerPlugin("share","flash",xn),i(Mn,dn),Mn.NAME="ShareMediator",Mn.prototype.shareControl=null,Mn.prototype.shareButton=null,Mn.prototype.facebook=null,Mn.prototype.twitter=null,Mn.prototype.shareSeparator=null,Mn.prototype.embed=null,Mn.prototype.onRegister=function(){var e=this;
this.sendNotification(vo.ADD_APPLICATION_STATE,"share"),this.shareControl=document.createElement("div"),this.classList.add("share-control",this.shareControl),this.shareSeparator=document.createElement("div"),this.classList.add("share-separator",this.shareSeparator),this.shareControl.appendChild(this.shareSeparator),this.shareButton=document.createElement("div"),this.classList.add("share-button",this.shareButton),ci.create(this.shareButton,ci.CLICK,function(t){return t.stopImmediatePropagation(),e.clickHandler("share"),!1}),this.shareControl.appendChild(this.shareButton),this.plugin.getFacebook()===!0&&(this.facebook=document.createElement("div"),this.classList.add("share-facebook-button",this.facebook),ci.create(this.facebook,ci.CLICK,function(t){return t.stopImmediatePropagation(),e.clickHandler("facebook"),!1}),this.shareControl.appendChild(this.facebook)),this.plugin.getTwitter()===!0&&(this.twitter=document.createElement("div"),this.classList.add("share-twitter-button",this.twitter),ci.create(this.twitter,ci.CLICK,function(t){return t.stopImmediatePropagation(),e.clickHandler("twitter"),!1}),this.shareControl.appendChild(this.twitter)),this.sendNotification(vo.ADD_CONTROL,this.shareControl),Mn.__super__.onRegister.call(this)},Mn.prototype.clickHandler=function(e){this.sendNotification(vo.DISPATCH_EVENT,new fi("share",{provider:e,link:this.plugin.getLink(),embed:this.plugin.getEmbed()}))},Mn.prototype.listNotificationInterests=function(){return[vo.MEDIA_CHANGE]},Mn.prototype.handleNotification=function(e){var t,i,n;switch(n=e.getName(),t=e.getBody(),n){case vo.MEDIA_CHANGE:i=t,null!=i.embed?this.sendNotification(vo.ADD_APPLICATION_STATE,"share"):this.sendNotification(vo.REMOVE_APPLICATION_STATE,"share")}},i(Ln,J),Ln.NAME=l.NAME,Ln.prototype.defaults={facebook:!1,twitter:!1},Ln.prototype.loaded=!0,Ln.prototype.link=null,Ln.prototype.embed=null,Ln.prototype.getEmbed=function(){return this.embed},Ln.prototype.setEmbed=function(e){return this.embed=e},Ln.prototype.getLink=function(){return this.link},Ln.prototype.setLink=function(e){return this.link=e},Ln.prototype.getFacebook=function(){return this.value.facebook},Ln.prototype.setFacebook=function(e){return this.data.facebook=e},Ln.prototype.getTwitter=function(){return this.value.twitter},Ln.prototype.setTwitter=function(e){return this.data.twitter=e},i(Dn,puremvc.SimpleCommand),Dn.prototype.execute=function(e){var t,i;this.facade.logger.debug("ShareMediaChangeCommand"),t=e.getBody(),i=this.facade.retrieveProxy(Ln.NAME),i.setEmbed(t.embed),i.setLink(t.link)},i(kn,In),kn.NAME="CaptioningPlugin",kn.prototype.feature="captioning",kn.prototype.moduleName="captioning",kn.prototype.createController=function(){this.registerCommand(vo.CHANGE_MEDIA,Cn),this.registerCommand(vo.STARTED,Pn),this.registerCommand(vo.TIME_UPDATE,An),this.registerCommand(Mo.VISIBILITY_CHANGE,bn)},kn.prototype.createModel=function(){this.registerProxy(new Nn(this.config))},kn.prototype.createView=function(){var e;e=new yn,this.registerMediator(e),this.registerMediator(new vn(e.viewComponent))},kn.prototype.createAPI=function(){return new wn(this)},kn.prototype.listNotificationInterests=function(){return[vo.CHANGE_MEDIA,vo.STARTED,vo.TIME_UPDATE]},kn.prototype.listNotificationPublications=function(){var e,t;return kn.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in Mo)t=Mo[e],i.push(t);return i}()).concat([vo.ADD_CONTROL,vo.REMOVE_CONTROL])},kn.prototype.listNotificationEvents=function(){return[Mo.VISIBILITY_CHANGE,Mo.ENABLED]},ki.registerPlugin("captioning","html",kn),i(Rn,H),Rn.prototype.key="comscore",Rn.NAME=l.NAME,Rn.prototype.defaults={url:"http://b.scorecardresearch.com/b",events:{ads:null,video:null},data:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:null,c8:null,c9:null,c10:null,c14:null}},Rn.prototype.adStart=function(){var e;this.facade.logger.log("ComscoreProxy -> adStart"),e=this.constructURL("ads","started"),Ei.beacon(e)},Rn.prototype.videoStart=function(){var e;this.facade.logger.log("ComscoreProxy -> videoStart"),e=this.constructURL("video","started"),Ei.beacon(e)},Rn.prototype.constructURL=function(e,t){var i,n,o,a,r,s,l,d,c,u,p,h,g;if(i={},o=null!=(p=this.value.events)?p[e]:void 0,null!=o)for(c=0,u=o.length;u>c;c++)a=o[c],a.type===t&&(n=a);h=this.value.data;for(r in h)d=h[r],i[r]=(null!=n?null!=(g=n.data)?g[r]:void 0:void 0)||d;null==i.c7&&(i.c7=document.location.href.substr(0,512)),null==i.c8&&(i.c8=document.referrer.substr(0,512)),null==i.c9&&(i.c9=document.title),null==i.cv&&(i.cv="2.0"),i.rn=Date.now(),l=this.value.url,s=[];for(r in i)d=i[r],null!=d&&""!==d&&s.push(r+"="+escape(d));return s.length>0&&(l+="?"+s.join("&")),l.substr(0,2080)},i(Vn,Pi),Vn.NAME="ComscoreWrapper",Vn.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m,y,v,_;t=e.getElementsByTagName("application")[0],r=e.getElementsByTagName("metrics")[0],null==r&&(r=e.createElement("metrics"),t.appendChild(r)),p=e.createElement("vendor"),p.setAttribute("id","comscore"),r.appendChild(p),a={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}},d=[{value:"c1",key:"COMSCORE_CSC1"},{value:"c2",key:"COMSCORE_CSC2"},{value:"c3",key:"COMSCORE_CSC3"},{value:"c4",key:"COMSCORE_CSC4"},{value:"c5",key:"COMSCORE_CSC5"},{value:"c6",key:"COMSCORE_CSC6"},{value:"c7",key:"COMSCORE_CSC7"},{value:"c8",key:"COMSCORE_CSC8"},{value:"c9",key:"COMSCORE_CSC9"},{value:"c10",key:"COMSCORE_CSC10"},{value:"c11",key:"COMSCORE_CSC14"}],y=this.config.events;for(u in y)if(o=y[u],null!=o&&o.length>0)for(h=0,f=o.length;f>h;h++)for(n=o[h],s=e.createElement("property"),s.setAttribute("key",a[u][n.type]),p.appendChild(s),i=e.createElement("property"),i.setAttribute("key","COMSCORE_CSURL"),c=ot.createTextContent(e,this.config.url),i.appendChild(c),s.appendChild(i),g=0,m=d.length;m>g;g++)l=d[g],c=(null!=(v=n.data)?v[l.value]:void 0)||(null!=(_=this.config.data)?_[l.value]:void 0),null!=c&&""!==c&&(i=e.createElement("property"),i.setAttribute("key",l.key),c=ot.createTextContent(e,c),i.appendChild(c),s.appendChild(i));return e},i(On,puremvc.SimpleCommand),On.prototype.execute=function(){var e;this.facade.logger.debug("ComscoreAdStartCommand"),e=this.facade.retrieveProxy(Rn.NAME),e.adStart()},i(Un,puremvc.SimpleCommand),Un.prototype.execute=function(){var e;this.facade.logger.debug("ComscoreStartCommand"),e=this.facade.retrieveProxy(Rn.NAME),e.videoStart()},i(Hn,jt),Hn.NAME="SharePlugin",Hn.prototype.moduleName="share",Hn.prototype.createModel=function(){this.registerProxy(new Ln(this.config))},Hn.prototype.createController=function(){this.registerCommand(vo.MEDIA_CHANGE,Dn)},Hn.prototype.createView=function(){this.registerMediator(new Mn)},Hn.prototype.listNotificationInterests=function(){return[vo.MEDIA_CHANGE]},Hn.prototype.listNotificationPublications=function(){return Hn.__super__.listNotificationPublications.apply(this,arguments).concat([vo.ADD_CONTROL,vo.REMOVE_CONTROL])},ki.registerPlugin("share","html",Hn),ki.registerPlugin("share","external",Hn),i(Bn,Tt),Bn.NAME="AdDispatcher",Bn.prototype.getType=function(e){return Bn.__super__.getType.call(this,e.replace(/^ad/,""))},Bn.prototype.getMessage=function(e){return"timeupdate"!==e.type&&"timeremaining"!==e.type?Bn.__super__.getMessage.call(this,e):void 0},i(Gn,L),Gn.prototype.duration=null,Gn.prototype.currentTime=null,Gn.prototype.container=null,Gn.prototype.banner=null,Gn.prototype.text=null,Gn.prototype.bg=null,Gn.NAME="AdMediator",Gn.prototype.onRegister=function(){this.classList.add("ads"),this.container=document.createElement("div"),this.classList.add("ad-container",this.container),this.viewComponent.container=this.container,this.viewComponent.appendChild(this.container),this.banner=document.createElement("div"),this.classList.add("ad-banner",this.banner),this.viewComponent.appendChild(this.banner),this.bg=document.createElement("div"),this.classList.add("ad-text-bg",this.bg),this.banner.appendChild(this.bg),this.text=document.createElement("div"),this.classList.add("ad-text",this.text),this.banner.appendChild(this.text),Gn.__super__.onRegister.call(this),this.sendNotification(Eo.AD_CONTAINER_CREATED,this.viewComponent),this.facade.setViewComponent(this.viewComponent)},Gn.prototype.listNotificationInterests=function(){return[Eo.BREAK_END,Eo.AD_TIME_REMAINING]},Gn.prototype.handleNotification=function(e){var t,i;switch(e.getName()){case Eo.BREAK_END:this.text.textContent="";break;case Eo.AD_TIME_REMAINING:i=e.getBody(),t=i>0?"Video will resume in "+Ei.formatTimecode(i):"",this.text.textContent=t}},i(Fn,B),Fn.prototype.execute=function(e){var t;this.facade.logger.debug("AdMediaChangeCommand"),t=e.getBody(),this.ads.setLoadedMetadata(!1),this.ads.engage(t)},i(zn,B),zn.prototype.execute=function(){this.facade.logger.debug("AdBreakStartCommand"),this.facade.app.sendNotification(vo.ADD_APPLICATION_STATE,"ad-mode"),this.facade.app.sendNotification(vo.DISABLE_FULL_SCREEN),this.ads.breakStart()},i(jn,B),jn.prototype.execute=function(){this.facade.logger.debug("AdBreakEndCommand"),this.ads.breakEnd(),this.facade.app.sendNotification(vo.REMOVE_APPLICATION_STATE,"ad-mode"),this.facade.app.sendNotification(vo.ENABLE_FULL_SCREEN)},i(qn,B),qn.prototype.execute=function(){this.facade.logger.debug("AdLoadedMetadataCommand"),this.ads.setLoadedMetadata(!0)},i(Wn,Ft),Wn.prototype.setEnabled=function(){},Wn.prototype.getEnabled=function(){},Wn.prototype.getInProgress=function(){},Wn.prototype.getStarted=function(){},Wn.prototype.getPaused=function(){},Wn.prototype.getCompanions=function(){};var Do={BREAK_START:"adComponentBreakInitiated",BREAK_END:"adComponentBreakComplete",AD_LOADED:"adComponentLoaded",AD_STARTED:"adComponentAdBegin",AD_TIME_UPDATE:"adComponentPlaybackProgress",AD_TIME_REMAINING:"adComponentTimeElapsed",AD_DURATION_CHANGE:"addurationchange",AD_ENDED:"adComponentAdComplete",AD_ERROR:"adComponentInitFailed",AD_PLAY:"adComponentPlaybackResumed",AD_PAUSE:"adComponentPlaybackPaused",AD_LOG:"adComponentLog",AD_COMPANION:"adComponentCompanion",AD_PLAYBACK_FAILED:"adComponentPlaybackFailed",AD_PLAYBACK_TERMINATED:"adComponentPlaybackTerminated",AD_MEDIA_LOADED:"adComponentMediaLoaded",AD_CLICKED:"adComponentClicked"};Yn.prototype.id=null,Yn.prototype.title=null,Yn.prototype.duration=0/0,Yn.prototype.position=0/0,Yn.prototype.type=null,Yn.prototype.partner=null,Yn.prototype.metadata=null,i($n,jt),$n.NAME="ComscorePlugin",$n.prototype.moduleName="comscore",$n.prototype.createController=function(){this.registerCommand(vo.STARTED,Un),this.registerCommand(Eo.AD_STARTED,On)},$n.prototype.createModel=function(){this.registerProxy(new Rn(this.config))},$n.prototype.listNotificationInterests=function(){return[vo.STARTED,Eo.AD_STARTED]},ki.registerPlugin("comscore","html",$n),ki.registerPlugin("comscore","flash",Vn),i(Kn,Q),Kn.NAME=l.NAME,Kn.prototype.defaults={plugin:null,videoId:null,defaultId:null,domain:null,zoneId:null,companion:null,userData:null,params:null},Kn.prototype.key="auditude",Kn.prototype.session=null,Kn.prototype.options=null,Kn.prototype.initialize=function(){var e=this;this.options={controls:!1,auditudeHandlesChapterBreaks:!1,style:{backgroundColor:"#000",width:this.facade.app.video.clientWidth,height:this.facade.app.video.clientHeight},handlers:{play:function(){e.facade.logger.debug("ad play")},timeupdate:function(t,i,n){e.facade.sendNotification(Eo.AD_TIME_REMAINING,n.duration-n.currentTime)},error:function(t){e.facade.logger.debug("ad error:",t),e.error()},pause:function(){e.facade.logger.debug("ad pause")},loadedmetadata:function(){e.facade.logger.debug("ad loadedmetadata")},end:function(){e.facade.logger.debug("ad end")}}};try{this.plugin=this.createPlugin(),this.plugin.subscribe(aud.events.init_complete,function(t,i){e.facade.logger.debug("init_complete:",t,i);try{e.plugin.publish(aud.notifications.break_begin)}catch(n){e.error(n)}}),this.plugin.subscribe(aud.events.init_failed,function(t){e.error(t)}),this.plugin.subscribe(aud.events.break_begin,function(t,i){e.facade.logger.debug("break_begin:",t,i),e.sendNotification(Eo.BREAK_START)}),this.plugin.subscribe(aud.events.pause_playback,function(t,i){e.facade.logger.debug("pause_playback: "+t+", "+i),e.contentPause(t,i)}),this.plugin.subscribe(aud.events.resume_playback,function(t,i){e.facade.logger.debug("resume_playback: ",t,i),e.contentPlay(t,i)}),this.plugin.subscribe(aud.events.linear_ad_begin,function(t,i,n){var o,a,r,s;e.facade.logger.debug("linear ad begin:",t,i,n),s=i._xmlDoc.querySelector("ad[id]"),null!=s&&(a=s.getAttribute("id")),s=i._xmlDoc.querySelector("inLine[adTitle]"),null!=s&&(r=s.getAttribute("adTitle")),o=new Yn(a,r,n.asset.duration,1,"preroll","auditude",n),e.sendNotification(Eo.AD_LOADED,o),e.sendNotification(Eo.AD_DURATION_CHANGE,o.duration),e.facade.app.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.PLAYING),e.sendNotification(Eo.AD_PLAY),e.setInProgress(!0),e.setCompanions(n.banners),e.session=n.session,e.sendNotification(Eo.AD_STARTED)}),this.plugin.subscribe(aud.events.linear_ad_end,function(t,i,n){e.facade.logger.debug("linear ad end:",t,i,n),e.sendNotification(Eo.AD_ENDED)}),this.plugin.subscribe(aud.events.break_end,function(t,i){e.facade.logger.debug("break_end:",t,i),e.sendNotification(Eo.BREAK_END)}),this.plugin.subscribe(aud.events.non_linear_ad_begin,function(t,i,n){e.facade.logger.debug("non linear ad begin"),e.setCompanions(n.banners)}),this.plugin.subscribe(aud.events.non_linear_ad_end,function(){e.facade.logger.debug("non linear ad end")})}catch(t){this.error(t)}},Kn.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.container.container,null,this.value.domain,this.value.zoneId,this.options)},Kn.prototype.start=function(){var e,t,i,n,o,a,r;if(Kn.__super__.start.call(this)===!1)return!1;try{if(n=this.value.params||{},o="",null!=this.value.userData){r=this.value.userData;for(i in r)a=r[i],o+=""+i+"="+a+";"}null!=n.userData&&(o+=n.userData),""!==o&&(n.userData=o),t=this.value.videoId+"",null!=this.value.defaultId&&(e=this.value.defaultId+"",t=null!=t?[t,e]:e),this.facade.logger.log("Auditude init: ",t,n),this.plugin.init(t,n)}catch(s){this.error(s)}},Kn.prototype.play=function(){Kn.__super__.play.call(this),this.session.notifyResume()},Kn.prototype.pause=function(){Kn.__super__.pause.call(this),this.session.notifyPause()},Kn.prototype.breakStart=function(){},Kn.prototype.setCompanions=function(e){var t,i,n,o,a,r,s,l;if(!(null==e||e.length<1)){for(n=[],a=0,s=e.length;s>a;a++)t=e[a],n.push({data:t.data,type:t.resourceType,width:parseInt(t.width),height:parseInt(t.height),metadata:t});if(Kn.__super__.setCompanions.call(this,n),null!=this.value.companion&&(i=this.value.companion,o=document.getElementById(i.id),null!=o))for(r=0,l=e.length;l>r;r++)if(t=e[r],i.width===parseInt(t.width)&&i.height===parseInt(t.height)){o.innerHTML=t.data;break}}},Kn.prototype.contentStarted=function(){this.plugin.publish(aud.notifications.video_playback_started)},Kn.prototype.contentEnded=function(){this.plugin.publish(aud.notifications.video_playback_complete)},i(Xn,Kn),Xn.NAME=l.NAME,Xn.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.app.video,null,this.value.domain,this.value.zoneId,this.options)},Xn.prototype.engage=function(e){Xn.__super__.engage.call(this,e),this.sendNotification(vo.DISABLE_VIDEO_EVENTS,["ended"])},Xn.prototype.reset=function(e){Xn.__super__.reset.call(this,e),this.sendNotification(vo.ENABLE_VIDEO_EVENTS,["ended"])},Xn.prototype.play=function(){Xn.__super__.play.call(this),this.facade.app.video.play()},Xn.prototype.pause=function(){Xn.__super__.pause.call(this),this.facade.app.video.pause()},Xn.prototype.contentPause=function(){this.facade.app.video.pause()},i(Zn,Pi),Zn.NAME="AdWrapper",Zn.prototype.enabled=!0,Zn.prototype.paused=!1,Zn.prototype.companions=null,Zn.prototype.started=!1,Zn.prototype.getFeature=function(){return"ads"},Zn.prototype.getInProgress=function(){return this.player.video.getPlayerProperty("adInProgress")},Zn.prototype.getStarted=function(){return this.started},Zn.prototype.getPaused=function(){return this.paused},Zn.prototype.getCompanions=function(){return this.companions},Zn.prototype.setEnabled=function(e){return this.enabled=e,this.player.video.setPlayerProperty("adsEnabled",e),e},Zn.prototype.getEnabled=function(){return this.enabled},Zn.prototype.enable=function(){this.setEnabled(!0)},Zn.prototype.disable=function(){this.setEnabled(!1)},Zn.prototype.createFlashVars=function(e){return e.core_ads_enabled=!0,e},Zn.prototype.listNotificationInterests=function(){return Zn.__super__.listNotificationInterests.call(this).concat([Do.BREAK_START,Do.BREAK_END,Do.AD_LOADED,Do.AD_ERROR,Do.AD_STARTED,Do.AD_TIME_UPDATE,Do.AD_TIME_REMAINING,Do.AD_PLAYBACK_FAILED,Do.AD_PLAYBACK_TERMINATED,Do.AD_ENDED,Do.AD_MEDIA_LOADED,Do.AD_CLICKED,Do.AD_COMPANION,Do.AD_PAUSE,Do.AD_PLAY,Do.AD_LOG])},Zn.prototype.handleNotification=function(e){var t,i,n,o;switch(Zn.__super__.handleNotification.call(this,e),i=e.getName(),t=e.getBody(),n=this,i){case Do.BREAK_START:o="breakstart";break;case Do.BREAK_END:o="breakend";break;case Do.AD_LOADED:case Do.AD_MEDIA_LOADED:o="loaded",this.start=!1;break;case Do.AD_STARTED:o="started",this.started=!0,this.sendNotification(vo.ADD_APPLICATION_STATE,"ad-mode");break;case Do.AD_TIME_UPDATE:case Do.AD_TIME_REMAINING:o="timeupdate";break;case Do.AD_ERROR:case Do.AD_PLAYBACK_FAILED:o="error",this.start=!1,this.sendNotification(vo.REMOVE_APPLICATION_STATE,"ad-mode");break;case Do.AD_ENDED:case Do.AD_PLAYBACK_TERMINATED:o="ended",this.sendNotification(vo.REMOVE_APPLICATION_STATE,"ad-mode");break;case Do.AD_CLICKED:o="clicked";break;case Do.AD_COMPANION:o="companion",this.companions=t;break;case Do.AD_PAUSE:o="pause",n=this.player.getAPI(),this.paused=!0,this.player.setPlayState("paused");break;case Do.AD_PLAY:o="playing",n=this.player.getAPI(),this.paused=!0,this.player.setPlayState("playing"),n.dispatchEvent(new fi("play",t));break;case Do.AD_LOG:n.dispatchEvent(new fi(Do.AD_LOG,t)),o="log"}null!=o&&n.dispatchEvent(new fi(o,t))},i(Jn,Zn),Jn.NAME="AuditudeWrapper",Jn.prototype.createFlashVars=function(e){return null!=this.config.companion&&(e.ad_partner_companion_size=""+this.config.companion.width+"x"+this.config.companion.height),e},Jn.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h;for(i=e.getElementsByTagName("application")[0],t=e.getElementsByTagName("admedia")[0],null==t&&(t=e.createElement("admedia"),i.appendChild(t)),l=e.createElement("vendor"),l.setAttribute("id","auditude"),t.appendChild(l),s=[{value:this.config.domain,key:"AUDITUDE_DOMAIN"},{value:this.config.videoId,key:"AUDITUDE_MEDIA_ID"},{value:this.config.defaultId,key:"AUDITUDE_DEFAULT_MEDIA_ID"},{value:this.config.zoneId,key:"AUDITUDE_ZONE_ID"},{value:this.config.prerollId,key:"AUDITUDE_PREROLL_MEDIA_ID"},{value:this.config.midrollId,key:"AUDITUDE_MIDROLL_MEDIA_ID"},{value:this.config.audienceManagerURL,key:"AUDITUDE_AUDIENCE_MGR_URL"},{value:this.config.version,key:"AUDITUDE_VERSION"}],d=0,u=s.length;u>d;d++)r=s[d],null!=r.value&&this.createProperty(e,r.key,r.value,l);if(null!=this.config.companions){for(o=[],a=[],h=this.config.companions,c=0,p=h.length;p>c;c++)n=h[c],o.push(n.width+"x"+n.height),a.push(n.id);this.createProperty(e,"AUDITUDE_COMPANION_SIZE",o.join(","),l),this.createProperty(e,"AUDITUDE_COMPANION_ID",o.join(","),l)}return null!=this.config.params&&this.createProperty(e,"AUDITUDE_PARAMS",this.config.params,l),null!=this.config.userData&&this.createProperty(e,"AUDITUDE_USER_DATA",this.config.userData,l),e},i(Qn,In),Qn.NAME="AdPlugin",Qn.prototype.container=null,Qn.prototype.feature="ads",Qn.prototype.createModel=function(){this.registerProxy(this.isFullscreenDevice()?this.createFullscreenProxy():this.createProxy())},Qn.prototype.createController=function(){this.registerCommand(vo.CHANGE_MEDIA,Fn),this.registerCommand(vo.LOADED_METADATA,qn),this.registerCommand(Eo.BREAK_START,zn),this.registerCommand(Eo.BREAK_END,jn)},Qn.prototype.createView=function(){return this.registerMediator(new Gn)},Qn.prototype.createAPI=function(){return this.api=new Wn(this),this.api},Qn.prototype.isFullscreenDevice=function(){return Ei.isFullscreenDevice()},Qn.prototype.createProxy=function(){},Qn.prototype.createFullscreenProxy=function(){},Qn.prototype.listNotificationInterests=function(){return[vo.CHANGE_MEDIA,vo.LOADED_METADATA,vo.PLAY,vo.PAUSE,vo.START,vo.TOGGLE_PLAY_PAUSE,vo.STARTED,vo.ENDED,vo.READY]},Qn.prototype.listNotificationPublications=function(){var e,t;return Qn.__super__.listNotificationPublications.call(this).concat(function(){var i;i=[];for(e in Eo)t=Eo[e],i.push(t);return i}()).concat([vo.PLAY_REQUEST,vo.DISABLE_VIDEO_EVENTS,vo.ENABLE_VIDEO_EVENTS])},Qn.prototype.listNotificationEvents=function(){var e,t;return Qn.__super__.listNotificationEvents.call(this).concat(function(){var i;i=[];for(e in Eo)t=Eo[e],i.push(t);return i}())};var ko={INITIALIZED:"ima/initialize",ADD_OVERLAY:"ima/addOverlay",REMOVE_OVERLAY:"ima/removeOverlay"};i(eo,H),eo.prototype.key="imaoverlay",eo.NAME="IMAOveralyProxy",eo.prototype.defaults={adTagUrl:null,duration:15,interval:30,delay:30},eo.prototype.durationTimer=null,eo.prototype.intervalTimer=null,eo.prototype.delayTimer=null,eo.prototype.stop=function(){clearTimeout(this.durationTimer),clearTimeout(this.delayTimer),clearTimeout(this.intervalTimer)},eo.prototype.play=function(){var e=this;this.stop(),this.requestAd(),this.delayTimer=setTimeout(function(){e.requestAd(),e.intervalTimer=setInterval(function(){e.requestAd()},1e3*e.value.interval)},1e3*this.value.delay)},eo.prototype.requestAd=function(){var e;e=Ei.get(this.getValue("adTagUrl"),{onload:this.vastLoadHandler.bind(this),onerror:this.error.bind(this)},!1)},eo.prototype.vastLoadHandler=function(e){var t,i,n,o,a,r;if(r=e.target.responseXML,null!=r)try{t=r.querySelector("NonLinear"),null!=t?(a=null!=r.querySelector("Impression")?r.querySelector("Impression").textContent:"",n=null!=r.querySelector("Tracking[event=creativeView]")?r.querySelector("Tracking[event=creativeView]").textContent:"",i=null!=t.querySelector("NonLinearClickThrough")?t.querySelector("NonLinearClickThrough").textContent:"",o={src:t.querySelector("StaticResource").textContent,width:t.getAttribute("width"),height:t.getAttribute("height"),tracking:[a,n],href:i},this.displayAd(o)):this.error("No overlay was returned")}catch(s){this.error(s)}},eo.prototype.error=function(e){this.facade.logger.error("[AMP IMA OVERLAY ERROR]",e),this.stop()},eo.prototype.displayAd=function(e){var t=this;this.sendNotification(ko.ADD_OVERLAY,e),this.durationTimer=setTimeout(function(){t.sendNotification(ko.REMOVE_OVERLAY)},1e3*this.value.duration)},i(to,Zn),to.NAME="IMAWrapper",to.prototype.createXML=function(e){var t,i,n,o,a,r,s,l,d,c,u,p,h,g,f,m;for(i=e.getElementsByTagName("application")[0],t=e.getElementsByTagName("admedia")[0],null==t&&(t=e.createElement("admedia"),i.appendChild(t)),d=e.createElement("vendor"),d.setAttribute("id","dfp"),t.appendChild(d),l=[{value:this.config.adTagUrl,key:"DFP_AD_TAG_URL"}],c=0,h=l.length;h>c;c++)s=l[c],null!=s.value&&this.createProperty(e,s.key,s.value,d);if(null!=this.config.params&&(null!=this.config.params.adTag&&this.createProperty(e,"DFP_AD_TAG_PARAMS",this.config.params.adTag,d),null!=this.config.params.manual&&this.createProperty(e,"DFP_MANUAL_PARAMS",this.config.params.manual,d)),null!=this.config.companions){for(o=[],a=[],m=this.config.companions,u=0,g=m.length;g>u;u++)n=m[u],o.push(n.width+"x"+n.height),a.push(n.id);this.createProperty(e,"DFP_SIZE",o.join(","),d),this.createProperty(e,"COMPANION_ID",a.join(","),d)}if(null!=this.config.overlay)for(this.config.overlay.enabled===!0&&(r=e.createElement("overlay"),t.appendChild(r)),l=[{value:"dfp",key:"OVERLAY_AD_PARTNER"},{value:this.config.overlay.adTagUrl,key:"OVERLAY_AD_BASE_URL"},{value:this.config.overlay.delay,key:"OVERLAY_AD_DELAY"},{value:this.config.overlay.interval,key:"OVERLAY_AD_INTERVAL"},{value:this.config.overlay.duration,key:"OVERLAY_AD_DURATION"},{value:""+this.config.overlay.width+"x"+this.config.overlay.height,key:"OVERLAY_AD_SIZE"}],p=0,f=l.length;f>p;p++)s=l[p],null!=s.value&&this.createProperty(e,s.key,s.value,r);return e},i(io,Q),io.NAME=l.NAME,io.prototype.defaults={plugin:null,adTagUrl:null,overlay:null,width:null,height:null},io.prototype.key="ima",io.prototype.interval=null,io.prototype.adDisplayContainer=null,io.prototype.adDisplayContainerInitialized=!1,io.prototype.adsLoader=null,io.prototype.adsManagerLoaded=!1,io.prototype.adsManager=null,io.prototype.cuepoints=null,io.prototype.adLoaded=!1,io.prototype.playWhenLoaded=!1,io.prototype.contentHasEnded=!1,io.prototype.getScript=function(){return this.value.plugin},io.prototype.setLoadedMetadata=function(e){return io.__super__.setLoadedMetadata.call(this,e),this.canPlay()&&this.playWhenLoaded===!0&&this.startAd(),e},io.prototype.initialize=function(){},io.prototype.ready=function(){this.adDisplayContainer=this.createPlugin(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)},io.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container)},io.prototype.engage=function(){this.getEnabled()!==!1&&(io.__super__.engage.call(this),this.adsManagerLoaded===!0&&this.contentHasEnded===!1&&this.contentEnded(),this.adsManagerLoaded=!1,this.contentHasEnded=!1,this.adsManagerLoaded=!1,this.playWhenLoaded=!1)},io.prototype.requestAd=function(){var e,t,i,n,o;null==(n=this.value).width&&(n.width=this.facade.app.getViewComponent().clientWidth),null==(o=this.value).height&&(o.height=this.facade.app.getViewComponent().clientHeight),t=new google.ima.AdsRequest,e=this.getValue("adTagUrl"),i=this.getValue("adsResponse"),null!=i&&""!==i?t.adsResponse=Ei.read(i,null,Ei.mimeTypes.txt):t.adTagUrl=e,t.linearAdSlotWidth=this.value.width,t.linearAdSlotHeight=this.value.height,null!=this.value.overlay&&(t.nonLinearAdSlotWidth=this.value.overlay.width,t.nonLinearAdSlotHeight=this.value.overlay.height),this.adsLoader.requestAds(t)},io.prototype.start=function(){return io.__super__.start.call(this)===!1?!1:(this.adDisplayContainerInitialized!==!0&&(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0),void(this.canPlay()===!0?this.startAd():(this.playWhenLoaded=!0,this.requestAd())))},io.prototype.canPlay=function(){return this.adsManagerLoaded===!0&&this.loadedMetadata===!0},io.prototype.startAd=function(){this.playWhenLoaded=!1;try{this.adsManager.init(this.value.width,this.value.height,google.ima.ViewMode.NORMAL),this.adsManager.start()}catch(e){this.error(e)}},io.prototype.onAdsManagerLoaded=function(e){this.facade.logger.log("IMA: adsManagerLoaded"),this.adsManager=e.getAdsManager(this.facade.app.video),this.adsManagerLoaded=!0,this.cuePoints=this.adsManager.getCuePoints(),this.facade.app.sendNotification(vo.ADD_CUE_POINTS,this.cuePoints),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPause.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.contentPlay.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdEvent.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdClick.bind(this)),this.canPlay()&&this.playWhenLoaded===!0&&this.startAd()},io.prototype.onAdClick=function(){this.getPaused()||(this.setPaused(!0),this.facade.app.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.PAUSED),this.facade.app.sendNotification(vo.CHANGE_ACTIVE_STATE,wo.ACTIVE))},io.prototype.onAdEvent=function(e){var t,i,n,o,a;switch(t=e.getAd(),this.facade.logger.log("IMA Ad Event: "+e.type,e,t),e.type){case google.ima.AdEvent.Type.LOADED:t.isLinear()&&(o=t.getAdPodInfo().getAdPosition(),a=1===o?"preroll":"midroll",i=new Yn(t.getAdId(),t.getAdId(),t.getDuration(),o,a,"ima",t),this.sendNotification(Eo.AD_LOADED,i),this.sendNotification(Eo.AD_DURATION_CHANGE,i.duration));break;case google.ima.AdEvent.Type.STARTED:t.isLinear()&&(this.setInProgress(!0),this.sendNotification(Eo.AD_STARTED),this.interval=setInterval(this.onAdTimeUpdate.bind(this),300),this.facade.app.sendNotification(vo.CHANGE_PLAY_STATE,PlayState.PLAYING),this.sendNotification(Eo.AD_PLAY));try{n=t.a.companions,null!=n&&n.length>0&&this.setCompanions(n)}catch(r){this.facade.logger.error("[AMP IMA ERROR]","Could not retrieve companion ads:",r)}break;case google.ima.AdEvent.Type.COMPLETE:t.isLinear()&&this.sendNotification(Eo.AD_ENDED)}},io.prototype.onAdTimeUpdate=function(){this.sendNotification(Eo.AD_TIME_REMAINING,this.adsManager.getRemainingTime())},io.prototype.onAdError=function(e){this.error(e.getError()),this.contentPlay()},io.prototype.play=function(){io.__super__.play.call(this);try{this.adsManager.resume()}catch(e){this.facade.logger.error("[AMP IMA ERROR]","resume",e)}},io.prototype.pause=function(){io.__super__.pause.call(this);try{this.adsManager.pause()}catch(e){this.facade.logger.error("[AMP IMA ERROR]","pause",e)}},io.prototype.breakEnd=function(){var e;clearInterval(this.interval),io.__super__.breakEnd.call(this),e=this.facade.retrieveProxy(eo.NAME),e&&e.play()},io.prototype.setCompanions=function(e){var t,i,n,o;for(i=[],n=0,o=e.length;o>n;n++)t=e[n],i.push({data:t.content,type:t.resourceType,width:t.size.width,height:t.size.height,metadata:t});return io.__super__.setCompanions.call(this,i),e},io.prototype.contentPause=function(){io.__super__.contentPause.call(this),this.sendNotification(Eo.BREAK_START)},io.prototype.contentPlay=function(){this.facade.logger.log("IMA: contentPlay"),this.sendNotification(Eo.BREAK_END),io.__super__.contentPlay.call(this)},io.prototype.contentEnded=function(){this.facade.logger.log("IMA: contentComplete"),this.contentHasEnded=!0;try{this.adsManager.destroy(),this.adsLoader.contentComplete()}catch(e){this.facade.logger.error("[AMP IMA ERROR]","contentComplete",e)}},i(no,puremvc.SimpleCommand),no.prototype.execute=function(){this.facade.sendNotification(vo.ADD_APPLICATION_STATE,"ad-overlay-mode")},i(oo,puremvc.SimpleCommand),oo.prototype.execute=function(){var e;e=this.facade.retrieveProxy(eo.NAME),e.stop(),this.facade.app.sendNotification(vo.REMOVE_APPLICATION_STATE,"ad-overlay-mode")},i(ao,L),ao.NAME="IMAOverlayMediator",ao.prototype.anchor=null,ao.prototype.image=null,ao.prototype.tracker=null,ao.prototype.tracker2=null,ao.prototype.closeButton=null,ao.prototype.closeText=null,ao.prototype.onRegister=function(){var e=this;this.classList.add("ad-overlay"),this.anchor=document.createElement("a"),this.classList.add("ad-overlay-anchor",this.anchor),this.anchor.target="_blank",this.viewComponent.appendChild(this.anchor),this.image=document.createElement("img"),this.classList.add("ad-overlay-img",this.image),this.anchor.appendChild(this.image),this.tracker=document.createElement("img"),this.tracker.width=0,this.tracker.height=0,this.viewComponent.appendChild(this.tracker),this.tracker2=document.createElement("img"),this.tracker2.width=0,this.tracker2.height=0,this.viewComponent.appendChild(this.tracker2),this.closeButton=document.createElement("div"),this.classList.add("ad-close-button",this.closeButton),this.viewComponent.appendChild(this.closeButton),this.closeText=document.createElement("div"),this.classList.add("ad-close-text",this.closeText),this.closeText.textContent="x",this.closeButton.appendChild(this.closeText),ci.create(this.closeButton,ci.CLICK,function(t){return t.stopImmediatePropagation(),e.sendNotification(ko.REMOVE_OVERLAY),!1
}),ao.__super__.onRegister.call(this)},ao.prototype.listNotificationInterests=function(){return[ko.ADD_OVERLAY,ko.REMOVE_OVERLAY]},ao.prototype.handleNotification=function(e){var t;switch(e.getName()){case ko.ADD_OVERLAY:t=e.getBody(),this.image.src=t.src,this.anchor.href=t.href,this.tracker.src=t.tracking[0],this.tracker2.src=t.tracking[1]}},i(ro,puremvc.SimpleCommand),ro.prototype.execute=function(){this.facade.retrieveProxy(io.NAME).ready()},i(so,io),so.NAME=l.NAME,so.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container,this.facade.app.video,this.facade.getViewComponent().container)},so.prototype.engage=function(e){so.__super__.engage.call(this,e),this.sendNotification(vo.DISABLE_VIDEO_EVENTS,["ended"])},so.prototype.reset=function(e){so.__super__.reset.call(this,e),this.sendNotification(vo.ENABLE_VIDEO_EVENTS,["ended"])},i(lo,Qn),lo.NAME="AuditudePlugin",lo.prototype.moduleName="auditude",lo.prototype.feature="ads",lo.prototype.createFullscreenProxy=function(){return new Xn(this.config)},lo.prototype.createProxy=function(){return new Kn(this.config)},lo.prototype.isFullscreenDevice=function(){return!0},ki.registerPlugin("auditude","html",lo),ki.registerPlugin("auditude","flash",Jn),i(co,Pi),co.NAME="AdChoicesWrapper",co.prototype.createXML=function(e){var t,i,n;return n=e.getElementsByTagName("view")[0],i=e.createElement("element"),i.setAttribute("id","adOptions"),n.appendChild(i),t=e.createElement("element"),t.setAttribute("id","adChoices"),t.setAttribute("target",this.config.target),i.appendChild(t),t=e.createElement("element"),t.setAttribute("id","adCountdown"),i.appendChild(t),e},i(uo,M),uo.NAME="AdChoicesMediator",uo.prototype.icon=null,uo.prototype.text=null,uo.prototype.container=null,uo.prototype.onRegister=function(){var e;this.classList.add("ad-choices"),e=this.facade.retrieveProxy(l.NAME),this.container=document.createElement("a"),this.container.href=e.getTarget(),this.classList.add("ad-choices-link",this.container),this.container.target="_blank",this.text=document.createElement("div"),this.text.innerHTML="AdChoices",this.classList.add("ad-choices-text",this.text),this.container.appendChild(this.text),this.icon=document.createElement("div"),this.classList.add("ad-choices-icon",this.icon),this.container.appendChild(this.icon),this.viewComponent.appendChild(this.container),uo.__super__.onRegister.call(this)},uo.prototype.listNotificationInterests=function(){return[Eo.AD_CONTAINER_CREATED]},uo.prototype.handleNotification=function(e){var t;switch(e.getName()){case Eo.AD_CONTAINER_CREATED:t=e.getBody(),null!=t&&t.appendChild(this.viewComponent)}},i(po,l),po.NAME=l.NAME,po.prototype.defaults={target:null},po.prototype.getTarget=function(){return this.data.target},po.prototype.setTarget=function(e){return this.data.target=e},i(ho,Qn),ho.NAME="IMAPlugin",ho.prototype.moduleName="ima",ho.prototype.feature="ads",ho.prototype.createFullscreenProxy=function(){return new so(this.config)},ho.prototype.createProxy=function(){return new io(this.config)},ho.prototype.isFullscreenDevice=function(){return Ei.isFullscreenDevice()||/Android 4\.[0-1]/.test(navigator.userAgent)},ho.prototype.createModel=function(){ho.__super__.createModel.call(this),null!=this.config.overlay&&this.registerProxy(new eo(this.config.overlay))},ho.prototype.createController=function(){ho.__super__.createController.call(this),null!=this.config.overlay&&(this.registerCommand(ko.ADD_OVERLAY,no),this.registerCommand(ko.REMOVE_OVERLAY,oo)),this.registerCommand(vo.READY,ro)},ho.prototype.createView=function(){ho.__super__.createView.call(this),null!=this.config.overlay&&this.registerMediator(new ao)},ki.registerPlugin("ima","html",ho),ki.registerPlugin("ima","flash",to),i(go,jt),go.NAME="AdChoicesPlugin",go.prototype.moduleName="adchoices",go.prototype.createModel=function(){this.registerProxy(new po(this.config))},go.prototype.createView=function(){this.registerMediator(new uo)},ki.registerPlugin("adchoices","html",go),ki.registerPlugin("adchoices","flash",co),fo.akamai={amp:{AMP:ki,utils:{Utils:Ei,QueryString:vi}}},window.AKAMAI_MEDIA_PLAYER.saveSDK(mo,fo)}window.AKAMAI_MEDIA_PLAYER.setVersion(mo)}(),Ndn_Require.define("amp_lib",function(){});var _nw2e=_nw2e||[];Ndn_Require.define("models/Akamai/VideoPlayerModel",["underscore","models/Ndn/Widget","models/Ndn/Utils/UserAgent","lib/amp.premier/config/skin/templates","amp_lib"],function(e,t,i,n){_nw2e.videoPlayer=AKAMAI_MEDIA_PLAYER.getSDK(),AKAMAI_MEDIA_PLAYER.revert();var o,a=function(e){return e.akamaiJsLibFolderUrl=e.akamaiJsLibFolderUrl||t.getAppUrl()+"/js/lib/amp.premier",e.akamaiResourcesFolderUrl=e.akamaiResourcesFolderUrl||t.getAppUrl()+"/resources",e.windowLocation=e.windowLocation||window.location.href+"",e.aaspUrl="http:"==window.location.protocol?"http://players.edgesuite.net/flash/plugins/osmf/advanced-streaming-plugin/v2.11/osmf2.0/AkamaiAdvancedStreamingPlugin.swf":e.akamaiResourcesFolderUrl+"/plugins/AkamaiAdvancedStreamingPlugin.swf",{head:{links:[]},config:{domain:"newsinc.com",target:"_top",params:{auditude_userDataString:"",distributorName:"",producerCategory:"",producerAuditudeId:"",windowLocation:e.windowLocation,tracking_group:9999,sitesection:"ndn",sec:"oth",sub:"non",plt:"11",wgt:1,fp:0,aud_zone_id:50974,aud_default_asset:"default_ndn",partner_type:"conventional",autoplay:1,continuous_play:1,sound:1,ad_server:"none",trans_time:0,size:"10x10",player_type:11,launcher_type:0,ads_enabled:0,wid:0,share:1,email:0,device_mode:1,external_url:"http://newsinc.com",override_playlist:0,user_token:"ZZZZZZZ",embed_type:0,ndn_session_id:"",rmm:0,wid_type:0,desc_url_type:"http://newsinc.com"},fullscreen:{"native":!0},controls:{autoHide:5},info:{title:"#{media.title}",description:"#{media.description}",provider:{name:"#{media.metadata['ndn-provider'].name}",image:"#{media.metadata['ndn-provider'].image}"}},flash:{swf:e.akamaiJsLibFolderUrl+"/AkamaiPremierPlayer.swf",debug:e.akamaiJsLibFolderUrl+"/AkamaiPremierPlayer-debug.swf",vars:{context_menu_mode:"short",overlay_ad_delay:3,volume:1,auto_replay:!1,fullscreen_enabled:!0,share_enabled:!0,auto_play:!1,hinting_rules:"%7B%22flashTablets%22%3A%7B%22label%22%3A%22Android%202%20%26%203%20or%20Kindle%20Fire%201%22%2C%22regexp%22%3A%22Android%20%5B23%5D%7CSilk/1%22%7D%2C%22html5Phones%22%3A%7B%22label%22%3A%22iPhone%22%2C%22regexp%22%3A%22iPhone%22%7D%2C%22html5Tablets%22%3A%7B%22label%22%3A%22HTML5%20Tablets%22%2C%22regexp%22%3A%22iPad%7CAndroid%204%7CSilk/2%22%7D%2C%22desktop%22%3A%7B%22label%22%3A%22Desktop%22%2C%22regexp%22%3A%22%5E%28%28%3F%21iPad%7CiPhone%7CAndroid%7CBlackBerry%7CPlayBook%7CSilk%29.%29*%24%22%7D%2C%22android_4_gets_m3u8%22%3A%7B%22regexp%22%3A%22Android%204%22%7D%7D",externalTarget:"_top",domain:"newsinc.com",embedDomain:"newsinc.com",show_play_button_overlay:!1,auto_play_list:!1,core_ads_enabled:!0,next_video_timer:-1},"static":{enabled:!0,swf:e.akamaiJsLibFolderUrl+"/AkamaiPremierPlayer-static.swf",debug:e.akamaiJsLibFolderUrl+"/AkamaiPremierPlayer-static-debug.swf",vars:{context_menu_mode:"short",overlay_ad_delay:3,volume:1,auto_replay:!1,fullscreen_enabled:!0,share_enabled:!0,auto_play:!1,hinting_rules:"%7B%22flashTablets%22%3A%7B%22label%22%3A%22Android%202%20%26%203%20or%20Kindle%20Fire%201%22%2C%22regexp%22%3A%22Android%20%5B23%5D%7CSilk/1%22%7D%2C%22html5Phones%22%3A%7B%22label%22%3A%22iPhone%22%2C%22regexp%22%3A%22iPhone%22%7D%2C%22html5Tablets%22%3A%7B%22label%22%3A%22HTML5%20Tablets%22%2C%22regexp%22%3A%22iPad%7CAndroid%204%7CSilk/2%22%7D%2C%22desktop%22%3A%7B%22label%22%3A%22Desktop%22%2C%22regexp%22%3A%22%5E%28%28%3F%21iPad%7CiPhone%7CAndroid%7CBlackBerry%7CPlayBook%7CSilk%29.%29*%24%22%7D%2C%22android_4_gets_m3u8%22%3A%7B%22regexp%22%3A%22Android%204%22%7D%7D",externalTarget:"_top",domain:"newsinc.com",embedDomain:"newsinc.com",show_play_button_overlay:!1,auto_play_list:!1,core_ads_enabled:!0,next_video_timer:-1},params:{wmode:i.isIe()||i.isFirefox()||i.isSafari()&&i.isWindows()?"transparent":"direct"},xml:n.getTemplate("ndn_assets",e)},params:{wmode:i.isIe()||i.isFirefox()||i.isSafari()&&i.isWindows()?"transparent":"direct"},xml:n.getTemplate("ndn_assets",e)},share:{facebook:!0,twitter:!0,enabled:!0},comscore:{url:t.isOnSsl()?"https://sb.scorecardresearch.com/b":"http://b.scorecardresearch.com/b",data:{c1:"1",c2:"11112732",c3:"#{distributorName}",c4:"#{media.metadata['ndn-provider'].name}",c5:"",c6:"#{siteSection}",c10:"#{producerCategory}"},events:{ads:[{type:"started",data:{c5:"09"}}],video:[{type:"started",data:{c5:"#{mediaAnalyticsC5Value}"}}]}},ima:{version:3,plugin:window.location.protocol+"//s0.2mdn.net/instream/html5/ima3.js",companion:{width:"300",height:"250"},adTagUrl:window.location.protocol+"//pubads.g.doubleclick.net/gampad/ads?ad_rule=1&sz=750x425&iu=#{dfpIuValue}&ciu_szs=#{dfpCiuSzsValue}&vid=#{media.guid}&cmsid=1169&vpos=preroll&scor=#{now}&vad_type=linear&description_url=#{dfpDescriptionUrl}&playlistId=#{playlistId}&widgetId=#{widgetId}&trackingGroup=#{trackingGroup}&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=#{encodedEmbedOriginUrl}&correlator=#{now}&cust_params=#{dfpParams}",enabled:"dfp"==e.adServer},auditude:{enabled:"Auditude"==e.adServer,plugin:{js:"http://adunit.cdn.auditude.com/player/js/lib/plugin/1.3/aud.html5player.js"},defaultId:"ndn_default",videoId:"#{media.guid}",domain:"auditude.com",zoneId:"#{aud_zone_id}",version:"ndn-1.0",params:"#{auditudeParams}",userData:{videotype:"#{player.mode}"}},mediaanalytics:{plugin:{js:t.isOnSsl()?"https://79423.analytics.edgekey.net/html5/akamaihtml5-min.js":"http://79423.analytics.edgesuite.net/html5/akamaihtml5-min.js",swf:t.isOnSsl()?"https://79423.analytics.edgekey.net/csma/plugin/csma.swf":"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf"},config:t.isOnSsl()?"https://ma74-r.analytics.edgekey.net/config/beacon-5471.xml":"http://ma74-r.analytics.edgesuite.net/config/beacon-4139.xml",dimensions:{title:"#{media.title}",playerId:"#{player.mode} Player",video_id:"#{videoId}",provider_id:"#{producerId}",video_length:"#{videoDuration}",player_behavior:"#{playerBehaviorId}",continuous_play:"#{continuousPlay}",sound:"#{rmmSoundOn}",share:"#{shareScenarioId}",playlist_id:"#{playlistId}",playlist_name:"#{playlistName}",playlist_order:"#{videoIndex}",tracking_group:"#{trackingGroup}",p_type:"#{widgetTypeId}",l_type:"#{wgtValue}",sitesection:"#{siteSection}",sec:"#{siteSectionSecValue}",sub:"#{siteSectionSubValue}",wgt:"#{wgtValue}",fp:"#{foldPositionId}",partner_type:"#{distributorType}",c5:"#{mediaAnalyticsC5Value}",referrer_url:"#{encodedEmbedPageUrl}",playerUrl:"#{windowLocation}",width:"#{videoPlayerWidth}",height:"#{videoPlayerHeight}",player_mode:"#{player.mode}",session_guid:"",ad_server:"#{adServer}",adServer:"#{adServer}",trans_time:"",desc_url:"#{doubleEncodedCurrentPageUrl}",external_url:"#{encodedEmbedPageUrl}",embed_type:"#{embedMethod}",size:"#{videoSizeId}",ads_enabled:"#{adsEnabled}",aud_zone_id:"#{producerAuditudeId}",adPartnerId:""}},autoplay:!1,volume:.75,rules:{PDL:{regexp:"Android 4"}},adchoices:{target:"http://assets.newsinc.com/info/adchoices.html"},playoverlay:{enabled:!1}}}},r=!1,s={getVersion:function(){var e,t=_nw2e.videoPlayer.version||this.getVideoPlayerNameSpace().AMP.VERSION;return(e=t.match(/v([0-9.]+)$/))&&e[1]?e[1]:null},getAmpPremier:function(){return this.getVideoPlayerNamespace().AMP},getVideoPlayerNamespace:function(){return _nw2e.videoPlayer.akamai.amp},loadConfig:function(e){r||(o=this.getTestConfig(e),this.getAmpPremier().loadDefaults(this.getConfig(e)),r=!0)},getPlaybackMode:function(){return this.getVideoPlayerNamespace().AMP.getPlaybackMode()},getConfig:function(t){return a(e.extend({},t))},getDebugConfigParams:function(){return{akamaiJsLibFolderUrl:"../amp.premier",akamaiResourcesFolderUrl:"../resources"}},getTestConfig:function(t){return a(e.extend({},t,this.getDebugConfigParams()))},getDebugConfig:function(){return o}};return s}),Ndn_Require.define("models/Ndn/VideoPlayer/OverlayAbstractModel",["jquery","backbone"],function(e,t){return t.Model.extend({hide:function(){this.get("view").$el.hide()},show:function(){"function"==typeof this.get("view").show?this.get("view").show():this.get("view").$el.show()}})}),Ndn_Require.define("text!templates/ndn/video-player/enforce-visibility-overlay.html",[],function(){return'<div class="ndn_enforceVisibilityOverlay ndn_playerOverlay">\n	<span class="ndn_errorMessage">This video player must be at least {{minimumDimensions}} pixels in order to operate.</span>\n</div>'}),Ndn_Require.define("views/Ndn/VideoPlayer/EnforceVisibilityOverlayView",["jquery","backbone","mustache","models/Ndn/Widget","text!templates/ndn/video-player/enforce-visibility-overlay.html"],function(e,t,i,n,o){return t.View.extend({initialize:function(){t.View.prototype.initialize.call(this,arguments),this.$el=e(i.to_html(o,{minimumDimensions:this.model.get("minimumWidth")+"x"+this.model.get("minimumHeight")}))},hide:function(){this.$el.hide()},show:function(){this.$el.show()}})}),Ndn_Require.define("jquery_resize",["jquery"],function(e){!function(e,t,i){"$:nomunge";function n(){o=t[s](function(){a.each(function(){var t=e(this),i=t.width(),n=t.height(),o=e.data(this,d);(i!==o.w||n!==o.h)&&t.trigger(l,[o.w=i,o.h=n])}),n()},r[c])}var o,a=e([]),r=e.resize=e.extend(e.resize,{}),s="setTimeout",l="resize",d=l+"-special-event",c="delay",u="throttleWindow";r[c]=250,r[u]=!0,e.event.special[l]={setup:function(){if(!r[u]&&this[s])return!1;var t=e(this);a=a.add(t),e.data(this,d,{w:t.width(),h:t.height()}),1===a.length&&n()},teardown:function(){if(!r[u]&&this[s])return!1;var t=e(this);a=a.not(t),t.removeData(d),a.length||clearTimeout(o)},add:function(t){function n(t,n,a){var r=e(this),s=e.data(this,d);s.w=n!==i?n:r.width(),s.h=a!==i?a:r.height(),o.apply(this,arguments)}if(!r[u]&&this[s])return!1;var o;return e.isFunction(t)?(o=t,n):(o=t.handler,void(t.handler=n))}}}(e,this)}),Ndn_Require.define("models/Ndn/VideoPlayer/EnforceVisibilityOverlayModel",["jquery","models/Ndn/VideoPlayer/OverlayAbstractModel","views/Ndn/VideoPlayer/EnforceVisibilityOverlayView","jquery_resize"],function(e,t,i){var n=function(){var e=this.get("videoPlayer").getContainerElement(),t=e.width()>=this.get("minimumWidth")&&e.height()>=this.get("minimumHeight")&&e.is(":visible"),i=t!==this.get("meetsVisibilityRequirements");this.set("meetsVisibilityRequirements",t),i&&(t?a.call(this):o.call(this))},o=function(){this.get("view").show(),this.set("wasPlayingBeforeViolation",this.get("videoPlayer").isPlaying()),this.get("videoPlayer").pause(),this.trigger("visibilityViolation")},a=function(){this.get("view").hide(),this.get("wasPlayingBeforeViolation")&&this.get("videoPlayer").play(),this.trigger("visibilityAppeasement")};return t.extend({defaults:{videoPlayer:null,minimumWidth:300,minimumHeight:170,meetsVisibilityRequirements:null,wasPlayingBeforeViolation:!1,view:null},initialize:function(t){this.set({videoPlayer:t,view:new i({model:this})}),this.get("view").hide(),t.onceEmbedded(e.proxy(function(){this.get("videoPlayer").getContainerElement().append(this.get("view").$el),t.getContainerElement().resize(e.proxy(function(){n.call(this)},this))},this)),t.addDeliberator("loadAttempt",e.proxy(function(e){n.call(this),this.get("meetsVisibilityRequirements")?e.resolve():this.once("visibilityAppeasement",e.resolve)},this))}})}),Ndn_Require.define("models/Ndn/Utils/FastClick",[],function(){var e="ontouchstart"in window;return function(t){function i(e){return l=!0,s.x=e.targetTouches[0].clientX,s.y=e.targetTouches[0].clientY,s.scroll=window.pageYOffset,!0}function n(e){return l&&(Math.abs(e.targetTouches[0].clientX-s.x)>10||Math.abs(e.targetTouches[0].clientY-s.y)>10)&&(l=!1),!0}function o(e){var t,i;return!l||Math.abs(window.pageYOffset-s.scroll)>5?!0:(t=document.elementFromPoint(s.x,s.y),t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),(-1===t.className.indexOf("ndn_fastClick_clickevent")||-1!==t.className.indexOf("ndn_fastClick_touchandclickevent"))&&(i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,1,0,0,s.x,s.y,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)),t instanceof HTMLSelectElement||-1!==t.className.indexOf("ndn_fastClick_clickevent")?!1:void e.preventDefault())}function a(){l=!1}function r(t){if(!window.event)return!0;var i,n=!0,o=window.event.forwardedTouchEvent;return e&&(i=document.elementFromPoint(s.x,s.y),(!i||!o&&-1==i.className.indexOf("ndn_fastClick_clickevent"))&&(n=!1)),n?!0:(t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation(),!1)}if("undefined"==typeof HTMLElement)return!1;if(!(t instanceof HTMLElement))throw new TypeError("Layer must be instance of HTMLElement");e&&(t.addEventListener("touchstart",i,!0),t.addEventListener("touchmove",n,!0),t.addEventListener("touchend",o,!0),t.addEventListener("touchcancel",a,!0)),t.addEventListener("click",r,!0),t.onclick instanceof Function&&(t.addEventListener("click",t.onclick,!1),t.onclick="");var s={x:0,y:0,scroll:0},l=!1}}),Ndn_Require.define("text!templates/ndn/video-player/start-overlay.html",[],function(){return'<div class="ndn_startOverlayContainer ndn_playerOverlay">\n	<div class="ndn_startOverlay">\n		<div class="ndn_startPlay ndn_fastClick_touchandclickevent"></div>\n	</div>\n</div>'}),Ndn_Require.define("views/Ndn/VideoPlayer/StartOverlayView",["jquery","mustache","backbone","models/Ndn/Utils/FastClick","text!templates/ndn/video-player/start-overlay.html"],function(e,t,i,n,o){return i.View.extend({events:{"click .ndn_startOverlay":"start"},initialize:function(){i.View.prototype.initialize.call(this,arguments),this.$el=e(t.to_html(o,{})),new n(this.$el.find(".ndn_fastClick_touchandclickevent").get(0))},start:function(){this.model.get("videoPlayer").play()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}})}),Ndn_Require.define("models/Ndn/VideoPlayer/StartOverlayModel",["jquery","underscore","models/Ndn/VideoPlayer/OverlayAbstractModel","views/Ndn/VideoPlayer/StartOverlayView"],function(e,t,i,n){return i.extend({defaults:{videoPlayer:null,view:null},initialize:function(t){this.set("videoPlayer",t),this.set("view",new n({model:this})),this.get("videoPlayer").onceEmbedded(e.proxy(function(){this.get("videoPlayer").getContainerElement().append(this.get("view").$el.hide())},this));var i=e.proxy(function(){this.get("view").hide()},this);this.get("videoPlayer").on({videoLoadStart:e.proxy(function(){this.get("videoPlayer").onceEmbedded(e.proxy(function(){this.get("view").show(),this.get("videoPlayer").once("videoTimeUpdate",i),this.get("videoPlayer").get("widget").get("config").adsEnabled&&this.get("videoPlayer").once("adTimeUpdate",i)},this))},this),play:i,videoStartRequest:i,adStart:i,videoStart:i})}})}),Ndn_Require.define("models/Ndn/SocialSharing/AddThisModel",["jquery","require","backbone"],function(e,t,i){var n=!1,o=function(e){n?e():a.once("addThisLoaded",e)},a=new i.Model,r=0,s={toolbox:function(t){o(function(){t.each(function(t,i){var n=e(i),o=n.attr("id");n.attr("id")||(o="ndn_addThis_toolboxElement_"+ ++r,n.attr("id",o)),addthis.toolbox("#"+o)})})}};return Ndn_Require.require(["addThis"],function(){n=!0,a.trigger("addThisLoaded")}),s}),Ndn_Require.define("text!templates/ndn/video-player/pause-overlay/overlay.html",[],function(){return'<div class="ndn_pauseOverlay">\n    <div class="ndn_pauseVideoInfo">\n        <h1>{{currentTitle}}</h1>\n        <p>{{currentDescription}}</p>\n        <img class="ndn_pauseVideoLogo" src="{{producerLogo}}" /> </div>\n    <div class="ndn_pausePrevNextButtons"></div>\n    <div class="ndn_pauseOverlay_centerContainer">\n        <div class="addthis_toolbox ndn_pauseShare"></div>\n        <div class="ndn_pausePlayButton ndn_fastClick_touchandclickevent"></div>\n    </div>\n    <div class="ndn_pauseCarousel"></div>\n    <div class="ndn_pauseOverlay_blackOverlay"></div>\n</div>\n'}),Ndn_Require.define("text!templates/ndn/video-player/pause-overlay/previous-and-next-videos.html",[],function(){return'<div class="ndn_pausePrevNextButton ndn_pausePrev">\n	<div class="ndn_pausePrevNextHeader ndn_pausePrevHeader">Previous</div>\n	<div class="ndn_prevNextImageWrap">\n		<img class="ndn_upPrevLink" src="{{prevThumb}}" data-video-id="{{videoId}}" title="{{prevTitle}}" data-video-index="{{prevVideoIndex}}" />\n		<div class="ndn_pauseStateDuration ndn_durationMinutes ndn_js_prevDuration">{{prevDuration}}</div>\n	</div>\n	<div class="ndn_videoMetaPause">\n		<div class="ndn_pausePrevDescription">{{prevTitle}}</div>\n	</div>\n</div>\n<div class="ndn_pausePrevNextButton ndn_pauseNext">\n	<div class="ndn_pausePrevNextHeader ndn_pauseNextHeader">Up Next</div>\n	<div class="ndn_prevNextImageWrap">\n		<img class="ndn_upNextLink" src="{{nextThumb}}" data-video-id="{{videoId}}" title="{{nextTitle}}" data-video-index="{{nextVideoIndex}}" />\n		<p class="ndn_pauseStateDuration ndn_durationMinutes ndn_js_nextDuration">{{nextDuration}}</p>\n	</div>\n	<div class="ndn_videoMetaPause">\n		<div class="ndn_pauseNextDescription">{{nextTitle}}</div>\n	</div>\n</div>'}),Ndn_Require.define("text!templates/ndn/video-player/pause-overlay/share-icons.html",[],function(){return'<ul>\n	<li class="ndn_pauseShareFacebookPause">\n		<a class="ndn_a_shareFacebook" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/facebook/offer?url={{singleVideoFeed}}&title={{currentTitle}}&pubid={{pubId}}&ct=1"></a>\n	</li>\n	<li class="ndn_pauseShareTwitterPause">\n		<a class="ndn_a_shareTwitter" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/twitter/offer?url={{singleVideoFeed}}&title={{currentTitle}}&description={{currentDescription}}&screenshot={{currentThumb}}&pubid={{pubId}}&ct=1"></a>\n	</li>\n	<li class="ndn_pauseShareEmailPause">\n		<a class="addthis_button_email ndn_a_shareEmail" addthis:url="{{singleVideoFeed}}" addthis:title="Check out this video: \'{{currentTitle}}\'" addthis:description="{{currentDescription}}"></a>\n	</li>\n	<li class="ndn_pauseShareOtherPause">\n		<a href="#ndn-widget-embed-1-player"></a>\n	</li>\n</ul>'}),Ndn_Require.define("text!templates/ndn/video-player/pause-overlay/carousel.html",[],function(){return'<div class="ndn_sliderPrev ndn_sliderNavButton"></div>\n<div class="ndn_sliderWrapper">\n	<ul class="ndn_sliderItems ndn_pauseOverlay_selectableVideos">\n        {{#playlistItems}}\n        <li class="ndn_pauseOverlay_selectableVideo" data-video-id="{{videoId}}" title="{{videoTitle}}" data-video-index="{{videoIndex}}">\n            <div class="ndn_thumbContainer ndn_sliderThumbnailImageWrapper">\n                <img data-src="{{thumbnailUrl}}"/>\n                <div class="ndn_sliderThumbnailOverlay">\n                    {{displayDuration}}\n                </div>\n                <div class="ndn_sliderThumbnailPlay"></div>\n            </div>\n            <div class="ndn_sliderThumbnailTitle">\n                <p>{{videoTitle}}</p>\n            </div>\n        </li>\n        {{/playlistItems}}\n    </ul>\n</div>\n<div class="ndn_sliderNext ndn_sliderNavButton"></div>\n'}),Ndn_Require.define("jquery_imagesloaded",["jquery"],function(e,t){var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(n){function o(){var t=e(p),i=e(h);l&&(h.length?l.reject(c,t,i):l.resolve(c)),e.isFunction(n)&&n.call(s,c,t,i)}function a(e){r(e.target,"error"===e.type)}function r(t,n){t.src===i||-1!==e.inArray(t,u)||(u.push(t),n?h.push(t):p.push(t),e.data(t,"imagesLoaded",{isBroken:n,src:t.src}),d&&l.notifyWith(e(t),[n,c,e(p),e(h)]),c.length===u.length&&(setTimeout(o),c.unbind(".imagesLoaded",a)))}var s=this,l=e.isFunction(e.Deferred)?e.Deferred():0,d=e.isFunction(l.notify),c=s.find("img").add(s.filter("img")),u=[],p=[],h=[];return e.isPlainObject(n)&&e.each(n,function(e,t){"callback"===e?n=t:l&&l[e](t)}),c.length?c.bind("load.imagesLoaded error.imagesLoaded",a).each(function(n,o){var a=o.src,s=e.data(o,"imagesLoaded");s&&s.src===a?r(o,s.isBroken):o.complete&&o.naturalWidth!==t?r(o,0===o.naturalWidth||0===o.naturalHeight):(o.readyState||o.complete)&&(o.src=i,o.src=a)}):o(),l?l.promise(s):s}}),Ndn_Require.define("jquery_autoellipsis",["jquery"],function(e){!function(e){function t(t){void 0===window.ndn_ellipsis_handler&&(window.ndn_ellipsis_handler=new EllipsisResizeHandler,e(window).on("resize",function(){clearTimeout(window.ndnResizeTimeout),window.ndnResizeTimeout=setTimeout(function(){window.ndn_ellipsis_handler.onResize.call(window.ndn_ellipsis_handler)},100)})),t.each(function(){window.ndn_ellipsis_handler.$elements=window.ndn_ellipsis_handler.$elements.add(this)})}function i(t,i){var r=t.data("jqae");r||(r={});var s=r.wrapperElement;s||(s=t.wrapInner("<div/>").find(">div"),s.css({margin:"-1px 0 0 0",padding:0,border:0}));var l=s.data("jqae");l||(l={});var d=l.originalContent;d?s=l.originalContent.clone(!0).data("jqae",{originalContent:d}).replaceAll(s):s.data("jqae",{originalContent:s.clone(!0)}),t.data("jqae",{wrapperElement:s,containerWidth:t.width(),containerHeight:t.height()});var c=t.height(),u=(parseInt(t.css("padding-top"),10)||0)+(parseInt(t.css("border-top-width"),10)||0)-(s.offset().top-t.offset().top),p=!1,h=s;i.selector&&(h=e(s.find(i.selector).get().reverse())),h.each(function(){var t=e(this),r=t.text(),l=!1;if(s.innerHeight()-t.innerHeight()>c+u)t.remove();else if(a(t),t.contents().length){if(p&&(o(t).get(0).nodeValue+=i.ellipsis,p=!1),1==t.contents().length){if(void 0===t.data("jaelh")){var d=s.attr("style"),h=s.html();s.attr("style","height: auto; padding: 0;").html("&nbsp;"),s.data("jaelh",s.innerHeight()),s.html(h),void 0!==d?s.attr("style",d):s.removeAttr("style")}var g=c+u+t.data("jaelh"),f=s.innerHeight(),m=g/f;if(1>m){var y=o(t),v=y.get(0).nodeValue.split(" ");y.get(0).nodeValue=_.first(v,Math.ceil(v.length*m)).join(" ")}}for(;s.innerHeight()>c+u;){if(l=n(t),!l){p=!0,t.remove();break}if(a(t),!t.contents().length){p=!0,t.remove();break}o(t).get(0).nodeValue+=i.ellipsis}"onEllipsis"==i.setTitle&&l||"always"==i.setTitle?t.attr("title",r):"never"!=i.setTitle&&t.removeAttr("title")}})}function n(t){var i=o(t);if(i.length){var n=i.get(0).nodeValue,a=n.lastIndexOf(" ");return a>-1?(n=e.trim(n.substring(0,a)),i.get(0).nodeValue=n):i.get(0).nodeValue="",!0}return!1}function o(e){if(e.contents().length){var t=e.contents(),i=t.eq(t.length-1);return i.filter(r).length?i:o(i)}e.append("");var t=e.contents();return t.eq(t.length-1)}function a(t){if(t.contents().length){var i=t.contents(),n=i.eq(i.length-1);if(n.filter(r).length){var o=n.get(0).nodeValue;return o=e.trim(o),""==o?(n.remove(),!0):!1}for(;a(n););return n.contents().length?!1:(n.remove(),!0)}return!1}function r(){return 3===this.nodeType}function s(e,t){u[e]=t,c||(c=window.setInterval(function(){d()},200))}function l(e){u[e]&&(delete u[e],u.length||c&&(window.clearInterval(c),c=void 0))}function d(){if(!p){p=!0;for(var t in u)e(t).each(function(){var n,o;n=e(this),o=n.data("jqae"),(o.containerWidth!=n.width()||o.containerHeight!=n.height())&&i(n,u[t])});p=!1}}EllipsisResizeHandler=function(){this.$elements=e(),this.onResize=function(){this.$elements.ellipsis()}};var c,u={},p=!1,h={ellipsis:"...",setTitle:"never",live:!1};e.fn.ellipsis=function(n,o){var a,r;return a=e(this),"string"!=typeof n&&(o=n,n=void 0),r=e.extend({},h,o),r.selector=n,a.each(function(){var t=e(this);i(t,r)}),r.live?s(a.selector,r):l(a.selector),r.updateOnWindowResize&&t(a),this}}(e)}),Ndn_Require.define("jquery_bxslider",["jquery"],function(e){var t={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};e.fn.bxSlider=function(o){if(0==this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(o)}),this;var a={},r=this;t.el=this;var s=e(window).width(),l=e(window).height(),d=function(){a.settings=e.extend({},n,o),a.settings.slideWidth=parseInt(a.settings.slideWidth),a.children=r.children(a.settings.slideSelector),a.children.length<a.settings.minSlides&&(a.settings.minSlides=a.children.length),a.children.length<a.settings.maxSlides&&(a.settings.maxSlides=a.children.length),a.settings.randomStart&&(a.settings.startSlide=Math.floor(Math.random()*a.children.length)),a.active={index:a.settings.startSlide},a.carousel=a.settings.minSlides>1||a.settings.maxSlides>1,a.carousel&&(a.settings.preloadImages="all"),a.minThreshold=a.settings.minSlides*a.settings.slideWidth+(a.settings.minSlides-1)*a.settings.slideMargin,a.maxThreshold=a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin,a.working=!1,a.controls={},a.interval=null,a.animProp="vertical"==a.settings.mode?"top":"left",a.usingCSS=a.settings.useCSS&&"fade"!=a.settings.mode&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return a.cssPrefix=t[i].replace("Perspective","").toLowerCase(),a.animProp="-"+a.cssPrefix+"-transform",!0;return!1}(),"vertical"==a.settings.mode&&(a.settings.maxSlides=a.settings.minSlides),c()},c=function(){r.wrap('<div class="ndn_carousel-wrapper"><div class="ndn_carousel-viewport"></div></div>'),a.viewport=r.parent(),a.loader=e('<div class="ndn_carousel-loading" />'),a.viewport.prepend(a.loader),r.css({width:"horizontal"==a.settings.mode?215*a.children.length+"%":"auto",position:"relative"}),a.usingCSS&&a.settings.easing?r.css("-"+a.cssPrefix+"-transition-timing-function",a.settings.easing):a.settings.easing||(a.settings.easing="swing");f();if(a.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),a.viewport.parent().css({maxWidth:h()}),a.children.css({"float":"horizontal"==a.settings.mode?"left":"none",listStyle:"none",position:"relative"}),a.children.width(g()),"horizontal"==a.settings.mode&&a.settings.slideMargin>0&&a.children.css("marginRight",a.settings.slideMargin),"vertical"==a.settings.mode&&a.settings.slideMargin>0&&a.children.css("marginBottom",a.settings.slideMargin),"fade"==a.settings.mode&&(a.children.css({position:"absolute",zIndex:0,display:"none"}),a.children.eq(a.settings.startSlide).css({zIndex:50,display:"block"})),a.controls.el=e('<div class="ndn_carousel-controls" />'),a.settings.captions&&P(),a.settings.infiniteLoop&&"fade"!=a.settings.mode&&!a.settings.ticker){var t="vertical"==a.settings.mode?a.settings.minSlides:a.settings.maxSlides,i=a.children.slice(0,t).clone().addClass("ndn_carousel-clone"),n=a.children.slice(-t).clone().addClass("ndn_carousel-clone");r.append(i).prepend(n)}a.active.last=a.settings.startSlide==m()-1,a.settings.video&&r.fitVids();var o=a.children.eq(a.settings.startSlide);"all"==a.settings.preloadImages&&(o=r.children()),a.settings.ticker?a.settings.pager=!1:(a.settings.pager&&A(),a.settings.controls&&C(),a.settings.auto&&a.settings.autoControls&&b(),(a.settings.controls||a.settings.autoControls||a.settings.pager)&&a.viewport.after(a.controls.el)),o.imagesLoaded(u)},u=function(){a.loader.remove(),v(),"vertical"==a.settings.mode&&(a.settings.adaptiveHeight=!0),a.viewport.height(p()),r.redrawSlider(),a.settings.onSliderLoad(a.active.index),a.initialized=!0,e(window).bind("resize",G),a.settings.auto&&a.settings.autoStart&&k(),a.settings.ticker&&R(),a.settings.pager&&x(a.settings.startSlide),a.settings.controls&&D(),a.settings.touchEnabled&&!a.settings.ticker&&O()
},p=function(){var t=0,n=e();if("vertical"==a.settings.mode||a.settings.adaptiveHeight)if(a.carousel){var o=1==a.settings.moveSlides?a.active.index:a.active.index*y();for(n=a.children.eq(o),i=1;i<=a.settings.maxSlides-1;i++)n=n.add(o+i>=a.children.length?a.children.eq(i-1):a.children.eq(o+i))}else n=a.children.eq(a.active.index);else n=a.children;return"vertical"==a.settings.mode?(n.each(function(){t+=e(this).outerHeight()}),a.settings.slideMargin>0&&(t+=a.settings.slideMargin*(a.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),t},h=function(){var e="100%";return a.settings.slideWidth>0&&(e="horizontal"==a.settings.mode?a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin:a.settings.slideWidth),e},g=function(){var e=a.settings.slideWidth,t=a.viewport.width();return 0==a.settings.slideWidth||a.settings.slideWidth>t&&!a.carousel||"vertical"==a.settings.mode?e=t:a.settings.maxSlides>1&&"horizontal"==a.settings.mode&&(t>a.maxThreshold||t<a.minThreshold&&(e=(t-a.settings.slideMargin*(a.settings.minSlides-1))/a.settings.minSlides)),e},f=function(){var e=1;if("horizontal"==a.settings.mode&&a.settings.slideWidth>0)if(a.viewport.width()<a.minThreshold)e=a.settings.minSlides;else if(a.viewport.width()>a.maxThreshold)e=a.settings.maxSlides;else{var t=a.children.first().width();e=Math.floor(a.viewport.width()/t)}else"vertical"==a.settings.mode&&(e=a.settings.minSlides);return e},m=function(){var e=0;if(a.settings.moveSlides>0)if(a.settings.infiniteLoop)e=a.children.length/y();else for(var t=0,i=0;t<a.children.length;)++e,t=i+f(),i+=a.settings.moveSlides<=f()?a.settings.moveSlides:f();else e=Math.ceil(a.children.length/f());return e},y=function(){return a.settings.moveSlides>0&&a.settings.moveSlides<=f()?a.settings.moveSlides:f()},v=function(){if(a.children.length>a.settings.maxSlides&&a.active.last&&!a.settings.infiniteLoop){if("horizontal"==a.settings.mode){var e=a.children.last(),t=e.position();_(-(t.left-(a.viewport.width()-e.width())),"reset",0)}else if("vertical"==a.settings.mode){var i=a.children.length-a.settings.minSlides,t=a.children.eq(i).position();_(-t.top,"reset",0)}}else{var t=a.children.eq(a.active.index*y()).position();a.active.index==m()-1&&(a.active.last=!0),void 0!=t&&("horizontal"==a.settings.mode?_(-t.left,"reset",0):"vertical"==a.settings.mode&&_(-t.top,"reset",0))}},_=function(e,t,i,n){if(a.usingCSS){var o="vertical"==a.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";r.css("-"+a.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==t?(r.css(a.animProp,o),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),M()})):"reset"==t?r.css(a.animProp,o):"ticker"==t&&(r.css("-"+a.cssPrefix+"-transition-timing-function","linear"),r.css(a.animProp,o),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),_(n.resetValue,"reset",0),V()}))}else{var s={};s[a.animProp]=e,"slide"==t?r.animate(s,i,a.settings.easing,function(){M()}):"reset"==t?r.css(a.animProp,e):"ticker"==t&&r.animate(s,speed,"linear",function(){_(n.resetValue,"reset",0),V()})}},E=function(){for(var t="",i=m(),n=0;i>n;n++){var o="";a.settings.buildPager&&e.isFunction(a.settings.buildPager)?(o=a.settings.buildPager(n),a.pagerEl.addClass("ndn_carousel-custom-pager")):(o=n+1,a.pagerEl.addClass("ndn_carousel-default-pager")),t+='<div class="ndn_carousel-pager-item"><a href="" data-slide-index="'+n+'" class="ndn_carousel-pager-link">'+o+"</a></div>"}a.pagerEl.html(t)},A=function(){a.settings.pagerCustom?a.pagerEl=e(a.settings.pagerCustom):(a.pagerEl=e('<div class="ndn_carousel-pager" />'),a.settings.pagerSelector?e(a.settings.pagerSelector).html(a.pagerEl):a.controls.el.addClass("ndn_carousel-has-pager").append(a.pagerEl),E()),a.pagerEl.delegate("a","click",I)},C=function(){a.controls.next=e('<a class="ndn_carousel-next" href="">'+a.settings.nextText+"</a>"),a.controls.prev=e('<a class="ndn_carousel-prev" href="">'+a.settings.prevText+"</a>"),a.controls.next.bind("click",T),a.controls.prev.bind("click",N),a.settings.nextSelector&&e(a.settings.nextSelector).append(a.controls.next),a.settings.prevSelector&&e(a.settings.prevSelector).append(a.controls.prev),a.settings.nextSelector||a.settings.prevSelector||(a.controls.directionEl=e('<div class="ndn_carousel-controls-direction" />'),a.controls.directionEl.append(a.controls.prev).append(a.controls.next),a.controls.el.addClass("ndn_carousel-has-controls-direction").append(a.controls.directionEl))},b=function(){a.controls.start=e('<div class="ndn_carousel-controls-auto-item"><a class="ndn_carousel-start" href="">'+a.settings.startText+"</a></div>"),a.controls.stop=e('<div class="ndn_carousel-controls-auto-item"><a class="ndn_carousel-stop" href="">'+a.settings.stopText+"</a></div>"),a.controls.autoEl=e('<div class="ndn_carousel-controls-auto" />'),a.controls.autoEl.delegate(".ndn_carousel-start","click",S),a.controls.autoEl.delegate(".ndn_carousel-stop","click",w),a.settings.autoControlsCombine?a.controls.autoEl.append(a.controls.start):a.controls.autoEl.append(a.controls.start).append(a.controls.stop),a.settings.autoControlsSelector?e(a.settings.autoControlsSelector).html(a.controls.autoEl):a.controls.el.addClass("ndn_carousel-has-controls-auto").append(a.controls.autoEl),L(a.settings.autoStart?"stop":"start")},P=function(){a.children.each(function(){var t=e(this).find("img:first").attr("title");void 0!=t&&e(this).append('<div class="ndn_carousel-caption"><span>'+t+"</span></div>")})},T=function(e){a.settings.auto&&r.stopAuto(),r.goToNextSlide(),e.preventDefault()},N=function(e){a.settings.auto&&r.stopAuto(),r.goToPrevSlide(),e.preventDefault()},S=function(e){r.startAuto(),e.preventDefault()},w=function(e){r.stopAuto(),e.preventDefault()},I=function(t){a.settings.auto&&r.stopAuto();var i=e(t.currentTarget),n=parseInt(i.attr("data-slide-index"));n!=a.active.index&&r.goToSlide(n),t.preventDefault()},x=function(t){return"short"==a.settings.pagerType?void a.pagerEl.html(t+1+a.settings.pagerShortSeparator+a.children.length):(a.pagerEl.find("a").removeClass("active"),void a.pagerEl.each(function(i,n){e(n).find("a").eq(t).addClass("active")}))},M=function(){if(a.settings.infiniteLoop){var e="";0==a.active.index?e=a.children.eq(0).position():a.active.index==m()-1&&a.carousel?e=a.children.eq((m()-1)*y()).position():a.active.index==a.children.length-1&&(e=a.children.eq(a.children.length-1).position()),"horizontal"==a.settings.mode?_(-e.left,"reset",0):"vertical"==a.settings.mode&&_(-e.top,"reset",0)}a.working=!1,a.settings.onSlideAfter(a.children.eq(a.active.index),a.oldIndex,a.active.index)},L=function(e){a.settings.autoControlsCombine?a.controls.autoEl.html(a.controls[e]):(a.controls.autoEl.find("a").removeClass("active"),a.controls.autoEl.find("a:not(.ndn_carousel-"+e+")").addClass("active"))},D=function(){1==m()?(a.controls.prev.addClass("disabled"),a.controls.next.addClass("disabled")):!a.settings.infiniteLoop&&a.settings.hideControlOnEnd&&(0==a.active.index?(a.controls.prev.addClass("disabled"),a.controls.next.removeClass("disabled")):a.active.index==m()-1?(a.controls.next.addClass("disabled"),a.controls.prev.removeClass("disabled")):(a.controls.prev.removeClass("disabled"),a.controls.next.removeClass("disabled")))},k=function(){if(a.settings.autoDelay>0){setTimeout(r.startAuto,a.settings.autoDelay)}else r.startAuto();a.settings.autoHover&&r.hover(function(){a.interval&&(r.stopAuto(!0),a.autoPaused=!0)},function(){a.autoPaused&&(r.startAuto(!0),a.autoPaused=null)})},R=function(){var t=0;if("next"==a.settings.autoDirection)r.append(a.children.clone().addClass("ndn_carousel-clone"));else{r.prepend(a.children.clone().addClass("ndn_carousel-clone"));var i=a.children.first().position();t="horizontal"==a.settings.mode?-i.left:-i.top}_(t,"reset",0),a.settings.pager=!1,a.settings.controls=!1,a.settings.autoControls=!1,a.settings.tickerHover&&!a.usingCSS&&a.viewport.hover(function(){r.stop()},function(){var t=0;a.children.each(function(){t+="horizontal"==a.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)});var i=a.settings.speed/t,n="horizontal"==a.settings.mode?"left":"top",o=i*(t-Math.abs(parseInt(r.css(n))));V(o)}),V()},V=function(e){speed=e?e:a.settings.speed;var t={left:0,top:0},i={left:0,top:0};"next"==a.settings.autoDirection?t=r.find(".ndn_carousel-clone").first().position():i=a.children.first().position();var n="horizontal"==a.settings.mode?-t.left:-t.top,o="horizontal"==a.settings.mode?-i.left:-i.top,s={resetValue:o};_(n,"ticker",speed,s)},O=function(){a.touch={start:{x:0,y:0},end:{x:0,y:0}},a.viewport.bind("touchstart",U)},U=function(e){if(a.working)e.preventDefault();else{a.touch.originalPos=r.position();var t=e.originalEvent;a.touch.start.x=t.changedTouches[0].pageX,a.touch.start.y=t.changedTouches[0].pageY,a.viewport.bind("touchmove",H),a.viewport.bind("touchend",B)}},H=function(e){var t=e.originalEvent,i=Math.abs(t.changedTouches[0].pageX-a.touch.start.x),n=Math.abs(t.changedTouches[0].pageY-a.touch.start.y);if(3*i>n&&a.settings.preventDefaultSwipeX?e.preventDefault():3*n>i&&a.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=a.settings.mode&&a.settings.oneToOneTouch){var o=0;if("horizontal"==a.settings.mode){var r=t.changedTouches[0].pageX-a.touch.start.x;o=a.touch.originalPos.left+r}else{var r=t.changedTouches[0].pageY-a.touch.start.y;o=a.touch.originalPos.top+r}_(o,"reset",0)}},B=function(e){a.viewport.unbind("touchmove",H);var t=e.originalEvent,i=0;if(a.touch.end.x=t.changedTouches[0].pageX,a.touch.end.y=t.changedTouches[0].pageY,"fade"==a.settings.mode){var n=Math.abs(a.touch.start.x-a.touch.end.x);n>=a.settings.swipeThreshold&&(a.touch.start.x>a.touch.end.x?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto())}else{var n=0;"horizontal"==a.settings.mode?(n=a.touch.end.x-a.touch.start.x,i=a.touch.originalPos.left):(n=a.touch.end.y-a.touch.start.y,i=a.touch.originalPos.top),!a.settings.infiniteLoop&&(0==a.active.index&&n>0||a.active.last&&0>n)?_(i,"reset",200):Math.abs(n)>=a.settings.swipeThreshold?(0>n?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto()):_(i,"reset",200)}a.viewport.unbind("touchend",B)},G=function(){var t=e(window).width(),i=e(window).height();(s!=t||l!=i)&&(s=t,l=i,r.redrawSlider())};return r.goToSlide=function(t,i){if(!a.working&&a.active.index!=t)if(a.working=!0,a.oldIndex=a.active.index,a.active.index=0>t?m()-1:t>=m()?0:t,a.settings.onSlideBefore(a.children.eq(a.active.index),a.oldIndex,a.active.index),"next"==i?a.settings.onSlideNext(a.children.eq(a.active.index),a.oldIndex,a.active.index):"prev"==i&&a.settings.onSlidePrev(a.children.eq(a.active.index),a.oldIndex,a.active.index),a.active.last=a.active.index>=m()-1,a.settings.pager&&x(a.active.index),a.settings.controls&&D(),"fade"==a.settings.mode)a.settings.adaptiveHeight&&a.viewport.height()!=p()&&a.viewport.animate({height:p()},a.settings.adaptiveHeightSpeed),a.children.filter(":visible").fadeOut(a.settings.speed).css({zIndex:0}),a.children.eq(a.active.index).css("zIndex",51).fadeIn(a.settings.speed,function(){e(this).css("zIndex",50),M()});else{a.settings.adaptiveHeight&&a.viewport.height()!=p()&&a.viewport.animate({height:p()},a.settings.adaptiveHeightSpeed);var n=0,o={left:0,top:0};if(!a.settings.infiniteLoop&&a.carousel&&a.active.last)if("horizontal"==a.settings.mode){var s=a.children.eq(a.children.length-1);o=s.position(),n=a.viewport.width()-s.width()}else{var l=a.children.length-a.settings.minSlides;o=a.children.eq(l).position()}else if(a.carousel&&a.active.last&&"prev"==i){var d=1==a.settings.moveSlides?a.settings.maxSlides-y():(m()-1)*y()-(a.children.length-a.settings.maxSlides),s=r.children(".ndn_carousel-clone").eq(d);o=s.position()}else if("next"==i&&0==a.active.index)o=r.find("> .ndn_carousel-clone").eq(a.settings.maxSlides).position(),a.active.last=!1;else if(t>=0){var c=t*y();o=a.children.eq(c).position()}if("undefined"!=typeof o){var u="horizontal"==a.settings.mode?-(o.left-n):-o.top;_(u,"slide",a.settings.speed)}}},r.goToNextSlide=function(){if(a.settings.infiniteLoop||!a.active.last){var e=parseInt(a.active.index)+1;r.goToSlide(e,"next")}},r.goToPrevSlide=function(){if(a.settings.infiniteLoop||0!=a.active.index){var e=parseInt(a.active.index)-1;r.goToSlide(e,"prev")}},r.startAuto=function(e){a.interval||(a.interval=setInterval(function(){"next"==a.settings.autoDirection?r.goToNextSlide():r.goToPrevSlide()},a.settings.pause),a.settings.autoControls&&1!=e&&L("stop"))},r.stopAuto=function(e){a.interval&&(clearInterval(a.interval),a.interval=null,a.settings.autoControls&&1!=e&&L("start"))},r.getCurrentSlide=function(){return a.active.index},r.getSlideCount=function(){return a.children.length},r.redrawSlider=function(){a.children.add(r.find(".ndn_carousel-clone")).width(g()),a.viewport.css("height",p()),a.settings.ticker||v(),a.active.last&&(a.active.index=m()-1),a.active.index>=m()&&(a.active.last=!0),a.settings.pager&&!a.settings.pagerCustom&&(E(),x(a.active.index))},r.destroySlider=function(){a.initialized&&(a.initialized=!1,e(".ndn_carousel-clone",this).remove(),a.children.removeAttr("style"),this.removeAttr("style").unwrap().unwrap(),a.controls.el&&a.controls.el.remove(),a.controls.next&&a.controls.next.remove(),a.controls.prev&&a.controls.prev.remove(),a.pagerEl&&a.pagerEl.remove(),e(".ndn_carousel-caption",this).remove(),a.controls.autoEl&&a.controls.autoEl.remove(),clearInterval(a.interval),e(window).unbind("resize",G))},r.reloadSlider=function(e){void 0!=e&&(o=e),r.destroySlider(),d()},d(),this}}),Ndn_Require.define("views/Ndn/VideoPlayer/PauseOverlayView",["jquery","backbone","mustache","models/Ndn/SocialSharing/AddThisModel","models/Ndn/Utils/FastClick","models/Ndn/Utils/UserAgent","text!templates/ndn/video-player/pause-overlay/overlay.html","text!templates/ndn/video-player/pause-overlay/previous-and-next-videos.html","text!templates/ndn/video-player/pause-overlay/share-icons.html","text!templates/ndn/video-player/pause-overlay/carousel.html","jquery_imagesloaded","jquery_autoellipsis","jquery_bxslider"],function(e,t,i,n,o,a,r,s,l,d){return t.View.extend({events:{"click .ndn_pauseNext":"onUpNextClick","click .ndn_pausePrev":"onPrevClick","click .ndn_pauseShareOtherPause":"openShareOverlay","click .ndn_pauseShareFacebookPause":"stopPropagation","click .ndn_pauseShareTwitterPause":"stopPropagation","click .ndn_pauseShareEmailPause":"stopPropagation","click .ndn_pauseOverlay_selectableVideo":"onVideoSelect","click .ndn_pauseOverlay":"resumePlay","click .ndn_sliderNext":"onSliderNextClick","click .ndn_sliderPrev":"onSliderPrevClick"},stopPropagation:function(e){e.stopPropagation()},carousel:null,slides:3,getWidgetContainerElement:function(){return this.model.get("videoPlayer").get("widget").get("view").$el},initialize:function(){t.View.prototype.initialize.call(this,arguments),this.$el=e(document.createElement("div")).addClass("ndn_pauseOverlayContainer ndn_playerOverlay"),this.model.get("videoPlayer").on("videoLoad",e.proxy(function(){this.$el.is(":visible")||this.$el.show(),this.$el.html()||this.generateHtml(),this.generatePreviousAndNextVideoHtml(),this.synchronizeVideoData(),this.$el.is(":visible")&&this.$el.hide()},this))},generateHtml:function(){this.$el.html(i.to_html(r,this.model.getTemplateData())),new o(this.$el.find(".ndn_pausePlayButton").get(0)),this.generatePreviousAndNextVideoHtml(),this.generateCarousel()},generateCarousel:function(){var t="VideoPlayer/Default"==this.model.get("videoPlayer").get("widget").get("config").type&&11!=a.getIeVersion();t&&(this.$el.find(".ndn_pauseCarousel").html(i.to_html(d,this.model.getCarouselData())),this.carousel=e(".ndn_sliderItems").bxSlider({pager:!1,controls:!1,slideWidth:120,slideMargin:10,minSlides:1,maxSlides:100,onSliderLoad:function(){this.$el.find(".ndn_sliderNext, .ndn_sliderPrev").on("touchstart",function(e){e.target.css("background-color","#0099CC")}).on("touchend",function(e){e.target.css("background-color","#000000")}),this.$el.find(".ndn_sliderThumbnailOverlay p").ellipsis()}.bind(this),onSlideBefore:function(e,t,i){this.loadImagesForSlide(i)}.bind(this)}))},generatePreviousAndNextVideoHtml:function(){this.$el.find(".ndn_pausePrevNextButtons")&&this.$el.find(".ndn_pausePrevNextButtons").html(i.to_html(s,this.model.getTemplateData()));var e=!!this.model.get("videoPlayer").getPreviousVideoData(),t=!!this.model.get("videoPlayer").getNextVideoData();this.$el.find(".ndn_pausePrev").toggle(e),this.$el.find(".ndn_pauseNext").toggle(t),this.$el.find(".ndn_pauseShare").toggleClass("ndn_pauseShareSingleVideo",!e&&!t)},synchronizeVideoData:function(){var e=this.model.getTemplateData(),t=this.$el.find(".ndn_pauseVideoInfo");t.find("h1").html(e.currentTitle),t.find("p").html(e.currentDescription),t.find(".ndn_pauseVideoLogo").attr("src",e.producerLogo),this.$el.find(".ndn_pauseBackground").attr("src",e.backgroundImage),this.$el.find(".ndn_pauseShare").html(i.to_html(l,e)),n.toolbox(this.getWidgetContainerElement().find(".addthis_toolbox"));var o=this.model.canShowEmailButton();this.$el.find(".ndn_pauseShareEmailPause").toggle(o),this.$el.find(".ndn_pauseShare ul").toggleClass("ndn_pauseShareNoEmail",!o);var a=this.model.canShowSocialButton();this.$el.find(".ndn_pauseShareFacebookPause, .ndn_pauseShareTwitterPause, .ndn_pauseShareOtherPause").toggle(a),this.$el.find(".ndn_pauseShare ul").toggleClass("ndn_pauseShareNoSocial",!a),this.$el.find(".ndn_pauseVideoInfo h1, .ndn_pauseVideoInfo p").data("jqae",null),this.$el.find(".ndn_pausePrevDescription, .ndn_pauseNextDescription, .ndn_pauseVideoInfo h1, .ndn_pauseVideoInfo p").ellipsis({updateOnWindowResize:!0})},openShareOverlay:function(e){return this.model.get("videoPlayer").get("overlays").share.show(),e.stopPropagation(),e.preventDefault(),!1},resumePlay:function(){return this.$el.find(".ndn_shareOverlay").hide(),this.$el.find(".ndn_pauseOverlayContainer").hide(),this.hide(),this.model.get("videoPlayer").play(),!1},onUpNextClick:function(){var e=this.model.get("videoPlayer").get("currentVideoIndex")+1;return this.model.get("videoPlayer").loadVideo(e,!0),this.hide(),!1},onPrevClick:function(){var e=this.model.get("videoPlayer").get("currentVideoIndex")-1;return this.model.get("videoPlayer").loadVideo(e,!0),this.hide(),!1},onSliderPrevClick:function(){return this.carousel.goToPrevSlide(),!1},onSliderNextClick:function(){return this.carousel.goToNextSlide(),!1},onVideoSelect:_.debounce(function(t){return this.model.get("videoPlayer").resetContinuousPlayCounter(),this.model.get("videoPlayer").play(e(t.currentTarget).data("video-index")),this.hide(),!1},500,!0),show:function(){this.$el.show(),"VideoPlayer/Default"==this.model.get("videoPlayer").get("widget").get("config").type&&this.carousel.reloadSlider(),this.loadImagesForSlide(0)},hide:function(){this.$el.hide()},loadImagesForSlide:function(t){this.slides=this.$el.find(".ndn_sliderWrapper").width()%120>=108?Math.ceil(this.$el.find(".ndn_sliderWrapper").width()/120):Math.floor(this.$el.find(".ndn_sliderWrapper").width()/120);var i=t*this.slides;this.$el.find('li.ndn_pauseOverlay_selectableVideo:not(".ndn_carousel-clone")').filter(":eq("+i+"), :gt("+i+"):lt("+this.slides+")").each(function(t,i){var n=e(i).data("videoId"),o=this.$el.find('.ndn_pauseOverlay_selectableVideo[data-video-id="'+n+'"]');o.find("img[data-src]").each(function(){e(this).attr("src",e(this).data("src")).removeAttr("data-src")})}.bind(this))}})}),Ndn_Require.define("models/Ndn/VideoPlayer/PauseOverlayModel",["jquery","underscore","backbone","models/Ndn/Widget","models/Ndn/VideoPlayer/OverlayAbstractModel","views/Ndn/VideoPlayer/PauseOverlayView","jquery_resize"],function(e,t,i,n,o,a){return o.extend({defaults:{videoPlayer:null,view:null},initialize:function(t){this.set("videoPlayer",t),this.set("view",new a({model:this})),this.get("videoPlayer").onceEmbedded(e.proxy(function(){this.get("videoPlayer").getContainerElement().append(this.get("view").$el),this.get("view").hide(),this.get("videoPlayer").on("videoPause",e.proxy(function(){this.get("videoPlayer").isEnded()||this.get("videoPlayer").isPlayingAd()||this.get("view").show()},this)).on("videoStart",e.proxy(function(){this.get("view").hide()},this))},this))},getTemplateData:function(){var e=this.get("videoPlayer").get("widget").get("config"),i=this.get("videoPlayer").getNextVideoData(),o=this.get("videoPlayer").getPreviousVideoData(),a=this.get("videoPlayer").getCurrentVideoData(),r=n.getAppUrl(),s={pubId:"ra-518bbde23f7ed2a9",videoBaseUrl:r};return a&&(s=t.extend(s,{backgroundImage:a.thumbnailUrl,currentTitle:a.videoTitle,currentThumb:a.thumbnailUrl,currentDescription:a.description,producerLogo:a.provider.logoUrl,singleVideoFeed:encodeURIComponent("http://social.newsinc.com/media/json/69017/"+a.videoId+"/singleVideoOG.html?videoId="+a.videoId+"&type=VideoPlayer/16x9"),videoLink:r+"/?type=VideoPlayer/16x9&autoPlay="+e.autoPlay+"&continuousPlay="+e.continuousPlay+"&widgetId="+e.widgetId+"&trackingGroup=69016&playlistId="+e.playlistId+"&width=600&height=500&vcid="+a.videoId})),i&&(s=t.extend(s,{nextTitle:i.videoTitle,nextDescription:i.videoTitle,nextDuration:i.displayDuration,nextThumb:i.thumbnailUrl})),o&&(s=t.extend(s,{prevTitle:o.videoTitle,prevDescription:o.videoTitle,prevDuration:o.displayDuration,prevThumb:o.thumbnailUrl})),s},getCarouselData:function(){var e=t.map(this.get("videoPlayer").getActivePlaylistData().items,function(e,t){return e.videoIndex=t,e});return{playlistItems:e}},canShowEmailButton:function(){return this.get("videoPlayer").get("playerData").settings.share.email.enabled},canShowSocialButton:function(){return this.get("videoPlayer").get("playerData").settings.share.socialNetworks.enabled}})}),Ndn_Require.define("text!templates/ndn/video-player/share-overlay.html",[],function(){return'<div class="ndn_shareContainer ndn_shareTabs">\n    <header class="ndn_shareHeader">\n        <ul class="ndn_shareOverlayTabs ndn_shareText ndn_nav ndn_nav-tabs">\n            <li class="ndn_shareTab1" data-ndn-tab-content-class="ndn_shareOverlay_shareVideoTab"><a href="#"><span class="ndn_tabCopy">Share Video</span></a></li>\n            <li class="ndn_shareTab2" data-ndn-tab-content-class="ndn_shareCopyButtons"><a href="#"><span class="ndn_tabCopy">Link &amp; Embed</span></a></li>\n        </ul>\n        <div class="ndn_closeShare"></div>\n    </header>\n    <div class="ndn_shareOverlayTabContents ndn_shareWrapper ndn_tab-content">\n        <div class="ndn_tab-pane ndn_shareOverlay_shareVideoTab">\n            <div class="ndn_shareVideoInfo">\n                <div class="ndn_shareVideoStillWrap"><img class="ndn_shareVideoStill" src="{{shareThumb}}" alt="{{shareTitle}}" title="{{shareTitle}}" /></div>\n                <p class="ndn_shareVideoDescription">{{shareTitle}}</p>\n            </div>\n            <div class="ndn_shareButtons addthis_toolbox addthis_default_style">\n                <ul class="ndn_shareButtonsList">\n                    <li class="ndn_mainShareButtons ndn_shareFacebook"><a class="ndn_a_shareFacebook" target="_new" href="http://api.addthis.com/oexchange/0.8/forward/facebook/offer?url={{singleVideoFeedEncoded}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareTwitter"><a class="ndn_a_shareTwitter" target="_new" href="http://api.addthis.com/oexchange/0.8/forward/twitter/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareEmail"><a class="addthis_button_email" addthis:url="{{singleVideoFeed}}" addthis:title="Check out this video: \'{{shareTitle}}\'" addthis:description="{{shareDescription}}"></a></li>\n                </ul>\n                <ul class="ndn_shareButtonsList">\n                    <li class="ndn_sharePinterest"><a target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/pinterest/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                    <li class="ndn_shareTumblr"><a target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/tumblr/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                    <li class="ndn_shareLinkedin"><a target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/linkedin/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                    <li class="ndn_shareReddit"><a target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/reddit/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                    <li class="ndn_shareGmail"><a target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/gmail/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                    <li class="ndn_shareBlogger"><a target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/blogger/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                    <li class="ndn_shareStumbleupon"><a target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/stumbleupon/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                    <li class="ndn_shareGooglePlus"><a target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/google_plusone_share/offer?url={{singleVideoFeedEncoded}}&pubid={{addThisPubId}}&ct=1"></a></li>\n                </ul>\n            </div>\n        </div>\n        <div class="ndn_tab-pane ndn_shareCopyButtons">\n        	<span class="ndn_embedText">Linking and embedding are disabled for this video.</span>\n            <span class="ndn_shareCopyEmbedCode ndn_linkEmbed">\n            	<label for="ndn_shareCopyEmbedCodeText">Copy video embed code:</label>\n				<textarea class="ndn_shareCopyEmbedCodeText" id="ndn_shareCopyEmbedCodeText">{{embedCode}}</textarea>\n            </span> \n            <span class="ndn_shareCopyVideoLink ndn_linkEmbed">\n            	<label for="ndn_shareCopyVideoLinkText">Copy video link:</label>\n				<textarea class="ndn_shareCopyVideoLinkText" id="ndn_shareCopyVideoLinkText">{{videoLink}}</textarea>\n            </span>\n		</div>\n    </div>\n    <div class="ndn_sharePrivacyPolicy">\n    	<a href="http://www.newsinc.com/privacypolicy.html" target="_blank">Privacy Policy</a> &nbsp; | &nbsp; <a href="http://www.newsinc.com/termsofuse.html" target="_blank">Terms of Use</a>\n    </div>\n</div>\n'}),Ndn_Require.define("bootstrap_tabs",["jquery"],function(e){!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,i,n,o=this.element,a=o.closest("ul:not(.dropdown-menu)"),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),o.parent("li").hasClass("ndn_active")||(t=a.find(".active:last a")[0],n=e.Event("show",{relatedTarget:t}),o.trigger(n),n.isDefaultPrevented()||(i=e(r),this.activate(o.parent("li"),a),this.activate(i,i.parent(),function(){o.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,i,n){function o(){a.removeClass("ndn_active").find("> .ndn_dropdown-menu > .ndn_active").removeClass("ndn_active"),t.addClass("ndn_active"),r?(t[0].offsetWidth,t.addClass("ndn_in")):t.removeClass("ndn_fade"),t.parent(".ndn_dropdown-menu")&&t.closest("li.ndn_dropdown").addClass("ndn_active"),n&&n()}var a=i.find("> .ndn_active"),r=n&&e.support.transition&&a.hasClass("ndn_fade");r?a.one(e.support.transition.end,o):o(),a.removeClass("in")}};var i=e.fn.tab;e.fn.tab=function(i){return this.each(function(){var n=e(this),o=n.data("tab");o||n.data("tab",o=new t(this)),"string"==typeof i&&o[i]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=i,this},e(document).on("click.ndn_tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(e)}),Ndn_Require.define("views/Ndn/VideoPlayer/ShareOverlayView",["jquery","backbone","mustache","models/Ndn/SocialSharing/AddThisModel","text!templates/ndn/video-player/share-overlay.html","bootstrap_tabs"],function(e,t,i,n,o){return t.View.extend({events:{"click .ndn_shareOverlayTabs a":"onTabSelect","click .ndn_closeShare":"onCloseClick","click .ndn_shareCopyEmbedCodeText":"selectAllEmbedCode","click .ndn_shareCopyVideoLinkText":"selectAllDirectLink"},initialize:function(){t.View.prototype.initialize.call(this,arguments),this.$el=e(document.createElement("div")).addClass("ndn_shareOverlay ndn_playerOverlay")},selectTab:function(e){var t=this.$el.find(".ndn_shareOverlayTabs > li"),i=this.$el.find(".ndn_shareOverlayTabContents > div"),n=i.filter("."+e.data("ndn-tab-content-class"));t.removeClass("ndn_active"),e.addClass("ndn_active"),i.removeClass("ndn_active"),n.addClass("ndn_active")},onTabSelect:function(t){this.selectTab(e(t.currentTarget).parents("li:eq(0)")),t.stopPropagation()},onCloseClick:function(){this.$el.hide()},updateHtml:function(){var e=this.model.get("videoPlayer").getCurrentVideoData(),t="http://social.newsinc.com/media/json/69017/"+e.videoId+"/singleVideoOG.html?type=VideoPlayer/16x9&videoId="+e.videoId;this.$el.html(i.to_html(o,{shareTitle:e.videoTitle,shareDescription:e.description,shareThumb:e.thumbnailUrl,shareVideoId:e.videoId,addThisPubId:"ra-518bbde23f7ed2a9",singleVideoFeed:t,singleVideoFeedEncoded:encodeURIComponent(t),embedCode:this.model.getEmbedCode(),videoLink:this.model.getDirectLink()})),this.$el.find(".ndn_shareVideoDescription").ellipsis({updateOnWindowResize:!0}),n.toolbox(this.getWidgetContainerElement().find(".addthis_toolbox")),this.model.canShowEmailButton()||(this.$el.find(".ndn_shareEmail").hide(),this.$el.find(".ndn_shareFacebook").addClass("ndn_shareNoEmail")),this.$el.find('.ndn_shareOverlayTabs > li[data-ndn-tab-content-class="ndn_shareOverlay_shareVideoTab"]').toggleClass("ndn_disabled",!this.model.canShowSocialButton()),this.selectTab(this.$el.find(".ndn_shareOverlayTabs > li:not(.ndn_disabled):eq(0)")),this.$el.find(".ndn_linkEmbed").toggle(this.model.canShowEmbedButton()),this.$el.find(".ndn_embedText").toggle(!this.model.canShowEmbedButton())},selectAllDirectLink:function(){this.$el.find(".ndn_shareCopyVideoLinkText").select()},selectAllEmbedCode:function(){this.$el.find(".ndn_shareCopyEmbedCodeText").select()},getWidgetContainerElement:function(){return this.model.get("videoPlayer").get("widget").get("view").$el}})}),Ndn_Require.define("text!templates/ndn/shared/share.html",[],function(){return'<div class="ndn_shareContainer ndn_shareTabs">\n    <header class="ndn_shareHeader">\n        <ul class="ndn_shareText ndn_nav ndn_nav-tabs">\n            <li class="ndn_active ndn_shareTab1"><a href="#ndn_shareTab1" data-toggle="tab"><span class="ndn_tabCopy">Share Video</span></a></li>\n            <li class="ndn_shareTab2"><a href="#ndn_shareTab2" data-toggle="tab"><span class="ndn_tabCopy">Link &amp; Embed</span></a></li>\n        </ul>\n        <div class="ndn_closeShare"></div>\n    </header>\n    <div class="ndn_shareWrapper ndn_tab-content">\n        <div id="ndn_shareTab1" class="ndn_tab-pane ndn_active">\n            <div class="ndn_shareVideoInfo">\n                <div class="ndn_shareVideoStillWrap"> <img class="ndn_shareVideoStill" src="{{shareThumb}}" alt="{{shareTitle}}" title="{{shareTitle}}" /></div>\n                <p class="ndn_shareVideoDescription">{{shareTitle}}</p>\n            </div>\n            <div class="ndn_shareButtons addthis_toolbox addthis_default_style">\n                <ul class="ndn_shareButtonsList">\n                    <li class="ndn_mainShareButtons ndn_shareFacebook"><a class="ndn_a_shareFacebook" target="_new" href="http://api.addthis.com/oexchange/0.8/forward/facebook/offer?url={{singleVideoFeedEncoded}}&pubid={{pubId}}&ct=1"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareTwitter"><a class="ndn_a_shareTwitter" target="_new" href="http://api.addthis.com/oexchange/0.8/forward/twitter/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&pubid={{pubId}}&ct=1"></a></li>\n                    <li class="ndn_mainShareButtons ndn_shareEmail"><a class="addthis_button_email ndn_a_shareEmail" addthis:url="{{singleVideoFeed}}" addthis:title="Check out this video: \'{{shareTitle}}\'" addthis:description="{{shareDescription}}"></a></li>\n                </ul>\n                <ul class="ndn_shareButtonsList">\n                    <li class="ndn_sharePinterest"><a class="ndn_a_pinterest" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/pinterest/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{pubId}}&ct=1"></a></li>\n                    <li class="ndn_shareTumblr"><a class="ndn_a_shareTumblr" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/tumblr/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{pubId}}&ct=1"></a></li>\n                    <li class="ndn_shareLinkedin"><a class="ndn_a_shareLinkedin" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/linkedin/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{pubId}}&ct=1"></a></li>\n                    <li class="ndn_shareReddit"><a class="ndn_a_shareReddit" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/reddit/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{pubId}}&ct=1"></a></li>\n                    <li class="ndn_shareGmail"><a class="ndn_a_shareGmail" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/gmail/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{pubId}}&ct=1"></a></li>\n                    <li class="ndn_shareBlogger"><a class="ndn_a_shareBLogger" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/blogger/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{pubId}}&ct=1"></a></li>\n                    <li class="ndn_shareStumbleupon"><a class="ndn_a_shareStumbleupon" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/stumbleupon/offer?url={{singleVideoFeedEncoded}}&title={{shareTitle}}&description={{shareDescription}}&screenshot={{shareThumb}}&pubid={{pubId}}&ct=1"></a></li>\n                    <li class="ndn_shareGooglePlus"><a class="ndn_a_shareGooglePLus" target="_blank" href="http://api.addthis.com/oexchange/0.8/forward/google_plusone_share/offer?url={{singleVideoFeedEncoded}}&pubid={{pubId}}&ct=1"></a></li>\n                </ul>\n            </div>\n        </div>\n        <div id="ndn_shareTab2" class="ndn_shareCopyButtons ndn_tab-pane">\n        	<span class="ndn_embedText">Linking and embedding are disabled for this video.</span>\n            <span class="ndn_shareCopyEmbedCode ndn_linkEmbed">\n            	<label for="ndn_shareCopyEmbedCodeText">Copy video embed code:</label>\n				<textarea class="ndn_shareCopyEmbedCodeText" id="ndn_shareCopyEmbedCodeText">{{embedCode}}</textarea>\n            </span> \n            <span class="ndn_shareCopyVideoLink ndn_linkEmbed">\n            	<label for="ndn_shareCopyVideoLinkText">Copy video link:</label>\n				<textarea class="ndn_shareCopyVideoLinkText" id="ndn_shareCopyVideoLinkText">{{videoLink}}</textarea>\n            </span> </div>\n    </div>\n    <div class="ndn_sharePrivacyPolicy"> <a href="http://www.newsinc.com/privacypolicy.html" target="_blank">Privacy Policy</a> &nbsp; | &nbsp; <a href="http://www.newsinc.com/termsofuse.html" target="_blank">Terms of Use</a></div>\n</div>\n'
}),Ndn_Require.define("models/Ndn/VideoPlayer/ShareOverlayModel",["jquery","models/Ndn/VideoPlayer/OverlayAbstractModel","views/Ndn/VideoPlayer/ShareOverlayView","models/Ndn/Widget","models/Ndn/PlayerServices","mustache","text!templates/ndn/shared/share.html"],function(e,t,i,n){return t.extend({defaults:{videoPlayer:null,view:null},initialize:function(t){this.set("videoPlayer",t),this.set("view",new i({model:this})),this.get("videoPlayer").onceEmbedded(e.proxy(function(){this.get("videoPlayer").getContainerElement().append(this.get("view").$el.hide())},this)),this.get("videoPlayer").on("videoLoad",e.proxy(function(){this.get("view").updateHtml()},this)).on("share",e.proxy(function(e){if(this.get("videoPlayer").pause(),"facebook"==e.data.provider||"twitter"==e.data.provider){var t=this.get("videoPlayer").getCurrentVideoData(),i=encodeURIComponent("http://social.newsinc.com/media/json/69017/"+t.videoId+"/singleVideoOG.html?type=VideoPlayer/16x9&videoId="+t.videoId),n="http://api.addthis.com/oexchange/0.8/forward/"+e.data.provider+"/offer?url="+i+"&pubid=ra-518bbde23f7ed2a9&ct=1";"facebook"==e.data.provider&&(n+="&title="+t.description),window.open(n,"","")}else this.show()},this))},getEmbedCode:function(){var e=this.get("videoPlayer").get("widget"),t=e.get("config"),i=this.get("videoPlayer").getCurrentVideoData(),n=this.get("videoPlayer").getCurrentPlaylistId();return'<iframe width="590" height="332" src="http://launch.newsinc.com/?type=VideoPlayer/Single&widgetId=1&trackingGroup=69016'+(t.siteSection?"&siteSection="+t.siteSection:"")+"&videoId="+i.videoId+(n?"&playlistId="+n:"")+'" frameborder="no" scrolling="no" noresize marginwidth="0" marginheight="0"></iframe>'},getDirectLink:function(){var e=this.get("videoPlayer").get("widget"),t=e.get("config"),i=this.get("videoPlayer").get("playerData").settings.share.directLink,o=this.get("videoPlayer").getCurrentVideoData(),a=(this.get("videoPlayer").get("playlistId"),i.needsLegacySupport?n.getDefaultUrlVarPrefixForConfigSettings():""),r="&freewheel="+t.trackingGroup+"&sitesection="+t.siteSection+"&vid="+o.videoId,s=i.landingPageUrl;return-1===s.indexOf("?")&&(s+="?"),s+a+"trackingGroup="+e.get("config").trackingGroup+(t.siteSection?"&"+a+"siteSection="+t.siteSection:"")+"&"+a+"videoId="+o.videoId+(i.needsLegacySupport?r:"")},canShowEmailButton:function(){var e=this.get("videoPlayer").get("playerData").settings.share.email.enabled;return e},canShowSocialButton:function(){var e=this.get("videoPlayer").get("playerData").settings.share.socialNetworks.enabled;return e},canShowEmbedButton:function(){var e=this.get("videoPlayer").getCurrentVideoData().settings.share.embedCode.enabled;return e}})}),Ndn_Require.define("text!templates/ndn/shared/endslate.html",[],function(){return'<div class="ndn_endslateContainer"> {{^mediaIsBlocked}}\n    <div class="ndn_endslateClickSurface"></div>\n    {{#showUnavailableAlert}}\n    <div class="ndn_endslateAlertUnavailable">The requested video is no longer available</div>\n    {{/showUnavailableAlert}}\n    <h1 class="ndn_upNextHeader"><span class="ndn_upNextLabel">Up Next: </span> <span class="ndn_upNextTitle">{{upNextTitle}}</span></h1>\n     <p class="ndn_upNextDescription">{{upNextDescription}}</p> \n    {{#showCountdown}}\n    <div class="ndn_startsInContainer">\n        <h3 class="ndn_startsInLabel"> Starts In: </h3>\n        <span class="ndn_startsInCountdown"> {{countdownValue}} </span> </div>\n    {{/showCountdown}}\n    {{#justWatchedVideoId}}\n    <div class="ndn_previousVideo">\n        <div class="ndn_justWatchedContainer">\n            <div class="ndn_justWatchedThumbnail"> <img src="{{justWatchedThumbnail}}"/> </div>\n            <div class="ndn_justWatchedSummary">\n                <h3> Just Watched </h3>\n                <p class="ndn_justWatchedTitle"> {{justWatchedTitle}} </p>\n            </div>\n        </div>\n        <div class="ndn_endslateControlBar">\n            <div class="ndn_shareButtonContainer addthis_toolbox">\n                <ul>\n                    <li class="ndn_endslateShareButton ndn_endslateShareButtonFacebook" data-provider="facebook"></li>\n                    <li class="ndn_endslateShareButton ndn_endslateShareButtonTwitter" data-provider="twitter"></li>\n                    <li class="ndn_endslateShareButton ndn_endslateShareButtonEmail"><a class="addthis_button_email ndn_a_shareEmail" addthis:url="http://landing.newsinc.com/shared/video.html?vcid={{justWatchedVideoId}}&freewheel=91417&sitesection=dash" addthis:title="Check out this video: \'{{justWatchedTitle}}\'" addthis:description="{{justWatchedDescription}}"></a></li>\n                    <li class="ndn_endslateShareButton ndn_endslateShareButtonShare"></a> </li>\n                </ul>\n            </div>\n            <div class="ndn_replayButton"> Replay </div>\n        </div>\n    </div>\n    {{/justWatchedVideoId}}\n    {{/mediaIsBlocked}}\n    {{#mediaIsBlocked}}\n    <h1 class="ndn_endslateMediaBlocked">We\'re sorry but this video cannot be played from your location.</h1>\n    {{/mediaIsBlocked}} </div>\n<img class="ndn_endslateBackground" src="{{backgroundImage}}"/>'}),Ndn_Require.define("views/Ndn/VideoPlayer/EndslateOverlayView",["jquery","backbone","mustache","models/Ndn/VideoPlayer/EndslateOverlayModel","models/Ndn/Widget","models/Ndn/SocialSharing/AddThisModel","text!templates/ndn/shared/endslate.html","jquery_autoellipsis"],function(e,t,i,n,o,a,r){return t.View.extend({events:{"click .ndn_replayButton, .ndn_justWatchedContainer":"onReplayClick","click .ndn_endslateShareButtonFacebook, .ndn_endslateShareButtonTwitter":"onViralShareClick","click .ndn_endslateShareButtonShare":"onShareClick","click .ndn_endslateClickSurface":"onSurfaceClick"},getWidgetContainerElement:function(){return this.model.get("widget").get("view").$el},initialize:function(){this.setElement(e(document.createElement("div")).addClass("ndn_endslateOverlay ndn_playerOverlay").prependTo(this.model.get("videoPlayer").getContainerElement()).hide().get(0)),this.model.on("endslateFinished",function(){this.trigger("endslateFinished"),this.hide()}.bind(this)).on("change:countdownValue",function(){this.$el.find(".ndn_startsInCountdown").html(this.model.get("countdownValue"))}.bind(this))},hide:function(){this.$el.hide()},show:function(t){this.model.set("type",t),this.model.getNextVideoData().done(e.proxy(function(e){this.$el.html(i.to_html(r,this.model.getTemplateData(e))),this.$el.height()<300&&this.$el.find(".ndn_upNextDescription").ellipsis(),this.$el.height()<250&&this.$el.find(".ndn_justWatchedContainer").hide(),a.toolbox(this.getWidgetContainerElement().find(".addthis_toolbox")),this.$el.find(".ndn_endslateShareButtonEmail").toggle(this.model.canShowEmailButton()),this.$el.find(".ndn_endslateShareButtonFacebook, .ndn_endslateShareButtonTwitter, .ndn_endslateShareButtonShare").toggle(this.model.canShowSocialButton()),this.model.displaysCountdown()&&this.model.countdownToNextPlaylist(),this.$el.prependTo(this.getWidgetContainerElement().find(".ndn_videoPlayer")).show()},this))},onReplayClick:function(){this.trigger("endslateReplay"),this.model.replayLastVideo(),this.hide()},onShareClick:function(){this.trigger("endslateShare"),this.model.cancelCountdown()},onViralShareClick:function(t){var i=this.model.get("videoPlayer").getCurrentVideoData(),n="ra-518bbde23f7ed2a9",o=encodeURIComponent("http://social.newsinc.com/media/json/"+i.provider.trackingGroup+"/"+i.videoId+"/singleVideoOG.html?type=VideoPlayer/16x9&videoId="+i.videoId),a="http://api.addthis.com/oexchange/0.8/forward/twitter/offer?url="+o+"&title="+i.videoTitle+"&description="+i.description+"&pubid="+n+"&ct=1",r="http://api.addthis.com/oexchange/0.8/forward/facebook/offer?url="+o+"&title="+i.videoTitle+"&pubid="+n+"&ct=1";"facebook"==e(t.currentTarget).data("provider")&&window.open(r),"twitter"==e(t.currentTarget).data("provider")&&window.open(a)},onSurfaceClick:function(){this.trigger("endslateFinished"),this.model.playNextVideo(),this.hide()}})}),Ndn_Require.define("models/Ndn/VideoPlayer/EndslateOverlayModel",["jquery","underscore","mustache","models/Ndn/VideoPlayer/OverlayAbstractModel","models/Ndn/PlayerServices","views/Ndn/VideoPlayer/EndslateOverlayView"],function(e,t,i,n,o,a){var r=function(){null!==this.get("countdownInterval")&&(clearInterval(this.get("countdownInterval")),this.set({countdownInterval:null,countdownValue:5}))};return n.extend({defaults:{widget:null,videoPlayer:null,type:null,countdownInterval:null,countdownValue:5,view:null},initialize:function(t){t.onceEmbedded(e.proxy(function(){this.set({widget:t.get("widget"),videoPlayer:t}),this.set("view",new a({model:this})),this.get("videoPlayer").on("videoUnavailable",e.proxy(function(){this.get("view").show("videoNotAvailable")},this)).on("playlistEnd",e.proxy(function(){this.get("view").show("endOfPlaylist")},this)).on("isolatedVideoEnd",e.proxy(function(){this.get("view").show("isolatedVideoEnd")},this)).on("continuousPlayEnd",e.proxy(function(){0!=t.get("widget").get("config").continuousPlay&&this.get("view").show("playlistPause")},this)),this.get("widget").on("videoSelect",e.proxy(function(){r.call(this)},this))},this))},getTemplateData:function(e){var i=this.get("videoPlayer").getCurrentVideoData(),n={upNextTitle:e.videoTitle,upNextDescription:e.description,backgroundImage:e.thumbnailUrl,showUnavailableAlert:"videoNotAvailable"==this.get("type"),showCountdown:this.displaysCountdown(),mediaIsBlocked:"mediaBlocked"==this.get("type"),countdownValue:this.get("countdownValue")};return i&&(n=t.extend(n,{justWatchedVideoId:i.videoId,justWatchedTitle:i.videoTitle,justWatchedDescription:i.description,justWatchedThumbnail:i.thumbnailUrl})),n},transitionsToNewPlaylist:function(){return t.contains(["endOfPlaylist","videoNotAvailable","isolatedVideoEnd"],this.get("type"))},displaysCountdown:function(){return"isolatedVideoEnd"!=this.get("type")||this.get("widget").get("config").continuousPlay?t.contains(["endOfPlaylist","videoNotAvailable","isolatedVideoEnd"],this.get("type")):!1},getNextVideoData:function(){return e.Deferred(e.proxy(function(t){var i=this.get("videoPlayer").getNextVideoData();if(i)return t.resolve(i);var n=this.get("videoPlayer").getNextPlaylistId();o.getPlaylistData(n,this.get("widget")).fail(t.reject).done(e.proxy(function(e){t.resolve(e.items[0])},this))},this)).promise()},countdownToNextPlaylist:function(){this.set("countdownInterval",setInterval(function(){this.get("countdownValue")<=0&&this.trigger("endslateFinished"),this.decrementCountdownValue()}.bind(this),1e3)),this.on("endslateFinished",function(){r.call(this),this.playNextVideo()}.bind(this))},replayLastVideo:function(){r.call(this),this.get("videoPlayer").play(this.get("videoPlayer").get("currentVideoIndex"))},playNextVideo:function(){this.transitionsToNewPlaylist()?this.get("videoPlayer").play(0,this.get("videoPlayer").getNextPlaylistId()):"playlistPause"==this.get("type")?this.get("videoPlayer").play(this.get("videoPlayer").get("currentVideoIndex")+1):this.get("videoPlayer").play()},decrementCountdownValue:function(){this.set("countdownValue",Math.max(0,this.get("countdownValue")-1))},canShowEmailButton:function(){var e=this.get("videoPlayer").get("playerData").settings.share.email.enabled;return e},canShowSocialButton:function(){var e=this.get("videoPlayer").get("playerData").settings.share.socialNetworks.enabled;return e},cancelCountdown:function(){r.call(this)},getEndslateType:function(){return this.get("type")}})}),Ndn_Require.define("jquery_responsive_containers",["jquery","jquery_resize"],function(e){!function(e){var t={feature:"min-width",value:"800px",className:"",callback:null};e.fn.responsiveContainer=function(i){if("undefined"==typeof i.feature)throw new Error('Responsive container error: No "feature" supplied, such as min-width.');if("undefined"==typeof i.value)throw new Error('Responsive container error: No "value" supplied, such as 800px.');if("undefined"==typeof i.className&&"undefined"==typeof i.callback)throw new Error('Responsive container error: No "className" or "callback" supplied, one or the other is needed, else theres no use.');var n=e.extend({},t,i);return this.each(function(){var t=e(this),i=function(){var e=!1,i=t.width();switch(""!==n.className&&t.removeClass(n.className),n.feature){case"min-width":n.value.replace("px","")<i&&(e=!0);break;case"max-width":n.value.replace("px","")>i&&(e=!0)}e&&(""!==n.className&&t.addClass(n.className),null!==n.callback&&n.callback({width:i}))};e(this).resize(i),i()})}}(e)}),Ndn_Require.define("models/Ndn/VideoPlayer",["jquery","underscore","backbone","models/Ndn/App","models/Ndn/Widget","models/Ndn/Utils/UserAgent","models/Akamai/VideoPlayerModel","models/Ndn/PlayerServices","models/Ndn/PlayerServices/Cache","models/Ndn/VideoPlayer/EnforceVisibilityOverlayModel","models/Ndn/VideoPlayer/StartOverlayModel","models/Ndn/VideoPlayer/PauseOverlayModel","models/Ndn/VideoPlayer/ShareOverlayModel","models/Ndn/VideoPlayer/EndslateOverlayModel","lib/amp.premier/config/skin/templates","jquery_responsive_containers"],function(e,t,i,n,o,a,r,s,l,d,c,u,p,h,g){var f=["VideoPlayer/PTR","VideoPlayer/Default","VideoLauncher/Slider300x250","VideoLauncher/Playlist300x250"],m=function(){var t=this.get("player");t.addEventListener("loadstart",e.proxy(function(){this.trigger("videoLoadStart")},this)),t.addEventListener("canplay",e.proxy(function(){this.trigger("videoLoadComplete")},this)),t.addEventListener("started",e.proxy(function(e){this.trigger("play",e),this.trigger("videoStart",e)},this)),t.addEventListener("volumechange",e.proxy(function(){this.trigger("videoVolumeChange")},this)),t.addEventListener("playrequest",e.proxy(function(){this.trigger(this.get("isPlayingRmm")?"rmmStartRequest":"videoStartRequest")},this)),t.addEventListener("play",e.proxy(function(e){this.trigger("play",e)},this)),t.addEventListener("timeupdate",e.proxy(function(e){this.trigger("videoTimeUpdate",e)},this)),t.addEventListener("pause",e.proxy(function(e){this.get("isPlayingRmm")?(this.trigger("hook:rmmPause"),this.trigger("rmmPause")):(this.trigger("hook:videoPause"),this.trigger("videoPause")),this.trigger("pause",e)},this)),t.addEventListener("ended",e.proxy(function(e){this.trigger("videoEnd",e)},this)),null!=t.share&&t.share.addEventListener("share",e.proxy(function(e){this.trigger("share",e)},this)),null!=t.captioning&&t.captioning.addEventListener("visibilitychange",e.proxy(function(){},this)),null!=t.ads&&(t.ads.addEventListener("started",e.proxy(function(e){this.set("hasStartedAd",!0),this.trigger("adStart",e)},this)),t.ads.addEventListener("ended",e.proxy(function(e){this.get("hasStartedAd")&&(this.set("hasStartedAd",!1),this.trigger("adEnd",e))},this)),t.ads.addEventListener("timeupdate",e.proxy(function(){this.trigger("adTimeUpdate")},this)),t.ads.addEventListener("companion",e.proxy(function(e){this.trigger("adCompanion",e)},this))),t.addEventListener("ready",e.proxy(function(e){this.trigger("video:ready",e)},this)),t.addEventListener("error",e.proxy(function(e){console.log("[Akamai Media Player] ERROR:",e),this.trigger("video:error",e),this.trigger("videoError",e)},this))},y=function(){var i=this.get("widget").get("config"),s=this.getCurrentVideoData(),l=this.get("playerData"),d=this.get("widget").get("settings").ptr,c=function(){try{var e=l.settings.share.email.enabled,t=l.settings.share.socialNetworks.enabled,i=s.settings.share.embedCode.enabled;switch(!0){case t&&e&&i:return 1;case t&&e&&!i:return 2;case t&&!e&&!i:return 3;case!t&&e&&i:return 4;case!t&&!e&&i:return 5;case!t&&!e&&!i:return 6;case!t&&e&&!i:return 7}}catch(n){return""}}(),u=this.get("widget").getWidgetTypeId(),p=e.proxy(function(){return this.get("isPlayingRmm")?"2":1===i.playOnMouseover?i.ptrBehavior?"4":"3":i.autoPlay?"1":"0"},this)(),h=e.proxy(function(){if(this.get("isPlayingRmm")){if(i.rmmSoundOn){if("VideoPlayer/Inline300"==i.type||"VideoLauncher/Slider300x250"==i.type)return 9;if("VideoPlayer/Inline590"==i.type)return 10}else if(t.contains(["VideoPlayer/Inline300","VideoPlayer/Inline590","VideoLauncher/Slider300x250","VideoLauncher/Playlist300x250","VideoPlayer/PTR"],i.type))return 1;if(t.contains(["VideoLauncher/VerticalTower","VideoLauncher/Horizontal"],i.type))return 8}else if(t.contains(["VideoPlayer/PTR"],i.type))return 1;return 0},this)(),g=(i.siteSection||"").split("_"),m=g[1]||"oth",y=g[2]||"non",v=g[3]||"",_=o.getEmbedOriginUrl(),E=encodeURIComponent(_),A=encodeURIComponent(encodeURIComponent(_)),C=encodeURIComponent(window.location.href.toString()),b=encodeURIComponent(C),P=e("#"+this.get("playerContainerElementId")),T=P.width(),N=P.height(),S=function(e){return e=parseInt(e),300>=e?1:400>e?2:3}(T),w=this.get("widget").getFoldPositionId(this.getContainerElement()),I=function(){try{return s.antiKeywords||""}catch(e){return""}}(),x=function(){try{return s.provider.id}catch(e){return""}}(),M=(function(){try{return s.provider.trackingGroup}catch(e){return""}}(),this.get("player").getVolume()>.01&&!this.get("forceSoundOffForAdCall")),L=e.proxy(function(){var e={wgt:h,external_url:E,dpid:i.trackingGroup,sitesection:i.siteSection,sec:m,sub:y,pt:v,fp:w,cp:parseInt(i.continuousPlay),pb:p,snd:M?"1":"0",videosize:S};null!==u&&(e.plt=u);try{this.get("playerData").settings.auditude.enableGoogleAds&&(e.descriptionUrl=b)}catch(t){}return e},this)(),D=e.proxy(function(){var t="",i=["legolas"];return e.each(i,function(){var i=n.getAdsTargeting().getInstance(this),o=i.get("auditudeSegmentsKey");i.isLoaded()&&e.each(i.getSegments(),function(){t+=o+"="+this+";"})}),e.each(L,function(e,i){t+=e+"="+i+";"}),t},this)(),k=function(){var e={userData:D,external_url:E};return L.descriptionUrl&&(e.descriptionUrl=L.descriptionUrl),e}(),R=function(){try{var e=l.settings.dfp;return e.accountNumber+"/"+e.adOwnershipGroupId+("flash"!=r.getPlaybackMode()?"_mob":"")+"/"+e.adTrackingGroupId+"/"+i.siteSection+"/"+m+"/"+y}catch(t){}}(),V=e.proxy(function(){var o=function(){var e=n.getAdsTargeting().getInstance("lotame");return(e.isLoaded()?e.getSegments():[]).join(",")}(),s=[["wgt",h],["plt",u],["pb",p]];t.contains(f,i.type)&&(s=s.concat([["ptr",d]])),s=s.concat([["snd",M?"1":"0"],["fp",w],["cp",parseInt(i.continuousPlay)],["vs",S],["pt",v],["dpid",i.trackingGroup],["sitesection",i.siteSection],["vt","html"==r.getPlaybackMode()?"html5":r.getPlaybackMode()],["cpvnum",this.getTruViewCounter()],["plid",i.playlistId||""],["width",T],["height",N],["lat",o],["akw",I],["cpid",x],["insid",n.getPageViewSessionId()],["embedIndex",this.get("widget").get("embedIndex")],["ua",a.getBrowser().toLowerCase()],["ext_url",E],["adserver","dfp"]]);var l=[];return e.each(s,function(e,t){var i=t[0],n=(t[1]+"").substr(0,256);l.push(i+"="+n)}),encodeURIComponent(l.join("&"))},this)(),O=function(){return"VideoPlayer/16x9"==i.type||"VideoPlayer/Inline300"==i.type||"VideoPlayer/Studio"==i.type?"300x250":""}();return{aud_zone_id:function(){try{return l.settings.auditude.trackingGroupAuditudeId}catch(e){}}(),trackingGroup:i.trackingGroup,auditudeUserData:L,auditudeParams:k,adServer:function(){try{return l.settings.ads.server}catch(e){}}(),adsEnabled:i.adsEnabled,siteSection:i.siteSection,siteSectionSecValue:m,siteSectionSubValue:y,distributorName:function(){try{return l.distributor.name}catch(e){}}(),distributorType:"",producerCategory:function(){try{return s.provider.category}catch(e){}}(),videoId:s.videoId,producerId:x,videoDuration:function(){try{return s.mediaContent[0].duration}catch(e){}}(),playerBehaviorId:p,foldPositionId:w,wgtValue:h,widgetId:i.widgetId||"",widgetTypeId:u,videoPlayerWidth:T,videoPlayerHeight:N,continuousPlay:parseInt(i.continuousPlay),rmmSoundOn:!!i.rmmSoundOn,shareScenarioId:c,playlistId:i.playlistId||"",playlistName:e.proxy(function(){try{return this.getActivePlaylistData().title||""}catch(e){}},this)(),encodedEmbedPageUrl:E,encodedEmbedOriginUrl:E,doubleEncodedEmbedOriginUrl:A,doubleEncodedCurrentPageUrl:b,videoSizeId:S,producerAuditudeId:function(){try{return l.settings.auditude.trackingGroupAuditudeId}catch(e){}}(),mediaAnalyticsC5Value:this.get("isPlayingRmm")?"02":"03",embedMethod:o.isEmbeddedByIframe()?"iframe":"JS",dfpParams:V,dfpDescriptionUrl:C,dfpIuValue:R,dfpCiuSzsValue:O,dfpPodPositionValue:this.get("widget").getDfpPodPositionValue()}},v=function(t,i,n,o){return e.Deferred(e.proxy(function(a){"undefined"==typeof i&&(i=this.get("playlistId")),"undefined"==typeof n&&(n=this.get("defaultPlayOnLoadValue"));var r=function(e){var i=e?this.get("playlistId"):507;if("undefined"==typeof t){var r=this.get("widget").get("config"),s=r.videoId||r.providerId&&r.providerStoryId;if(s)if("undefined"!=typeof this.get("playerData").videosData)this.set({playlistData:{items:this.get("playerData").videosData},playlistId:null,nextPlaylistId:i,ampFeedData:null}),t=0;else{if("undefined"==typeof this.get("playerData").videoIndex)return this.set({nextPlaylistId:i}),this.trigger("videoUnavailable"),a.resolve();t=this.get("playerData").videoIndex}else t=0}_.call(this,t,n,o).done(a.resolve)};this.loadPlaylist(i).fail(e.proxy(function(){r.call(this,!1)},this)).then(e.proxy(function(){r.call(this,!0)},this))},this)).promise()},_=function(t,i,n){return"undefined"==typeof n&&(n=!1),e.Deferred(e.proxy(function(a){this.unloadVideo(),this.set({isPlayingRmm:n,currentVideoIndex:t}),n&&this.trigger("rmmLoad"),this.onceEmbedded(e.proxy(function(){var n;try{n=this.get("isPlayingRmm")?this.getAmpFeedVideoData(this.get("playlistData").items[t],this.get("widgetConfig"),!0):this.getAmpFeedData()[t]}catch(r){}return"undefined"!=typeof n?(o.getAdsTargeting().onceIsDeliverable(e.proxy(function(){this.get("isPlayingRmm")&&!this.get("widget").get("config").rmmSoundOn?(this.get("player").setVolume(.01),this.setMuteInterval()):this.setMuted(!1),this.get("player").setAutoplay(i),this.get("player").ads.setEnabled(this.get("widget").get("config").adsEnabled);var e=y.apply(this,[]);e.videoIndex=t,this.get("player").setParams(e),this.get("debugInfo").videosLoaded.push([["setAutoplay",i],["ads.setEnabled",this.get("widget").get("config").adsEnabled],["setParams",e],["feed.setData",n]]),this.get("player").feed.setData(n),this.set({hasVideoLoaded:!0}),this.trigger("videoLoad",{videoData:this.getActiveVideoData()}),this.get("widget").trigger("hook:videoLoad",{videoData:this.getActiveVideoData(),params:e,ampFeedVideoData:n,widgetConfig:this.get("widget").get("config")})},this)),a.resolve()):(this.trigger("videoUnavailable"),a.reject("Video is unavailable!"))},this))},this)).promise()},E=function(t,i){var n=[];return e.each(this.get("deliberators")[t],function(t,i){n.push(e.Deferred(i).promise())}),e.when.apply(e,n).done(i)},A=function(){this.set({playlistData:{items:[],playlistId:null},playlistId:null,ampFeedData:null})};return i.Model.extend({defaults:{currentQuartile:null,currentVideoIndex:null,playerData:null,playlistId:null,nextPlaylistId:null,player:null,playlistData:null,playerContainerElementId:null,ampFeedData:null,widgetConfig:null,widget:null,isEmbedded2:!1,isPlayable:!1,continuousPlays:0,infoPanelEnabled:!0,defaultPlayOnLoadValue:!1,isPlayingRmm:!1,hasVideoLoaded:!1,playlistItemsLimit:null,forceSoundOffForAdCall:!1,overlays:{},deliberators:null,muteInterval:null,hasStartedAd:!1,truViewCounter:0,debugInfo:null},getTruViewCounter:function(){var e=this.get("truViewCounter");return this.set("truViewCounter",e+1),e},playRmm:function(){return E.call(this,"loadAttempt",e.proxy(function(){var e;v.call(this,e,e,!0,!0)},this))},isPlayingRmm:function(){return this.get("isPlayingRmm")},setMuteInterval:function(){if(!this.get("muteInterval")){var e=function(){this.get("player").setVolume(.01),this.setMuted(!0)}.bind(this),t=0,i=setInterval(function(){e(),t+=1,15===t&&clearInterval(i)},700);this.set("muteInterval",i)}},unsetMuteInterval:function(){this.get("muteInterval")&&(clearInterval(this.get("muteInterval")),this.set("muteInterval",null))},hideOverlays:function(){e.each(this.get("overlays"),function(e,t){t.hide()})},initializeOverlays:function(){this.set("overlays",{endslate:new h(this),pause:new u(this),start:new c(this),share:new p(this),enforceVisibility:a.hasNativeVideoPlayer()?null:new d(this)})},initialize:function(i){this.set({widget:i}),this.on("all",function(){}),this.set("deliberators",{loadAttempt:[]}),this.on("change:playlistData",e.proxy(function(){null!==this.get("playlistItemsLimit")&&this.get("playlistData")&&(this.get("playlistData").items=t.first(this.get("playlistData").items,this.get("playlistItemsLimit")))},this)),this.onceEmbedded(e.proxy(function(){e.proxy(function(){var i=function(e){this.set({currentQuartile:e}),o.trackAnalytics("videoView",{widget:this.get("widget"),percentPlayed:e})};this.on("videoStart",e.proxy(function(){this.get("isPlayingRmm")||i.call(this,0)},this)).on("videoTimeUpdate",e.proxy(function(){var e=this.get("player");if(!this.get("isPlayingRmm")){var n=Math.floor(e.getCurrentTime()/e.getDuration()*100);t.contains([25,50,75],n)&&n>this.get("currentQuartile")&&i.call(this,n)}},this)).on("videoEnd",e.proxy(function(){this.get("isPlayingRmm")||i.call(this,100)},this))},this)(),this.on("rmmUnload",e.proxy(function(){this.resetContinuousPlayCounter(),this.enableControls(),this.setMuted(!1),console.log("here in rmmunload"),this.get("player").setVolume(.75)},this)),this.on("videoStart",e.proxy(function(){this.get("isPlayingRmm")&&this.disableControls()},this)),this.on("rmmEnd",e.proxy(function(){this.unsetMuteInterval()},this)),this.on("videoEnd",e.proxy(function(){this.get("isPlayingRmm")?this.trigger("rmmEnd"):(this.trigger("hook:videoEnd"),0==parseInt(this.get("widget").get("config").continuousPlay)?(this.loadVideo(this.get("currentVideoIndex"),!1),this.trigger("continuousPlayEnd")):(this.set({continuousPlays:this.get("continuousPlays")+1}),this.getNextVideoData()?this.get("continuousPlays")>=parseInt(this.get("widget").get("config").continuousPlay)+1?(this.set({continuousPlays:0}),this.trigger("continuousPlayEnd")):this.play(this.get("currentVideoIndex")+1):this.trigger(this.getPlaylistId()?"playlistEnd":"isolatedVideoEnd")))},this))},this)),this.initializeOverlays()},toggleInfoPanel:function(e){"undefined"==typeof e&&(e=!this.get("infoPanelEnabled")),this.set({infoPanelEnabled:e})},load:function(t,i,n){return E.call(this,"loadAttempt",e.proxy(function(){return v.call(this,t,i,n,!1)},this))},loadPlaylist:function(t,i){return"undefined"==typeof i&&(i=!1),e.Deferred(e.proxy(function(n){this.get("widget").getSettings().done(e.proxy(function(o){this.get("playerData")||this.set("playerData",o),t||(t=this.get("playerData").defaultWidgetConfig.playlistId);var a=this.get("playlistItemsLimit"),r=l.getPlaylistData(t,a);return r&&i?n.resolve():(r&&this.set({playlistData:r,playlistId:t,ampFeedData:null}),void s.getPlaylistData(t,this.get("widget"),a).fail(e.proxy(function(){return A.call(this),n.reject()},this)).done(e.proxy(function(){return i?n.resolve():(this.set({playlistData:l.getPlaylistData(t,a),playlistId:t,ampFeedData:null}),n.resolve())},this)))},this))},this)).promise().done(e.proxy(function(){this.trigger("videoPlaylistLoad")},this))},loadVideo:function(t,i){if("undefined"==typeof i)var i=!1;return E.call(this,"loadAttempt",e.proxy(function(){_.call(this,t,i)},this))},unloadVideo:function(){this.get("hasVideoLoaded")&&(this.get("isPlayingRmm")&&(this.set({isPlayingRmm:!1}),this.trigger("rmmUnload")),this.set({currentQuartile:null,hasVideoLoaded:!1}),this.trigger("videoUnload")),this.unsetMuteInterval()},getActivePlaylistData:function(){return this.get("playlistData")},getActiveVideoData:function(){return this.get("playlistData").items[this.get("currentVideoIndex")]},play:function(e,t){"undefined"==typeof e&&"undefined"==typeof t&&this.getCurrentVideoData()?this.get("player").play():this.load(e,t,!0)},pause:function(){this.get("player").pause()},getContainerElement:function(){return e("#"+this.get("playerContainerElementId"))},embed:function(t){return e.Deferred(e.proxy(function(i){this.get("widget").getSettings().done(e.proxy(function(n){if(this.get("playerContainerElementId")!=t){var o=this.get("widget").get("config");this.set("widgetConfig",o),r.loadConfig({adServer:n.settings.ads.server}),this.once("video:ready",e.proxy(function(){this.set({isEmbedded2:!0}),this.trigger("embed"),i.resolve()},this)),this.set("debugInfo",{ampVersion:r.getVersion(),playerConfigDefaults:r.getDebugConfig(),playerConfig:this.getPlayerConfig(!0),videosLoaded:[]});var a=new(r.getAmpPremier())(t,this.getPlayerConfig());this.set({playerContainerElementId:t,player:a}),m.apply(this,[]);var s=e("#"+this.get("playerContainerElementId"));s.addClass("ndn_videoPlayer"),s.responsiveContainer({feature:"min-width",value:"429px",className:"ndn_videoPlayer_largeView"}),s.responsiveContainer({feature:"max-width",value:"428px",className:"ndn_videoPlayer_smallView"}),s.responsiveContainer({feature:"max-width",value:"1199px",className:"ndn_videoPlayer_view1199"}),s.responsiveContainer({feature:"max-width",value:"1023px",className:"ndn_videoPlayer_view1023"}),s.responsiveContainer({feature:"max-width",value:"767px",className:"ndn_videoPlayer_view767"}),s.responsiveContainer({feature:"max-width",value:"639px",className:"ndn_videoPlayer_view639"}),s.responsiveContainer({feature:"max-width",value:"479px",className:"ndn_videoPlayer_view479"})}else i.resolve()},this))},this)).promise()},getCurrentTime:function(){return this.get("player").getCurrentTime()},getVideoIndexById:function(e){for(var t=this.getVideosData(),i=0;i<t.length;i++){var n=t[i];if(n.videoId==e)return i}return null},getCurrentVideoId:function(){return this.getVideoData(this.get("currentVideoIndex")).videoId},getCurrentPlaylistId:function(){return this.get("playlistId")},loadVideoById:function(t,i){s.getVideoData(t,this.get("widget")).done(e.proxy(function(e){this.set({playlistData:{items:[e]},playlistId:null,ampFeedData:null}),this.loadVideo(0,i)},this))},onceEmbedded:function(e){return this.get("isEmbedded2")?e():this.once("embed",e),this},isEnded:function(){return this.get("player").ended},resetContinuousPlayCounter:function(){this.set({continuousPlays:0,truViewCounter:0})},getPlayerConfig:function(e){"undefined"==typeof e&&(e=!1);var i=(this.get("widget").get("config"),{share:{facebook:!0,twitter:!0},feed:{enabled:!0}});if(t.contains(["VideoPlayer/Inline300","VideoPlayer/PTR"],this.get("widget").get("config").type)){var n;e&&(n=r.getDebugConfigParams()),i.flash={xml:g.getTemplate("ndn_assets_small",n)}}return this.get("infoPanelEnabled")||(i.info={enabled:!1}),i},getVideosData:function(){var e=this.get("playlistData");return"undefined"!=typeof e.items?e.items:[]},getVideoData:function(e){var t=this.getVideosData();return"undefined"!=typeof t[e]?t[e]:null},getCurrentVideoData:function(){return this.getVideoData(this.get("currentVideoIndex"))},getNextVideoData:function(){return this.getVideoData(this.get("currentVideoIndex")+1)},getPreviousVideoData:function(){return this.getVideoData(this.get("currentVideoIndex")-1)},getAmpFeedVideoData:function(e,t,i){"undefined"==typeof i&&(i=!1);var n=5,o=6,a="Wed, 03 Aug 2011 10:00:21 -0400",r={"@attributes":{version:"2.0"},channel:{category:"",pubDate:a,language:"en",ttl:"10",item:{title:"NDN - AMP Premier",link:"http://akamai.com/player.html",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc augue sapien, dapibus vitae imperdiet vitae, ullamcorper eget tortor. In lorem eros, porttitor quis commodo et, egestas a odio. Nunc eu augue sit amet dolor malesuada condimentum in eu velit. Donec commodo bibendum egestas. In viverra condimentum dapibus. Praesent molestie, dolor a laoreet cursus, massa sem varius tellus, at consectetur mauris ligula at dolor. Etiam semper augue et risus mattis iaculis tincidunt odio sodales. Vivamus eget elit quis metus pulvinar condimentum. Donec et vestibulum dui. Proin ultricies ligula sed felis pretium at adipiscing tortor bibendum. Morbi et ligula non massa facilisis lacinia. Duis at ligula mauris. Nullam ipsum tortor, lobortis eget adipiscing eu, sagittis eu sapien. Nunc dictum porttitor lobortis. Suspendisse cursus mollis lorem sed ultrices",category:"",pubDate:a,guid:i?"23408962":e.videoId+"","ndn-provider":{id:e.provider.trackingGroup,name:e.provider.name,image:e.provider.logoUrl},"media-group":{"media-content":function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],r={"@attributes":{url:function(){var e=a.url.replace(" ",""),t=/^(rtmp:.*)\.flv$/gi.exec(e);
return t&&(e=t[1]),e}(),medium:a.medium,type:a.type,duration:i?o:a.duration,width:640,height:360}},s={"video/mp4":"PDL","video/flv":"RMTP","video/x-flv":"RMTP","application/x-mpeg":"HLS","application/x-mpegURL":"HLS","video/f4m":"HDS"};"undefined"!=typeof s[a.type]&&(r["media-category"]={"@attributes":{schema:"http://mrss.akamai.com/user_agent_hint",label:s[a.type]}}),0==n&&(r["@attributes"].isDefault="true"),t.push(r)}return t}(e.mediaContent),"media-title":e.videoTitle,"media-description":e.description,"media-thumbnail":{"@attributes":{url:e.stillImageUrl,width:t.width||"604",height:t.height||"341"}}}}}},s=this.get("playerData"),l=s.settings.share.enabled&&s.settings.share.socialNetworks.enabled&&e.settings.share.embedCode.enabled;return l&&(r.channel.item["media-group"]["media-embed"]={"@attributes":{url:"http://player.js",width:t.width||"604",height:t.height||"341"},"media-param":{"@attributes":{name:"type"},"#text":"text/javascript"}}),i&&(r.channel.item["media-group"]["akamai-subclip"]={"akamai-start":n+"","akamai-end":n+o+""}),r},getAmpFeedData:function(e){if("undefined"==typeof e)var e=!0;if(e&&this.get("ampFeedData"))return this.get("ampFeedData");for(var t=[],i=this.get("widgetConfig"),n=this.get("playlistData"),o=n.items,a=0;a<o.length;a++){var r=o[a];t.push(this.getAmpFeedVideoData(r,i))}return this.set({ampFeedData:t}),t},getPlaylistId:function(){return this.get("playlistId")},setDefaultPlayOnLoadValue:function(e){return this.set({defaultPlayOnLoadValue:e}),this},setAutoplay:function(e){this.get("player").setAutoplay(e)},setMuted:function(e){this.get("player").setMuted(e)},getMuted:function(){return this.get("player").getMuted()},mute:function(){this.setMuteInterval(),this.setMuted(!0),this.setVolume(0)},unmute:function(){this.unsetMuteInterval(),this.setMuted(!1),this.setVolume(.75)},setVolume:function(e){this.get("player").setVolume(e)},getVolume:function(){return this.get("player").getVolume()},enableControls:function(){this.get("player").controls.setMode("auto")},setNextPlaylistId:function(e){this.set({nextPlaylistId:e})},getNextPlaylistId:function(){return this.get("nextPlaylistId")},disableControls:function(){this.get("player").controls.setMode("none")},setPlaylistItemsLimit:function(e){this.set({playlistItemsLimit:e})},hasAdsEnabled:function(){return!!this.get("widget").get("config").adsEnabled},isPlaying:function(){return"paused"!=this.get("player").info.player.playState&&("playing"==this.get("player").info.player.playState||this.isPlayingAd())},isPlayingAd:function(){return"undefined"!=typeof this.get("player").ads&&this.get("player").ads.getInProgress()},addDeliberator:function(e,t){this.get("deliberators")[e]&&this.get("deliberators")[e].push(t)}},{getCachedPlaylistData:function(e){return l.getPlaylistData(e,40)}})}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/AbstractModel",["jquery","backbone","models/Ndn/Widget","models/Ndn/VideoPlayer"],function(e,t,i,n){return i.extend({defaults:{videoPlayer:null},initialize:function(){i.prototype.initialize.apply(this,arguments),this.set("videoPlayer",new n(this)),this.get("videoPlayer").on("embed",e.proxy(function(){i.trackAnalytics("videoPlayerEmbed",this)},this)),this.get("videoPlayer").on("videoView",e.proxy(function(e){i.trackAnalytics("videoView",{widget:this,percentPlayed:e})},this)),this.get("videoPlayer").on("hook:videoEnd",e.proxy(function(){this.trigger("hook:videoEnd",{})},this)).on("hook:videoPause",e.proxy(function(){this.trigger("hook:videoPause",{currentTime:this.get("videoPlayer").getCurrentTime()})},this)).on("hook:rmmStartRequest",e.proxy(function(){this.trigger("hook:rmmStartRequest",{})},this)),this.get("videoPlayer").on("adEnd",e.proxy(function(){this.get("loyaltyProgram")&&this.get("loyaltyProgram").execute()},this)),this.get("videoPlayer").addDeliberator("loadAttempt",e.proxy(function(t){this.getSettings().done(e.proxy(function(e){var i=this.get("config");i.providerId&&i.providerStoryId&&!e.videosData?(this.getContainerElement().css({display:"none",width:"0px",height:"0px"}),t.reject()):t.resolve()},this))},this))},embed:function(){return e.Deferred(e.proxy(function(t){this.get("view").render(this.getTemplate("default"),{appUrl:i.getAppUrl(),playerContainerElementId:this.getPlayerContainerElementId(),width:this.get("config").width,height:this.get("config").height}),this.get("videoPlayer").embed(this.getPlayerContainerElementId()).done(e.proxy(function(){t.resolve()},this))},this)).promise()},getLandingPageUrl:function(){return"http://"+i.getAppDomain()+"/"}})}),Ndn_Require.define("views/Ndn/AbstractView",["jquery","backbone","mustache","jquery_autoellipsis","jquery_responsive_containers"],function(e,t){return t.View.extend({slides:1,initialize:function(){},loadImagesForSlide:function(t,i){var n=t*this.slides;_.isUndefined(i)?this.$el.find('li.ndn_selectableVideo:not(".ndn_carousel-clone")').filter(":eq("+n+"), :gt("+n+"):lt("+(this.slides-1)+")").each(function(t,i){var n=e(i).data("videoId");this.$el.find('li[data-video-id="'+n+'"] img:not(".ndn_providerLogo")').attr("src",this.$el.find('li[data-video-id="'+n+'"] img:not(".ndn_providerLogo")').data("src")),this.$el.find('li[data-video-id="'+n+'"] img.ndn_providerLogo').attr("src",this.$el.find('li[data-video-id="'+n+'"] img.ndn_providerLogo').data("src"))}.bind(this)):this.$el.find('li:not(".ndn_carousel-clone") '+i+" li").filter(":eq("+n+"), :gt("+n+"):lt("+(this.slides-1)+")").each(function(t,i){var n=e(i).data("videoId");this.$el.find('li[data-video-id="'+n+'"] img:not(".ndn_providerLogo")').attr("src",this.$el.find('li[data-video-id="'+n+'"] img:not(".ndn_providerLogo")').data("src")),this.$el.find('li[data-video-id="'+n+'"] img.ndn_providerLogo').attr("src",this.$el.find('li[data-video-id="'+n+'"] img.ndn_providerLogo').data("src"))}.bind(this))},render:function(e,t,i){var n,o=e(t);if(i===!0)n=o;else{var a=i?this.$el.find(i):this.$el;a.html(o)}return this.trigger("render",{template:e,params:t,selector:i}),n},displayCompanionAd:function(t,i){if(-1!==i.indexOf("<html")){var n,o;t.html(n=e(document.createElement("iframe")).css({width:"300px",height:"250px"})),o=n.get(0).contentWindow.document,o.open(),o.write(i),o.close()}else t.html(i)},openNdnWindow:function(t){window.open(t,"ndnPlayer","scrollbars,resizable,width=768,height="+Math.min(e(window).innerHeight(),825),!1)}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/AbstractView",["jquery","views/Ndn/AbstractView","models/Ndn/Utils/UserAgent"],function(e,t,i){var n="14126";return t.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","click .ndn_playlistSelectorMenu a":"onPlaylistSelect"},showingPlaylistPause:!1,initializeVideoPlayer:function(){this.model.onceConfigIsComplete(e.proxy(function(){this.model.get("videoPlayer").setDefaultPlayOnLoadValue(this.model.get("config").autoPlay).load()},this))},initializeVideoPlayerForRmm:function(){this.model.onceConfigIsComplete(e.proxy(function(){var t=this.model.get("videoPlayer");t.on("rmmPause",e.proxy(function(){t.setDefaultPlayOnLoadValue(this.model.get("config").autoPlay).play(0)},this)),this.model.get("config").autoPlay?this.model.get("videoPlayer").setDefaultPlayOnLoadValue(!0).load():i.isAbleToPlayVideoAutomatically()?this.model.get("videoPlayer").once("rmmEnd",e.proxy(function(){this.model.get("videoPlayer").setDefaultPlayOnLoadValue(!1).load()},this)).playRmm():this.model.get("videoPlayer").setDefaultPlayOnLoadValue(!1).load()},this))},initialize:function(){t.prototype.initialize.apply(this,arguments),this.$el.on("mouseenter",".ndn_sliderNavButton",function(){e(this).addClass("ndn_hover"),(i.isMobile()||i.isOnIos())&&setTimeout(function(){e(this).removeClass("ndn_hover")}.bind(this),700)}).on("mouseleave",".ndn_sliderNavButton",function(){e(this).removeClass("ndn_hover")}),this.model.onceConfigIsComplete(e.proxy(function(){this.model.get("config").videoId?this.model.get("videoPlayer").on("isolatedVideoEnd",e.proxy(function(){this.model.get("videoPlayer").once("videoStartRequest",function(){this.setNextPlaylistId(n)})},this)):this.model.get("videoPlayer").setNextPlaylistId(n)},this)),this.model.get("videoPlayer").on("embed",e.proxy(function(){this.$el.append(e(document.createElement("div")).addClass("ndn_pauseOverlayContainer ndn_playerOverlay")),this.initializeVideoPlayer()},this)).on("videoPlaylistLoad",e.proxy(function(){this.updateSelectableVideos()},this)).on("videoLoad",e.proxy(function(){this.updateSelectedVideo()},this))},hidePlayerOverlays:function(){this.$el.find(".ndn_playerOverlay").hide()},onVideoSelect:_.debounce(function(t){this.model.trigger("videoSelect"),this.hidePlayerOverlays();var i=e(t.currentTarget).data("video-index"),n=this.$el.find(".ndn_selectableVideos .ndn_selectableVideo");return n.removeClass("ndn_activeVideo"),n.filter(":eq("+i+")").addClass("ndn_activeVideo"),this.model.get("videoPlayer").resetContinuousPlayCounter(),this.model.get("videoPlayer").play(i),!1},1e3,!0),onPlaylistSelect:function(t){return this.hidePlayerOverlays(),this.model.get("videoPlayer").resetContinuousPlayCounter(),this.model.get("videoPlayer").load(0,e(t.target).data("playlist-id"),this.model.get("config").autoPlay),!1},updateSelectableVideos:function(){var e=this.model.getTemplate("selectableVideos");e&&this.render(e,{playlistItems:this.model.get("videoPlayer").getActivePlaylistData()?this.model.get("videoPlayer").getActivePlaylistData().items:[],videoIndex:function(){var e=0;return function(){return e++}}()},".ndn_selectableVideos")},updateSelectedVideo:function(){var e=this.model.get("videoPlayer"),t=e.getCurrentVideoData(),i=this.$el.find(".ndn_selectableVideo,.ndn_pauseOverlay_selectableVideo"),n=this.model.get("config").adsEnabled;if(i.removeClass("ndn_activeVideo ndn_activeVideoNotPlaying"),null!==t){var o=t.videoId,a=i.filter('[data-video-id="'+o+'"]'),r=function(){var t=e.getCurrentVideoData();return null!==t&&t.videoId==o};e.isPlayingRmm()?a.addClass("ndn_activeVideoNotPlaying"):n?(a.addClass("ndn_activeVideoNotPlaying"),e.once("adEnd",function(){r()&&a.removeClass("ndn_activeVideoNotPlaying").addClass("ndn_activeVideo")})):a.addClass("ndn_activeVideo")}}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/DefaultView",["jquery","views/Ndn/Widget/VideoPlayer/AbstractView"],function(e,t){return t.extend({events:{mouseover:"mouseOverToPlay","click .ndn_selectableVideo":"onVideoSelect","click .ndn_playlistSelectorMenu a":"onPlaylistSelect"},initialize:function(){t.prototype.initialize.apply(this,arguments)},isStartOverlayPresent:function(){var e=this.$el.find(".ndn_startOverlayContainer").is(":visible")?!0:!1;return e},mouseOverToPlay:function(){1===this.model.get("config").playOnMouseover&&0==this.isAutoplayEnabled()&&this.isStartOverlayPresent()&&this.model.get("videoPlayer").play()},isAutoplayEnabled:function(){var e=this.model.canAutoPlay()?!0:!1;return e}})}),Ndn_Require.define("text!templates/ndn/widget/video-player/default/default.html",[],function(){return'<div id="{{playerContainerElementId}}" class="ndn_playerContainer"></div>\n<div style="clear: both;"></div>'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/DefaultModel",["jquery","models/Ndn/Widget","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/DefaultView","text!templates/ndn/widget/video-player/default/default.html","models/Ndn/VideoPlayer"],function(e,t,i,n,o){return i.extend({defaults:{widgetView:n,templatePaths:{"default":o},playlistItemsLimit:40},initialize:function(){i.prototype.initialize.apply(this,arguments),this.get("videoPlayer").setPlaylistItemsLimit(this.get("playlistItemsLimit"))},canAutoPlay:function(){var e=this.get("videoPlayer").get("widget").attributes.config.autoPlay;return e}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/StudioView",["jquery","underscore","views/Ndn/Widget/VideoPlayer/AbstractView"],function(e,t,i){return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.model.get("videoPlayer").on("adCompanion",e.proxy(function(e){var t=e.data[0].data||e.data[0].content;this.model.trigger("hook:adCompanion",{content:t})},this))},syncSidePanel:function(){var e=this.$el.find(".ndn_sidePanel").hasClass("ndn_hasCompanionAd");this.$el.find(".ndn_selectableVideos").css("height",this.getSelectableVideosContainerHeight(e)),this.$el.find(".ndn_sidePanel").toggleClass("ndn_hasCompanionAd",e)},getSelectableVideosContainerHeight:function(e){var t=this.$el.find(".ndn_playerEngagement").height();return t-=34,e&&(t-=260),t},showCompanionAd:function(e){this.model.set("isShowingCompanionAd",!0),this.syncSidePanel();var t=this.$el.find(".ndn_adCompanion");this.displayCompanionAd(t,e),t.addClass("ndn_active")},hideCompanionAd:function(){this.model.set("isShowingCompanionAd",!1),this.$el.find(".ndn_adCompanion").removeClass("ndn_active").html(""),this.syncSidePanel()},onVideoSelect:t.debounce(function(t){this.model.trigger("videoSelect"),this.hidePlayerOverlays();var i=e(t.currentTarget).data("video-id"),n=this.$el.find(".ndn_selectableVideos .ndn_selectableVideo");return n.removeClass("ndn_activeVideo"),this.model.get("videoPlayer").resetContinuousPlayCounter(),this.model.get("videoPlayer").loadVideoById(i,!0),!1},1e3,!0),updateSelectableVideos:function(){this.model.getTopTrendingVideosData().done(e.proxy(function(e){this.render(this.model.getTemplate("selectableVideos"),{playlistItems:e},".ndn_selectableVideos")},this))}})}),Ndn_Require.define("text!templates/ndn/widget/video-player/studio/default.html",[],function(){return'<div id="{{playerContainerElementId}}" class="ndn_playerContainer"></div>'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/StudioModel",["jquery","models/Ndn/Widget","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/StudioView","text!templates/ndn/widget/video-player/studio/default.html"],function(e,t,i,n,o){return i.extend({defaults:{widgetView:n,templatePaths:{"default":o},playlistItemsLimit:40,isShowingCompanionAd:!1,topTrendingVideosData:null},initialize:function(){i.prototype.initialize.apply(this,arguments),this.get("videoPlayer").setPlaylistItemsLimit(this.get("playlistItemsLimit"))},getTopTrendingVideosData:function(){return e.Deferred(e.proxy(function(i){this.get("topTrendingVideosData")?i.resolve(this.get("topTrendingVideosData")):e.ajax({type:"GET",url:"http://"+t.getAppDomain()+"/testpages/getTopTrendingVideosData.json",contentType:"json"}).done(function(e){i.resolve(e)})},this)).promise()}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/Inline300View",["jquery","underscore","views/Ndn/Widget/VideoPlayer/AbstractView","models/Ndn/Utils/UserAgent","jquery_autoellipsis"],function(e,t,i,n){return i.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","mouseenter .ndn_selectableVideos":"onUserInteractionStart","touchstart .ndn_selectableVideos":"onUserInteractionStart","mouseleave .ndn_selectableVideos":"onUserInteractionEnd","touchend .ndn_selectableVideos":"onUserInteractionEnd"},initializeVideoPlayer:function(){this.initializeVideoPlayerForRmm(),n.isAbleToPlayVideoAutomatically()?this.model.get("videoPlayer").once("rmmEnd",e.proxy(function(){this.model.enableAutoAdvance()},this)):this.model.enableAutoAdvance()},onUserInteractionStart:function(){this.model.set({isInteractingWithUser:!0}),this.dequeueScrollSync()},onUserInteractionEnd:function(){this.model.set({isInteractingWithUser:!1}),this.queueScrollSync()},initialize:function(){i.prototype.initialize.apply(this,arguments),this.model.get("videoPlayer").on("videoLoad",e.proxy(function(t){var i=t.videoData;this.$el.find(".ndn_videoPlayerHeader .ndn_videoTitle").html(i.videoTitle),this.$el.find(".ndn_videoPlayerHeader .ndn_videoProvider").html(i.provider.name),this.$el.find(".ndn_videoPlayerHeader .ndn_videoProviderLogo").html(e(document.createElement("img")).attr({src:i.provider.logoUrl,alt:i.provider.name})),this.isInteractingWithUser()||this.syncScrollPosition()},this)),this.model.get("videoPlayer").on("adCompanion",e.proxy(function(e){this.showCompanionAd(e.data[0].data||e.data[0].content)},this)).on("adEnd",e.proxy(this.hideCompanionAd,this)),this.model.get("videoPlayer").on("embed",e.proxy(function(){this.model.get("videoPlayer").on("videoStartRequest",e.proxy(function(){this.model.disableAutoAdvance()},this))},this))},updateSelectableVideos:function(){i.prototype.updateSelectableVideos.apply(this,[]),this.$el.find(".ndn_selectableVideos .ndn_videoDescription").ellipsis()},showCompanionAd:function(e){this.$el.find(".ndn_selectableVideos").hide();var t=this.$el.find(".ndn_adCompanion");this.displayCompanionAd(t,e),t.addClass("ndn_active")},hideCompanionAd:function(){this.$el.find(".ndn_adCompanion").removeClass("ndn_active").html(""),this.$el.find(".ndn_selectableVideos").show()},dequeueScrollSync:function(){this.model.get("queueScrollSyncCountdown")!==!1&&(clearInterval(this.model.get("queueScrollSyncCountdown")),this.model.set({queueScrollSyncCountdown:!1}))},queueScrollSync:function(){var t=3;this.dequeueScrollSync(),this.model.set({queueScrollSyncCountdown:setInterval(e.proxy(function(){clearInterval(this.model.get("queueScrollSyncCountdown")),this.model.set({queueScrollSyncCountdown:!1}),this.syncScrollPosition()},this),1e3*t)})},isInteractingWithUser:function(){return this.model.get("isInteractingWithUser")},syncScrollPosition:function(){var t=90,i=this.model.isAutoAdvanceEnabled()?3*Math.floor(this.model.get("videoPlayer").get("currentVideoIndex")/3)*t:Math.max(this.model.get("videoPlayer").get("currentVideoIndex")-1,0)*t,n=this.$el.find(".ndn_selectableVideos");i+n.height()==n.get(0).scrollHeight+t&&(i-=t),n.get(0).scrollTop!=i&&n.animate({scrollTop:i},{duration:1e3,done:e.proxy(function(){this.syncScrollPosition()},this)})},onVideoSelect:t.debounce(function(){return i.prototype.onVideoSelect.apply(this,arguments),this.syncScrollPosition(),!1},500,!0)})}),Ndn_Require.define("text!templates/ndn/widget/video-player/inline300/default.html",[],function(){return'<div class="ndn_videoPlayerHeader">\n	<div class="ndn_videoProviderLogo"></div>\n	<span class="ndn_videoTitle"></span>\n	<span class="ndn_videoProvider"></span>\n</div>\n<div id="{{playerContainerElementId}}" class="ndn_playerContainer" style="width:300px;height:170px;"></div>\n<ul class="ndn_selectableVideos"></ul>\n<div class="ndn_adCompanion"></div>\n<div style="clear: both;"></div>'}),Ndn_Require.define("text!templates/ndn/widget/video-player/inline300/selectableVideos.html",[],function(){return'{{#playlistItems}}\n    <li class="ndn_selectableVideo" data-video-index="{{videoIndex}}" data-video-id="{{videoId}}">\n    	<div class="ndn_thumbnail">\n        	<img src="{{thumbnailUrl}}" alt="{{videoTitle}}" />\n        	<span class="ndn_videoDuration">{{displayDuration}}</span>\n        	<span class="ndn_nowPlaying">Now Playing</span>\n        	<span class="ndn_upcomingVideo">Up Next</span>\n        	<span class="ndn_playVideoIcon"></span>\n        </div>\n        <span class="ndn_videoTitle">{{videoTitle}}</span>\n        <span class="ndn_videoDescription">{{description}}</span>\n    </li>\n{{/playlistItems}}'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/Inline300Model",["jquery","models/Ndn/Timer","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/Inline300View","text!templates/ndn/widget/video-player/inline300/default.html","text!templates/ndn/widget/video-player/inline300/selectableVideos.html"],function(e,t,i,n,o,a){return i.extend({defaults:{widgetView:n,templatePaths:{"default":o,selectableVideos:a},isInteractingWithUser:!1,queueScrollSyncCountdown:!1,autoAdvanceTimer:null,playlistItemsLimit:12},initialize:function(){this.set({autoAdvanceTimer:new t(e.proxy(function(){this.trigger("autoAdvance")},this),7e3,0)}),this.on("autoAdvance",e.proxy(function(){var e=3,t=Math.floor(this.get("videoPlayer").get("currentVideoIndex")/e)*e+e;this.get("videoPlayer").getVideoData(t)||(t=0),this.model.get("videoPlayer").resetContinuousPlayCounter(),this.get("videoPlayer").load(t)},this)),i.prototype.initialize.apply(this,arguments),this.get("videoPlayer").setPlaylistItemsLimit(this.get("playlistItemsLimit")),this.get("videoPlayer").toggleInfoPanel(!1),this.get("videoPlayer").once("videoTimeUpdate",e.proxy(function(){this.disableAutoAdvance()},this))},isAutoAdvanceEnabled:function(){return this.get("autoAdvanceTimer").isActive()},enableAutoAdvance:function(){this.get("videoPlayer").setDefaultPlayOnLoadValue(!1),this.get("autoAdvanceTimer").reset()},disableAutoAdvance:function(){this.get("videoPlayer").setDefaultPlayOnLoadValue(this.get("config").autoPlay),this.get("autoAdvanceTimer").stop()}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/Inline590View",["jquery","views/Ndn/Widget/VideoPlayer/AbstractView","models/Ndn/Utils/UserAgent","jquery_imagesloaded","jquery_bxslider"],function(e,t,i){return t.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","click .ndn_sliderNext":"onNextClick","click .ndn_sliderPrev":"onPrevClick","click .ndn_closeShare":"hideShare","click .ndn_shareCopyEmbedCodeText":"selectAllEmbed","click .ndn_shareCopyVideoLinkText":"selectAllVideo"},carousel:null,slides:4,initialize:function(){t.prototype.initialize.apply(this,arguments),this.model.get("videoPlayer").on("videoLoad",function(){this.carousel.goToSlide(Math.floor(this.model.get("videoPlayer").get("currentVideoIndex")/4))}.bind(this))},initializeVideoPlayer:function(){this.initializeVideoPlayerForRmm()},onPrevClick:function(){this.carousel.goToPrevSlide()},onNextClick:function(){this.carousel.goToNextSlide()},onVideoSelect:_.debounce(function(i){this.hidePlayerOverlays();var n=e(i.currentTarget).data("video-id");return n==this.model.get("videoPlayer").getCurrentVideoId()?(this.model.get("videoPlayer").resetContinuousPlayCounter(),this.model.get("videoPlayer").play()):t.prototype.onVideoSelect.apply(this,arguments),!1},1e3,!0),updateSelectableVideos:function(){var t=this.model.get("videoPlayer").getActivePlaylistData()?this.model.get("videoPlayer").getActivePlaylistData().items:[],n=0;if(_.isNull(this.model.get("videoPlayer").get("playlistId"))){var o=this.model.get("videoPlayer").get("playerData").playlists,a=o[_.first(_.keys(o))].items;t=t.concat(a),n=-1}this.render(this.model.getTemplate("selectableVideos"),{playlistItems:t,videoIndex:function(){return function(){return Math.max(n++,0)}}()},".ndn_selectableVideos");var r={pager:!1,controls:!1,slideWidth:125,slideMargin:10,minSlides:4,maxSlides:4,onSliderLoad:function(){this.loadImagesForSlide(0)}.bind(this),onSlideBefore:function(e,t,i){this.loadImagesForSlide(i)}.bind(this)};_.isNull(this.carousel)?(this.carousel=this.$el.find(".ndn_selectableVideos").bxSlider(r),11==i.getIeVersion()&&(this.$el.find(".ndn_sliderPrev").trigger("click"),setTimeout(e.proxy(function(){this.$el.find(".ndn_sliderNext").trigger("click")},this),1e3))):this.carousel.reloadSlider(r),this.$el.find(".ndn_sliderThumbnailTitle p").ellipsis()}})}),Ndn_Require.define("text!templates/ndn/widget/video-player/inline590/default.html",[],function(){return'<div id="{{playerContainerElementId}}"></div>\n<div class="ndn_sliderPrev ndn_sliderNavButton"></div>\n<div class="ndn_sliderWrapper">\n	<ul class="ndn_sliderItems ndn_selectableVideos"></ul>\n</div>\n<div class="ndn_sliderNext ndn_sliderNavButton"></div>\n'}),Ndn_Require.define("text!templates/ndn/widget/video-player/inline590/selectableVideos.html",[],function(){return'{{#playlistItems}}\n    <li class="ndn_selectableVideo {{#first}}ndn_nowPlaying{{/first}}" data-video-id="{{videoId}}" title="{{videoTitle}}" data-video-index="{{videoIndex}}">\n    	<div class="ndn_thumbContainer ndn_sliderThumbnailImageWrapper">\n        	<img data-src="{{thumbnailUrl}}"/>\n        	<div class="ndn_nowPlaying">Now Playing</div>\n        	<div class="ndn_upcomingVideo">Up Next</div>\n        	<div class="ndn_sliderThumbnailOverlay">\n        		{{displayDuration}}\n        	</div>\n            <div class="ndn_sliderThumbnailPlay"></div>\n    	</div>\n    	<div class="ndn_sliderThumbnailTitle">\n    		<p>{{videoTitle}}</p>\n    	</div>\n    </li>\n{{/playlistItems}}\n'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/Inline590Model",["jquery","models/Ndn/Widget","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/Inline590View","text!templates/ndn/widget/video-player/inline590/default.html","text!templates/ndn/widget/video-player/inline590/selectableVideos.html"],function(e,t,i,n,o,a){return i.extend({defaults:{widgetView:n,templatePaths:{"default":o,selectableVideos:a},playlistItemsLimit:40},initialize:function(){i.prototype.initialize.apply(this,arguments),this.get("videoPlayer").setPlaylistItemsLimit(this.get("playlistItemsLimit"))}})}),Ndn_Require.define("lib/jquery_plugins/jquery.simplePagination",["jquery"],function(e){var t={init:function(i){var n=e.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:1,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",cssStyle:"light-theme",selectOnClick:!0,onPageClick:function(){},onInit:function(){}},i||{}),o=this;return o.data("paginationOptions",i),n.pages=n.pages?n.pages:Math.ceil(n.items/n.itemsOnPage)?Math.ceil(n.items/n.itemsOnPage):1,n.currentPage=n.currentPage-1,n.halfDisplayed=n.displayedPages/2,this.each(function(){o.addClass(n.cssStyle+" simple-pagination").data("pagination",n),t._draw.call(o)}),n.onInit(),this},selectPage:function(e){return t._selectPage.call(this,e-1),this},prevPage:function(){var e=this.data("pagination");return e.currentPage>0&&t._selectPage.call(this,e.currentPage-1),this},nextPage:function(){var e=this.data("pagination");return e.currentPage<e.pages-1&&t._selectPage.call(this,e.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},redraw:function(){return t._draw.call(this),this},disable:function(){var e=this.data("pagination");return e.disabled=!0,this.data("pagination",e),t._draw.call(this),this},enable:function(){var e=this.data("pagination");return e.disabled=!1,this.data("pagination",e),t._draw.call(this),this},_draw:function(){var i,n=this.data("pagination"),o=t._getInterval(n);t.destroy.call(this);var a="UL"===this.prop("tagName")?this:e("<ul></ul>").appendTo(this);if(n.prevText&&t._appendItem.call(this,n.currentPage-1,{text:n.prevText,classes:"prev"}),o.start>0&&n.edges>0){var r=Math.min(n.edges,o.start);for(i=0;r>i;i++)t._appendItem.call(this,i);n.edges<o.start&&o.start-n.edges!=1?a.append('<li class="disabled"><span class="ellipse">'+n.ellipseText+"</span></li>"):o.start-n.edges==1&&t._appendItem.call(this,n.edges)}for(i=o.start;i<o.end;i++)t._appendItem.call(this,i);if(o.end<n.pages&&n.edges>0){n.pages-n.edges>o.end&&n.pages-n.edges-o.end!=1?a.append('<li class="disabled"><span class="ellipse">'+n.ellipseText+"</span></li>"):n.pages-n.edges-o.end==1&&t._appendItem.call(this,o.end++);var s=Math.max(n.pages-n.edges,o.end);for(i=s;i<n.pages;i++)t._appendItem.call(this,i)}n.nextText&&t._appendItem.call(this,n.currentPage+1,{text:n.nextText,classes:"next"})},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(i,n){var o,a,r=this,s=r.data("pagination"),l=e("<li></li>"),d=r.find("ul");i=0>i?0:i<s.pages?i:s.pages-1,o=e.extend({text:i+1,classes:""},n||{}),i==s.currentPage||s.disabled?(l.addClass(s.disabled?"disabled":"active"),a=e('<span class="current">'+o.text+"</span>")):(a=e('<a href="'+s.hrefTextPrefix+(i+1)+s.hrefTextSuffix+'" class="page-link">'+o.text+"</a>"),a.click(function(e){return t._selectPage.call(r,i,e)})),o.classes&&a.addClass(o.classes),l.append(a),d.length?d.append(l):r.append(l)},_selectPage:function(e,i){var n=this.data("pagination");return n.currentPage=e,n.selectOnClick&&t._draw.call(this),n.onPageClick(e+1,i)}};e.fn.pagination=function(i){return t[i]&&"_"!=i.charAt(0)?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on jQuery.pagination"):t.init.apply(this,arguments)}}),Ndn_Require.define("lib/jquery_plugins/jquery.bootpag",["jquery"],function(e){!function(e){e.fn.bootpag=function(t){function i(t,i){var r,s=0==a.maxVisible?1:a.maxVisible,l=1==a.maxVisible?0:1,d=Math.floor((i-1)/s)*s,c=t.find("li");if(a.page=i=0>i?0:i>a.total?a.total:i,c.removeClass("disabled"),r=1>i-1?1:a.leaps&&i-1>=a.maxVisible?Math.floor((i-1)/s)*s:i-1,c.first().toggleClass("disabled",1===i).attr("data-lp",r).find("a").attr("href",n(r)),l=1==a.maxVisible?0:1,r=i+1>a.total?a.total:a.leaps&&i+1<a.total-a.maxVisible?d+a.maxVisible+l:i+1,c.last().toggleClass("disabled",i===a.total).attr("data-lp",r).find("a").attr("href",n(r)),s=c.filter("[data-lp="+i+"]"),!s.not(".next,.prev").length){var u=d>=i?-a.maxVisible:0;c.not(".next,.prev").each(function(t){r=t+1+d+u,e(this).attr("data-lp",r).toggle(r<=a.total).find("a").html(r).attr("href",n(r))}),s=c.filter("[data-lp="+i+"]")}s.addClass("disabled"),o.trigger("page",i),o.data("settings",a)}function n(e){return a.href.replace(a.hrefVariable,e)}var o=this,a=e.extend({total:0,page:1,maxVisible:null,leaps:!0,href:"javascript:void(0);",hrefVariable:"{{number}}",next:"&raquo;",prev:"&laquo;"},o.data("settings")||{},t||{});return 0>=a.total?this:(!e.isNumeric(a.maxVisible)&&!a.maxVisible&&(a.maxVisible=a.total),o.data("settings",a),this.each(function(){var t,o,r=e(this),s=['<ul class="bootpag">'];for(a.prev&&s.push('<li data-lp="1" class="prev"><a href="'+n(1)+'">'+a.prev+"</a></li>"),o=1;o<=Math.min(a.total,a.maxVisible);o++)s.push('<li data-lp="'+o+'"><a href="'+n(o)+'">'+o+"</a></li>");a.next&&(o=a.leaps&&a.total>a.maxVisible?Math.min(a.maxVisible+1,a.total):2,s.push('<li data-lp="'+o+'" class="next"><a href="'+n(o)+'">'+a.next+"</a></li>")),s.push("</ul>"),r.find("ul.bootpag").remove(),r.append(s.join("")).addClass("pagination"),t=r.find("ul.bootpag"),r.find("li").click(function(){var n=e(this);n.hasClass("disabled")||i(t,parseInt(n.attr("data-lp"),10))}),i(t,a.page)}))}}(e,window)}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/16x9View",["jquery","underscore","views/Ndn/Widget/VideoPlayer/AbstractView","models/Ndn/VideoPlayer","models/Ndn/PlayerServices","models/Ndn/Widget","lib/jquery_plugins/jquery.simplePagination","lib/jquery_plugins/jquery.bootpag"],function(e,t,i,n,o){var a=12,r=8;return i.extend({events:{"click .ndn_selectableVideo":"onVideoSelect","click .ndn_playlistTabs li a":"onPlaylistSelect","click .ndn_overlayButton span":"hideShare","click .ndn_closeShare":"hideShare","click .ndn_pauseNext":"onUpNextClick","click .ndn_pausePrev":"onPrevClick","click .ndn_pauseShare":"overlayStop","click .ndn_pauseShareOtherPause":"showShare","click .ndn_shareCopyEmbedCodeText":"selectAllEmbed","click .ndn_shareCopyVideoLinkText":"selectAllVideo","click a.ndn_accordion-toggle":"onMobileAccordionClick"},elements:{pagesContainer:".ndn_playlistThumbnailsPages"},currentPage:1,usingDefaultPlaylist:!1,initialize:function(){i.prototype.initialize.apply(this,arguments),this.elements.pageContainer=this.$el.find(".ndn_playlistThumbnailsPages"),this.model.on("change:playlists",e.proxy(function(){this.updatePlaylistTabs()},this)),this.model.get("videoPlayer").on("embed",e.proxy(function(){this.model.get("playlists").length&&this.updatePlaylistTabs()},this)).on("videoUnavailable",e.proxy(function(){this.usingDefaultPlaylist=!0,this.model.set("playlists",[])},this)).on("adCompanion",e.proxy(function(e){this.showCompanion(e.data[0].data||e.data[0].content)},this)).on("adEnd",e.proxy(this.hideCompanion,this))},updatePlaylistTabs:function(){this.render(this.model.getTemplate("playlistTabs"),{playlists:this.model.get("playlists")},".ndn_playlistTabs"),this.updatePlaylistSelectedTab(this.model.get("videoPlayer").get("playlistId"))
},onMobileAccordionClick:function(){return this.$el.find(".ndn_accordion .ndn_collapse").slideToggle(),!1},onPlaylistSelect:function(t){var i=e(t.currentTarget).data("playlistId");return o.getPlaylistData(i,this.model).done(e.proxy(function(e){var t=this.$el.find(".ndn_playlistThumbnailsPages"),i=t.hasClass("ndn_withCompanion")?r:a;this.updateSelectableVideos(i,e)},this)),!1},onVideoSelect:t.debounce(function(){this.model.trigger("videoSelect");var t=this.$el.find(".ndn_playlistTabs li.ndn_active a").data("playlistId")||this.model.get("videoPlayer").get("playlistId"),n=arguments;this.model.get("videoPlayer").loadPlaylist(t).done(e.proxy(function(){i.prototype.onVideoSelect.apply(this,n)},this))},500,!0),onUpNextClick:function(){this.model.get("videoPlayer").play(this.model.get("videoPlayer").get("currentVideoIndex")+1)},onPrevClick:function(){this.model.get("videoPlayer").play(this.model.get("videoPlayer").get("currentVideoIndex")-1)},showCompanion:function(e){var t=this.$el.find(".ndn_playlistThumbnailsPages");t.addClass("ndn_withCompanion");var i=t.prev("div.ndn_companion");this.displayCompanionAd(i,e),i.show(),this.updateSelectableVideos(r)},hideCompanion:function(){var e=this.$el.find(".ndn_playlistThumbnailsPages");e.removeClass("ndn_withCompanion"),e.prev("div.ndn_companion").html("").hide(),this.updateSelectableVideos()},updateSelectableVideos:function(i,o){if(t.isUndefined(i)&&(i=a),t.isUndefined(o)&&(o=this.model.get("videoPlayer").getPlaylistId()?this.model.get("videoPlayer").getActivePlaylistData():n.getCachedPlaylistData(this.model.get("playlists")[0].id)),o){var r=this.$el.find(".ndn_playlistThumbnailsPages"),s=this.$el.find(".ndn_playlistThumbnailsPagination"),l=1,d=0,c=o.items,u=r.find("ul.ndn_playlistThumbnailsPage:visible"),p=u.data("page-number");if(null===p)var h=1;else var g=s.data("paginationOptions").itemsOnPage,f=(p-1)*g+1,h=Math.ceil(f/i);var m=["pages",o.playlistId,i].join("_"),y=r.data(m);if(t.isUndefined(y)===!1)r.html(y);else{for(r.html("");c.length>0;){var v=c.slice(0,Math.min(c.length,i));e.proxy(function(t){var i=e(document.createElement("ul")).addClass("ndn_playlistThumbnailsPage").attr("data-page-number",l++).html(this.render(this.model.getTemplate("playlistThumbnailsPage"),{playlistItems:t,videoIndex:function(){return d++}},!0));r.append(i),i.hide()},this)(v),c=c.slice(v.length)}r.data(m,r.html())}s.pagination({items:o.items.length,itemsOnPage:i,cssStyle:"pagination-centered",onPageClick:e.proxy(function(e){this.displayPlaylistThumbnailPage(e)},this),prevText:"&laquo;",nextText:"&raquo;"}),this.displayPlaylistThumbnailPage(h),this.updatePlaylistSelectedTab(o.playlistId),this.updateSelectedVideo();{1===r.children().size()?s.hide():s.show()}}},updatePlaylistSelectedTab:function(e){var t=this.$el.find(".ndn_playlistTabs"),i=t.find("li.ndn_active");i.children("a").data("playlistId")!==e&&(i.removeClass("ndn_active"),t.find("a[data-playlist-id="+e+"]").parents("li").addClass("ndn_active"))},displayPlaylistThumbnailPage:function(t){var i=(this.$el.find(".ndn_playlistThumbnailsPagination"),this.$el.find(".ndn_playlistThumbnailsPages"));this.pageNumber=t,i.children("ul:visible").length?i.children("ul:visible").fadeOut("fast",function(){i.children("ul").each(function(n){t==n+1&&(e(this).fadeIn("fast"),i.find(".ndn_videoTitle:visible").ellipsis())})}):(i.children("ul:eq("+(t-1)+")").show(),i.find(".ndn_videoTitle:visible, .ndn_videoMeta").ellipsis({updateOnWindowResize:!0}))}})}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/default.html",[],function(){return'<div class="ndn_16-9-wrapper">\n    <div id="{{playerContainerElementId}}" class="ndn_playerContainer"></div>\n</div>\n<!--LARGE DISPLAY CATEGORIES TABS START-->\n<ul class="ndn_nav ndn_nav-tabs ndn_lite ndn_playlistTabs ndn_playlistSelectorMenu">\n</ul>\n<!--LARGE DISPLAY CATEGORIES TABS END--> \n<!--SMALL DISPLAY CATEGORIES TABS START-->\n<div class="ndn_accordion" id="accordion2">\n    <div class="ndn_accordion-group">\n        <div class="ndn_accordion-heading"></div>\n        <div class="ndn_openNav">\n        	<a class="ndn_accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"></a>\n        </div>\n        <div id="collapseOne" class="ndn_accordion-body ndn_in ndn_collapse">\n            <div class="ndn_accordion-inner">\n                <ul class="ndn_nav ndn_nav-tabs ndn_lite ndn_nav-phone ndn_playlistTabs"></ul>\n            </div>\n        </div>\n    </div>\n</div>\n<!--SMALL DISPLAY CATEGORIES TABS END--> \n<!--COMPANION CONTAINER START-->\n<div class="ndn_companion"></div>\n<!--COMPANION CONTAINER END-->\n<!--THUMBNAILS START-->\n<div class="ndn_playlistThumbnailsPages ndn_selectableVideos">\n</div>\n<!--THUMBNAILS END--> \n<!--PAGINATION START-->\n<div class="ndn_playlistThumbnailsPagination ndn_js_pagination ndn_pagination ndn_pagination-centered"></div>\n<!--PAGINATION START-->'}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/playlistTabs.html",[],function(){return'{{#playlists}}\n	<li><a href="#" data-playlist-id="{{id}}">{{label}}</a></li>\n{{/playlists}}'}),Ndn_Require.define("text!templates/ndn/widget/video-player/16x9/playlistThumbnailsPage.html",[],function(){return'{{#playlistItems}}\n	<li class="ndn_selectableVideo ndn_thumb ndn_js_playlistLi" data-video-id="{{videoId}}" data-video-index="{{videoIndex}}">\n    	<div class="ndn_selectableVideoInner">\n    		<div class="ndn_thumbContainer">    			\n    			<img class="ndn_thbImage" src="{{thumbnailUrl}}" title="{{videoTitle}}" />\n    			<div class="ndn_nowPlaying">Now Playing</div>\n    			<div class="ndn_upcomingVideo">Up Next</div>\n    		</div>\n    		<p class="ndn_videoTitle">{{videoTitle}}</p>\n    		<p class="ndn_videoMeta">{{displayDuration}} / {{#producer}}{{name}}{{/producer}}</p>\n    	</div>\n	</li>\n{{/playlistItems}}'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/16x9Model",["jquery","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/16x9View","text!templates/ndn/widget/video-player/16x9/default.html","text!templates/ndn/widget/video-player/16x9/playlistTabs.html","text!templates/ndn/widget/video-player/16x9/playlistThumbnailsPage.html"],function(e,t,i,n,o,a){return t.extend({defaults:{widgetView:i,templatePaths:{"default":n,playlistTabs:o,playlistThumbnailsPage:a},playlists:[],playlistItemsLimit:36},initialize:function(){t.prototype.initialize.apply(this,arguments),this.get("videoPlayer").setPlaylistItemsLimit(this.get("playlistItemsLimit")),this.getSettings().done(e.proxy(function(e){this.set({playlists:e.associatedPlaylists})},this))}})}),Ndn_Require.define("views/Ndn/Widget/VideoPlayer/PTRView",["jquery","views/Ndn/Widget/VideoPlayer/AbstractView","models/Ndn/Utils/UserAgent","models/Ndn/Widget","jquery_imagesloaded","jquery_bxslider"],function(e,t,i,n){return t.extend({events:{mouseenter:"onUserInteractionStart",touchstart:"onUserInteractionStart",mouseleave:"onUserInteractionEnd",touchend:"onUserInteractionEnd","click .ndn_sliderContainer li a":"onThumbnailClick","click .ndn_sliderNext":"onNextClick","click .ndn_sliderPrev":"onPrevClick"},carousel:null,initialize:function(){t.prototype.initialize.apply(this,arguments),this.model.on("change:userHasInteracted",e.proxy(function(){1!=this.model.get("userHasInteracted")||this.model.get("displayingSlider")||(this.model.unmutePlayer(),this.model.set("videoLengthToPlay",0))},this)),this.model.get("videoPlayer").on("adEnd",e.proxy(function(){this.model.get("userHasInteracted")&&(this.model.unmutePlayer(),this.model.set("videoLengthToPlay",0))},this)).on("videoTimeUpdate",e.proxy(function(e){this.model.get("videoLengthToPlay")>0&&e.data.currentTime>this.model.get("videoLengthToPlay")&&this.onRmmFinished()},this)).on("videoEnd",e.proxy(function(){(this.model.isPlayerMuted()||!this.model.isInView(this.$el))&&this.onRmmFinished()},this)).on("rmmEnd",e.proxy(function(){this.onRmmFinished()},this))},initializeVideoPlayer:function(){this.model.isInView(this.$el)?(this.model.setPlayerBehavior(),t.prototype.initializeVideoPlayer.apply(this,arguments),this.model.mutePlayer()):(this.model.setupRmm(),this.initializeVideoPlayerForRmm())},onRmmFinished:function(e){e=_.isUndefined(e)?!0:e,this.model.set("displayingSlider",!0),this.updateSelectableVideos();var t={};t.$container=this.$el.find(".ndn_sliderContainer"),t.playlistLength=this.model.getCurrentPlaylistLength(),t.carousel=this.carousel,t.transitionToSlider=this.transitionToSlider,e?t.$container.find(".ndn_videoPlayer").fadeTo(1e3,.01).fadeOut(1e3,function(){this.transitionToSlider(t)}.bind(t)):this.transitionToSlider(t),this.model.destroyPlayer()},transitionToSlider:function(e){e.playlistLength>1&&e.$container.find(".ndn_sliderControls").show(),e.carousel.stopAuto(),e.carousel.goToSlide(0),e.carousel.startAuto(),e.$container.find(".ndn_videoPlayerWrapper").hide(),e.$container.find(".ndn_videoPlayerWrapper").detach()},onUserInteractionStart:function(){this.model.set({userHasInteracted:!0})},onUserInteractionEnd:function(){},onPrevClick:function(){this.carousel.stopAuto(),this.carousel.goToPrevSlide(),this.carousel.startAuto()},onNextClick:function(){this.carousel.stopAuto(),this.carousel.goToNextSlide(),this.carousel.startAuto()},onThumbnailClick:function(t){var i=t.currentTarget;void 0!==e(i).attr("href")&&this.openNdnWindow(e(i).attr("href")),t.preventDefault()},updateSelectableVideos:function(){var e=this.model.get("config"),t=_.first(this.model.get("videoPlayer").getActivePlaylistData().items,6);_.each(t,function(t){t.playerConfig={type:"VideoPlayer/16x9",widgetId:e.widgetId,trackingGroup:e.trackingGroup,playlistId:e.playlistId},t.baseUrl=n.getAppUrl()}.bind(e)),this.render(this.model.getTemplate("selectableVideos"),{landingPageUrl:this.model.getLandingPageUrl(),appUrl:n.getAppUrl(),urlSuffix:n.getAppUrlSuffix(),playlistItems:t,embedOriginUrl:encodeURIComponent(n.getEmbedOriginUrl()),videoIndex:function(){var e=0;return function(){return e++}}()},".ndn_selectableVideos"),1==_.isNull(this.carousel)?this.carousel=this.$el.find(".ndn_selectableVideos").bxSlider({pager:!1,controls:!1,slideWidth:300,auto:!0,autoHover:!0,pause:7e3,onSliderLoad:function(){this.loadImagesForSlide(0)}.bind(this),onSlideBefore:function(e,t,i){this.loadImagesForSlide(i)}.bind(this)}):this.carousel.reloadSlider()}})}),Ndn_Require.define("text!templates/ndn/widget/video-player/ptr/default.html",[],function(){return'<div class="ndn_sliderContainer">\n	<div class="ndn_videoPlayerWrapper">\n		<div id="{{playerContainerElementId}}" class="ndn_playerContainer"></div>\n	</div>\n	<ul class="ndn_sliderItems ndn_selectableVideos"></ul>\n	<div class="ndn_sliderControls">\n		<div class="ndn_sliderPrev ndn_sliderNavButton">\n			<div class="ndn_arrow"></div>\n		</div>\n		<div class="ndn_sliderNext ndn_sliderNavButton">\n			<div class="ndn_arrow"></div>\n		</div>\n	</div>\n</div>'}),Ndn_Require.define("text!templates/ndn/widget/video-player/ptr/selectableVideos.html",[],function(){return'{{#playlistItems}}\n    <li data-video-id="{{videoId}}" title="{{videoTitle}}" data-video-index="{{videoIndex}}" class="ndn_selectableVideo">\n    	<a href="{{landingPageUrl}}?type={{playerConfig.type}}&widgetId={{playerConfig.widgetId}}&trackingGroup={{playerConfig.trackingGroup}}&playlistId={{playerConfig.playlistId}}&videoId={{videoId}}&embedOriginUrl={{embedOriginUrl}}">\n	    	<header class="ndn_sliderThumbnailOverlay">\n	    		<div class="ndn_playButton"></div>\n	    		<p>{{videoTitle}}</p>\n	    		<img data-src="{{producer.logoUrl}}" class="ndn_providerLogo"/>\n	    	</header>\n        	<img data-src="{{stillImageUrl}}"/>\n        </a>\n    </li>\n{{/playlistItems}}'}),Ndn_Require.define("models/Ndn/Widget/VideoPlayer/PTRModel",["jquery","models/Ndn/Widget","models/Ndn/Utils/UserAgent","models/Ndn/Widget/VideoPlayer/AbstractModel","views/Ndn/Widget/VideoPlayer/PTRView","text!templates/ndn/widget/video-player/ptr/default.html","text!templates/ndn/widget/video-player/ptr/selectableVideos.html"],function(e,t,i,n,o,a,r){return n.extend({defaults:{widgetView:o,templatePaths:{"default":a,selectableVideos:r},playlistItemsLimit:15,videoLengthToPlay:60,userHasInteracted:!1,displayingSlider:!1},initialize:function(e){n.prototype.initialize.apply(this,arguments),this.get("videoPlayer").set("forceSoundOffForAdCall",!0),this.get("videoPlayer").setPlaylistItemsLimit(this.get("playlistItemsLimit")),this.get("videoPlayer").set("infoPanelEnabled",!1),i.isAbleToPlayVideoAutomatically()&&this.set(e,_.extend(e,{autoPlay:!0}))},setPlayerBehavior:function(){this.set("config",_.extend(this.get("config"),{ptrBehavior:!0}))},setupRmm:function(){this.set("config",_.extend(this.get("config"),{playOnMouseover:!1})),this.set("config",_.extend(this.get("config"),{autoPlay:!1}))},getCurrentPlaylistLength:function(){return this.get("videoPlayer").get("playlistData").items.length},isPlayerMuted:function(){return this.get("videoPlayer").getMuted()||0==this.get("videoPlayer").getVolume()},mutePlayer:function(){this.get("videoPlayer").mute()},unmutePlayer:function(){this.get("videoPlayer").set("forceSoundOffForAdCall",!1),this.get("videoPlayer").unmute()},destroyPlayer:function(){var e=this.get("videoPlayer").get("player").getCurrentTime();this.get("videoPlayer").get("player").destroy();var t={getCurrentTime:function(){return e}};this.get("videoPlayer").set("player",t)}})}),Ndn_Require.define("models/Ndn/Widget/VideoLauncher/AbstractModel",["jquery","underscore","models/Ndn/Widget","models/Ndn/VideoPlayer","models/Ndn/Utils/UserAgent"],function(e,t,i,n,o){return i.extend({defaults:{videoPlayer:null},initialize:function(){i.prototype.initialize.apply(this,arguments),o.isAbleToPlayVideoAutomatically()||this.set("config",t.extend(this.get("config"),{adsEnabled:!1}))},initializeVideoPlayer:function(){this.set("videoPlayer",new n(this)),this.get("videoPlayer").on("embed",e.proxy(function(){this.get("videoPlayer").loadPlaylist(this.get("config").playlistId).done(e.proxy(function(){this.onceConfigIsComplete(e.proxy(function(){o.isAbleToPlayVideoAutomatically()?this.get("videoPlayer").playRmm():this.get("videoPlayer").setDefaultPlayOnLoadValue(!1).load()},this))},this))},this))},embed:function(){return e.Deferred(e.proxy(function(){this.get("view").render(this.getTemplate("default"),{playerContainerElementId:this.getPlayerContainerElementId()}),this.get("videoPlayer").embed(this.getPlayerContainerElementId())},this)).promise()},getLandingPageUrl:function(){return"http://"+i.getAppDomain()+"/"}})}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/AbstractView",["jquery","views/Ndn/AbstractView"],function(e,t){return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.model.get("videoPlayer")&&this.model.get("videoPlayer").on("embed",e.proxy(function(){this.initializeOverlays()},this))},initializeOverlays:function(){this.$el.append(e(document.createElement("div")).addClass("ndn_pauseOverlayContainer"))}})}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/Slider300x250View",["jquery","views/Ndn/Widget/VideoLauncher/AbstractView","models/Ndn/Utils/UserAgent","models/Ndn/Widget","jquery_imagesloaded","jquery_bxslider"],function(e,t,i,n){return t.extend({events:{"click .ndn_sliderContainer li a":"onThumbnailClick","click .ndn_sliderNext":"onNextClick","click .ndn_sliderPrev":"onPrevClick"},carousel:null,initialize:function(){t.prototype.initialize.apply(this,arguments),i.isAbleToPlayVideoAutomatically()?this.model.get("videoPlayer").on("rmmEnd",e.proxy(function(){this.onTeaserFinished()},this)):this.model.get("videoPlayer").on("embed",e.proxy(function(){this.$el.find(".ndn_videoPlayerWrapper").hide()},this)).on("change:hasVideoLoaded",e.proxy(function(){this.onTeaserFinished(!1)},this)),this.model.get("videoPlayer").on("pause",e.proxy(function(){if(!this.model.get("videoPlayer").isPlayingAd()){var e=this.model.get("config"),t=_.first(this.model.get("videoPlayer").getActivePlaylistData().items),i=this.model.getLandingPageUrl()+"?type=VideoPlayer/16x9&widgetId="+e.widgetId+"&trackingGroup="+e.trackingGroup+"&playlistId="+e.playlistId+"&siteSection="+e.siteSection+"&videoId="+t.videoId+"&embedOriginUrl="+encodeURIComponent(n.getEmbedOriginUrl());this.openNdnWindow(i),this.onTeaserFinished()}},this))},onTeaserFinished:function(e){e=_.isUndefined(e)?!0:e,this.updateSelectableVideos();var t={};t.$container=this.$el.find(".ndn_sliderContainer"),t.playlistLength=this.model.getCurrentPlaylistLength(),t.carousel=this.carousel,t.transitionToSlider=this.transitionToSlider,e?t.$container.find(".ndn_videoPlayer").fadeTo(1e3,.01).fadeOut(1e3,function(){this.transitionToSlider(t)}.bind(t)):this.transitionToSlider(t)},transitionToSlider:function(e){e.$container.find(".ndn_videoPlayerWrapper").remove(),e.playlistLength>1&&e.$container.find(".ndn_sliderControls").show(),e.carousel.stopAuto(),e.carousel.goToSlide(0),e.carousel.startAuto()},onPrevClick:function(){this.carousel.stopAuto(),this.carousel.goToPrevSlide(),this.carousel.startAuto()},onNextClick:function(){this.carousel.stopAuto(),this.carousel.goToNextSlide(),this.carousel.startAuto()},onThumbnailClick:function(t){var i=t.currentTarget;void 0!==e(i).attr("href")&&this.openNdnWindow(e(i).attr("href")),t.preventDefault()},updateSelectableVideos:function(){var e=this.model.get("config"),t=_.first(this.model.get("videoPlayer").getActivePlaylistData().items,6);_.each(t,function(t){t.playerConfig={type:"VideoPlayer/16x9",widgetId:e.widgetId,trackingGroup:e.trackingGroup,playlistId:e.playlistId},t.baseUrl=n.getAppUrl()}.bind(e)),this.render(this.model.getTemplate("selectableVideos"),{landingPageUrl:this.model.getLandingPageUrl(),appUrl:n.getAppUrl(),urlSuffix:n.getAppUrlSuffix(),playlistItems:t,embedOriginUrl:encodeURIComponent(n.getEmbedOriginUrl()),siteSection:this.model.get("config").siteSection,videoIndex:function(){var e=0;return function(){return e++}}()},".ndn_selectableVideos"),this.carousel=this.$el.find(".ndn_selectableVideos").bxSlider({pager:!1,controls:!1,slideWidth:300,auto:!0,autoHover:!0,pause:7e3,onSliderLoad:function(){this.loadImagesForSlide(0)}.bind(this),onSlideBefore:function(e,t,i){this.loadImagesForSlide(i)}.bind(this)})}})}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/slider300x250/default.html",[],function(){return'<div class="ndn_sliderContainer">\n	<div class="ndn_videoPlayerWrapper">\n		<div id="{{playerContainerElementId}}" class="ndn_playerContainer"></div>\n	</div>\n	<ul class="ndn_sliderItems ndn_selectableVideos"></ul>\n	<div class="ndn_sliderControls">\n		<div class="ndn_sliderPrev ndn_sliderNavButton">\n			<div class="ndn_arrow"></div>\n		</div>\n		<div class="ndn_sliderNext ndn_sliderNavButton">\n			<div class="ndn_arrow"></div>\n		</div>\n	</div>\n</div>'}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/slider300x250/selectableVideos.html",[],function(){return'{{#playlistItems}}\n    <li data-video-id="{{videoId}}" title="{{videoTitle}}" data-video-index="{{videoIndex}}" class="ndn_selectableVideo">\n    	<a href="{{landingPageUrl}}?type={{playerConfig.type}}&widgetId={{playerConfig.widgetId}}&trackingGroup={{playerConfig.trackingGroup}}&playlistId={{playerConfig.playlistId}}&videoId={{videoId}}&siteSection={{siteSection}}&embedOriginUrl={{embedOriginUrl}}">\n	    	<header class="ndn_sliderThumbnailOverlay">\n	    		<div class="ndn_playButton"></div>\n	    		<p>{{videoTitle}}</p>\n	    		<img data-src="{{producer.logoUrl}}" class="ndn_providerLogo"/>\n	    	</header>\n        	<img data-src="{{stillImageUrl}}"/>\n        </a>\n    </li>\n{{/playlistItems}}'}),Ndn_Require.define("models/Ndn/Widget/VideoLauncher/Slider300x250Model",["jquery","models/Ndn/Widget","models/Ndn/Widget/VideoLauncher/AbstractModel","models/Ndn/PlayerServices","models/Ndn/VideoPlayer","views/Ndn/Widget/VideoLauncher/Slider300x250View","text!templates/ndn/widget/video-launcher/slider300x250/default.html","text!templates/ndn/widget/video-launcher/slider300x250/selectableVideos.html","jquery_responsive_containers"],function(e,t,i,n,o,a,r,s){return i.extend({defaults:{widgetView:a,templatePaths:{"default":r,selectableVideos:s},playlistItemsLimit:15},initialize:function(){this.initializeVideoPlayer(),i.prototype.initialize.apply(this,arguments),this.get("videoPlayer").setPlaylistItemsLimit(this.get("playlistItemsLimit"))},embed:function(){return e.Deferred(e.proxy(function(){this.get("view").render(this.getTemplate("default"),{landingPageUrl:this.getLandingPageUrl(),playerContainerElementId:this.getPlayerContainerElementId(),width:this.get("config").width,height:this.get("config").height,siteSection:this.get("config").siteSection}),this.get("videoPlayer").embed(this.getPlayerContainerElementId(),this.get("config"))},this)).promise()},getPlayerContainerElementId:function(){return this.get("widgetUid")+"-player"},getCurrentPlaylistLength:function(){return this.get("videoPlayer").get("playlistData").items.length}})}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/Playlist300x250View",["jquery","views/Ndn/Widget/VideoLauncher/AbstractView","models/Ndn/Utils/UserAgent","models/Ndn/Widget","jquery_imagesloaded","jquery_bxslider"],function(e,t,i,n){return t.extend({events:{"click .ndn_sliderContainer li a":"onThumbnailClick","click .ndn_sliderNext":"onNextClick","click .ndn_sliderPrev":"onPrevClick","change .ndn_playlistSelectContainer select":"onSelectChange"},carousel:null,slides:4,defaultSliderConfig:{},initialize:function(){t.prototype.initialize.apply(this,arguments),this.defaultSliderConfig={pager:!1,controls:!1,slideWidth:300,auto:!0,autoHover:!0,pause:7e3,onSliderLoad:function(){this.loadImagesForSlide(0,".ndn_sliderPlaylistPane")}.bind(this),onSlideBefore:function(e,t,i){this.loadImagesForSlide(i,".ndn_sliderPlaylistPane")}.bind(this)},i.isAbleToPlayVideoAutomatically()?this.model.get("videoPlayer").on("rmmEnd",e.proxy(function(){this.onTeaserFinished()},this)):this.model.get("videoPlayer").on("embed",e.proxy(function(){this.$el.find(".ndn_videoPlayerWrapper").hide()},this)).on("change:hasVideoLoaded",e.proxy(function(){this.onTeaserFinished(!1)},this)),this.model.get("videoPlayer").on("pause",e.proxy(function(){if(!this.model.get("videoPlayer").isPlayingAd()){var e=this.model.get("config"),t=_.first(this.model.get("videoPlayer").getActivePlaylistData().items),i=this.model.getLandingPageUrl()+"?type=VideoPlayer/16x9&widgetId="+e.widgetId+"&trackingGroup="+e.trackingGroup+"&playlistId="+e.playlistId+"&siteSection="+e.siteSection+"&videoId="+t.videoId+"&embedOriginUrl="+encodeURIComponent(n.getEmbedOriginUrl());this.openNdnWindow(i),this.onTeaserFinished()}},this))},onTeaserFinished:function(e){e=_.isUndefined(e)?!0:e,this.updateSelectableVideos(),this.updatePlaylistSelect(),e?this.$el.find(".ndn_videoPlayer").fadeTo(1e3,.01).fadeOut(1e3,function(){this.transitionToSlider()}.bind(this)):this.transitionToSlider()},transitionToSlider:function(){this.$el.find(".ndn_sliderPlaylistPane li:nth-child(odd)").addClass("ndn_odd"),this.$el.find(".ndn_videoPlayerWrapper").remove(),this.$el.find(".ndn_playlistSelectContainer").show(),this.$el.find(".ndn_sliderControls").show(),this.carousel.stopAuto(),this.carousel.goToSlide(0),this.carousel.startAuto()},updatePlaylistSelect:function(){this.render(this.model.getTemplate("playlistSelect"),{playlists:this.model.getPlaylistsList(),single:this.model.getPlaylistsList().length<=1},".ndn_playlistSelectContainer")},updateSelectableVideos:function(){var e=this.model.get("config"),t=_.first(this.model.get("videoPlayer").getActivePlaylistData().items,12);_.each(t,function(t){t.playerConfig={type:"VideoPlayer/16x9",widgetId:e.widgetId,trackingGroup:e.trackingGroup,playlistId:this.model.get("videoPlayer").getActivePlaylistData().playlistId}}.bind(this)),t=this.model.chunkPlaylist(t,4,12),this.render(this.model.getTemplate("selectableVideos"),{landingPageUrl:this.model.getLandingPageUrl(),appUrl:n.getAppUrl(),embedOriginUrl:encodeURIComponent(n.getEmbedOriginUrl()),urlSuffix:n.getAppUrlSuffix(),playlistItems:t,playlists:[this.model.get("videoPlayer").get("playlistId")],siteSection:this.model.get("config").siteSection,videoIndex:function(){var e=0;return function(){return e++}}()},".ndn_selectableVideos"),_.isNull(this.carousel)?this.carousel=this.$el.find(".ndn_selectableVideos").bxSlider(this.defaultSliderConfig):this.carousel.reloadSlider(1==t.length?_.extend(this.defaultSliderConfig,{auto:!1}):this.defaultSliderConfig),1==t.length?this.$el.find(".ndn_sliderControls").hide():this.$el.find(".ndn_sliderControls").show(),this.$el.find(".ndn_sliderThumbnailOverlay p").ellipsis(),this.$el.find(".ndn_sliderPlaylistPane li:nth-child(odd)").addClass("ndn_odd")},onPrevClick:function(){this.carousel.stopAuto(),this.carousel.goToPrevSlide(),this.carousel.startAuto()},onNextClick:function(){this.carousel.stopAuto(),this.carousel.goToNextSlide(),this.carousel.startAuto()},onThumbnailClick:function(t){var i=t.currentTarget;void 0!==e(i).attr("href")&&this.openNdnWindow(e(i).attr("href")),t.preventDefault()},onSelectChange:function(e){this.model.get("videoPlayer").loadPlaylist(e.target.value).done(function(){this.updateSelectableVideos()}.bind(this))}})}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/playlist300x250/default.html",[],function(){return'<div class="ndn_sliderContainer">\n	<div class="ndn_playlistSelectContainer">\n	</div>\n	<div class="ndn_videoPlayerWrapper">\n		<div id="{{playerContainerElementId}}" class="ndn_playerContainer"></div>\n	</div>\n	<ul class="ndn_sliderItems ndn_selectableVideos"></ul>\n	<div class="ndn_sliderControls">\n		<div class="ndn_sliderPrev ndn_sliderNavButton">\n			<div class="ndn_arrow"></div>\n		</div>\n		<div class="ndn_sliderNext ndn_sliderNavButton">\n			<div class="ndn_arrow"></div>\n		</div>\n	</div>\n</div>'}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/playlist300x250/selectableVideos.html",[],function(){return'{{#playlistItems}}\n	<li>\n		<ul class="ndn_sliderPlaylistPane">\n	{{#.}}\n	    <li data-video-id="{{videoId}}" title="{{videoTitle}}" data-video-index="{{videoIndex}}" class="ndn_selectableVideo">\n	    	<a href="{{landingPageUrl}}?type={{playerConfig.type}}&widgetId={{playerConfig.widgetId}}&trackingGroup={{playerConfig.trackingGroup}}&playlistId={{playerConfig.playlistId}}&videoId={{videoId}}&siteSection={{siteSection}}&embedOriginUrl={{embedOriginUrl}}">\n            	<div class="ndn_thumbnailPlayButton">Play This Video</div>\n		    	<header class="ndn_sliderThumbnailOverlay">\n		    		<p>{{videoTitle}}</p>\n		    	</header>\n	        	<img data-src="{{stillImageUrl}}" />\n	        </a>\n	    </li>\n    {{/.}}\n    	</ul>\n	</li>\n{{/playlistItems}}'}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/playlist300x250/playlistSelect.html",[],function(){return'{{#single}}\n	<h2>\n		Today\'s Videos - {{#playlists}}{{title}}{{/playlists}}\n	</h2>\n{{/single}}\n{{^single}}\n	<select>\n		{{#playlists}}\n		<option value="{{id}}" {{#currentPlaylist}}selected{{/currentPlaylist}}>{{label}}</option>\n		{{/playlists}}\n	</select>\n{{/single}}'}),Ndn_Require.define("models/Ndn/Widget/VideoLauncher/Playlist300x250Model",["jquery","underscore","models/Ndn/Widget/VideoLauncher/AbstractModel","models/Ndn/VideoPlayer","views/Ndn/Widget/VideoLauncher/Playlist300x250View","text!templates/ndn/widget/video-launcher/playlist300x250/default.html","text!templates/ndn/widget/video-launcher/playlist300x250/selectableVideos.html","text!templates/ndn/widget/video-launcher/playlist300x250/playlistSelect.html"],function(e,t,i,n,o,a,r,s){return i.extend({defaults:{widgetView:o,templatePaths:{"default":a,selectableVideos:r,playlistSelect:s},playlistItemsLimit:15},initialize:function(){this.initializeVideoPlayer(),i.prototype.initialize.apply(this,arguments),this.get("videoPlayer").setPlaylistItemsLimit(this.get("playlistItemsLimit"))},getPlayerContainerElementId:function(){return this.get("widgetUid")+"-player"},getPlaylistsList:function(){return t.map(this.get("videoPlayer").get("playerData").associatedPlaylists,function(e){return this.get("videoPlayer").get("playlistId")==e.id&&(e.currentPlaylist=!0),t.pick(e,"id","label","currentPlaylist")}.bind(this))},chunkPlaylist:function(e,i,n){e=t.first(e,n);for(var o=new Array(n/i),a=0;a<o.length;a++)o[a]=new Array;return t.each(e,function(e,t){o[Math.floor(t/i)].push(e)}),t.filter(o,function(e){return e.length})}})}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/HorizontalView",["jquery","views/Ndn/Widget/VideoLauncher/AbstractView","models/Ndn/Utils/UserAgent","jquery_imagesloaded","jquery_bxslider","jquery_autoellipsis"],function(e,t){return t.extend({slides:4,events:{"click .ndn_sliderItems li a":"onThumbnailClick","click .ndn_sliderNext":"onNextClick","click .ndn_sliderPrev":"onPrevClick"},initialize:function(){t.prototype.initialize.apply(this,arguments),this.on("render",e.proxy(function(e){this.$el.addClass(e.params.launcherSize),this.model.set("carouselMaxSlides","ndn_horizontalSmall"==e.params.launcherSize?3:4),this.slides=this.model.get("carouselMaxSlides"),this.model.set("carousel",this.$el.find(".ndn_sliderItems").bxSlider({auto:!0,autoHover:!0,pause:7e3,pager:!1,controls:!1,slideWidth:120,slideMargin:6,minSlides:3,maxSlides:this.model.get("carouselMaxSlides"),onSliderLoad:function(){this.loadImagesForSlide(0)}.bind(this),onSlideBefore:function(e,t,i){this.loadImagesForSlide(i)}.bind(this)})),this.$el.find("p").ellipsis()},this))},onPrevClick:function(){var e=this.model.get("carousel");e.stopAuto(),e.goToPrevSlide(),e.startAuto()},onNextClick:function(){var e=this.model.get("carousel");e.stopAuto(),e.goToNextSlide(),e.startAuto()},onThumbnailClick:function(t){var i=t.currentTarget;void 0!==e(i).attr("href")&&this.openNdnWindow(e(i).attr("href")),t.preventDefault()}})}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/horizontal/default.html",[],function(){return'<div class="ndn_sliderPrev ndn_sliderNavButton"></div>\n<div class="ndn_sliderWrapper">\n	<ul class="ndn_sliderItems">\n	{{#playlistItems}}\n		<li data-video-id="{{videoId}}" title="{{videoTitle}}" data-video-index="{{videoIndex}}" class="ndn_selectableVideo">\n			<a href="{{landingPageUrl}}?type={{playerConfig.type}}&widgetId={{playerConfig.widgetId}}&trackingGroup={{playerConfig.trackingGroup}}&playlistId={{playerConfig.playlistId}}&videoId={{playerConfig.videoId}}&siteSection={{siteSection}}&embedOriginUrl={{embedOriginUrl}}{{lessc}}">\n				<div class="ndn_sliderThumbnailImageWrapper">\n					<img data-src="{{thumbnailUrl}}"/>\n					<div class="ndn_sliderThumbnailPlay"></div>\n				</div>\n				<div class="ndn_sliderThumbnailOverlay">\n					<p>{{videoTitle}}</p>\n				</div>\n			</a>\n		</li>\n	{{/playlistItems}}\n	</ul>\n</div>\n<div class="ndn_sliderNext ndn_sliderNavButton"></div>'}),Ndn_Require.define("models/Ndn/Widget/VideoLauncher/HorizontalModel",["jquery","underscore","models/Ndn/Widget","models/Ndn/Widget/VideoLauncher/AbstractModel","models/Ndn/PlayerServices","models/Ndn/VideoPlayer","models/Ndn/Utils/UrlParser","views/Ndn/Widget/VideoLauncher/HorizontalView","text!templates/ndn/widget/video-launcher/horizontal/default.html"],function(e,t,i,n,o,a,r,s,l){var d="14126";return n.extend({defaults:{widgetView:s,templatePaths:{"default":l},playlistItemsLimit:12,carousel:null,carouselMaxSlides:null,carouselNumberOfSlides:null},initialize:function(){n.prototype.initialize.apply(this,arguments)},embed:function(){var i=this.get("config"),n=this.get("playlistItemsLimit");return e.Deferred(e.proxy(function(){this.getSettings().done(e.proxy(function(e){this.set({playlistData:e.playlists[t.first(t.keys(e.playlists))],playerData:e});var a=t.first(this.get("playlistData").items,12);a=t.map(a,function(e){var i={widgetId:this.get("config").widgetId,type:"VideoPlayer/16x9",playlistId:this.get("config").playlistId,trackingGroup:this.get("config").trackingGroup,videoId:e.videoId};return e=t.extend(e,{playerConfig:i})}.bind(this)),a.length<n?o.getPlaylistData(this,d).done(function(e){additionalPlaylist=t.first(e.playlists[t.first(t.keys(e.playlists))].items,12-a.length),additionalPlaylist=t.map(additionalPlaylist,function(e){var i={widgetId:this.get("config").widgetId,type:"VideoPlayer/16x9",playlistId:d,trackingGroup:this.get("config").trackingGroup,videoId:e.videoId};
return e=t.extend(e,{playerConfig:i})}.bind(this)),a=a.concat(additionalPlaylist),this.renderPlaylist(a,i)}.bind(this)):this.renderPlaylist(a,i)},this))},this)).promise()},renderPlaylist:function(e,t){var n=this.getContainerElement(),o=n.width()<=425?"ndn_horizontalSmall":"ndn_horizontalLarge";t.width&&(o=t.width<=425?"ndn_horizontalSmall":"ndn_horizontalLarge"),this.get("view").render(this.getTemplate("default"),{playlistItems:e,playerContainerElementId:this.getPlayerContainerElementId(),launcherSize:o,siteSection:this.get("config").siteSection,lessc:"dynamic"==r.getUrlVar("lessc")?"&lessc=dynamic":"",landingPageUrl:this.getLandingPageUrl(),appUrl:i.getAppUrl(),embedOriginUrl:encodeURIComponent(i.getEmbedOriginUrl())})},getPlayerContainerElementId:function(){return this.get("widgetUid")+"-player"}})}),Ndn_Require.define("views/Ndn/Widget/VideoLauncher/VerticalTowerView",["jquery","views/Ndn/Widget/VideoLauncher/AbstractView","models/Ndn/Utils/UserAgent","jquery_imagesloaded","jquery_bxslider"],function(e,t){return t.extend({events:{"click .ndn_verticalTowerWrapper a":"onThumbnailClick","click .ndn_verticalTowerNavPrev":"onPrevClick","click .ndn_verticalTowerNavNext":"onNextClick"},carousel:null,slides:5,initialize:function(){this.on("render",function(){this.initCarousel()}.bind(this))},onPrevClick:function(){this.carousel.goToPrevSlide()},onNextClick:function(){this.carousel.goToNextSlide()},onThumbnailClick:function(t){var i=t.currentTarget;void 0!==e(i).attr("href")&&this.openNdnWindow(e(i).attr("href")),t.preventDefault()},initCarousel:function(){this.carousel=this.$el.find("ul").bxSlider({controls:!1,maxSlides:5,minSlides:5,mode:"vertical",pager:!1,slideMargin:3,onSliderLoad:function(){this.loadImagesForSlide(0)}.bind(this),onSlideBefore:function(e,t,i){this.loadImagesForSlide(i)}.bind(this)})}})}),Ndn_Require.define("text!templates/ndn/widget/video-launcher/vertical/default.html",[],function(){return'<div class="ndn_verticalTowerWrapper">\n    <ul>\n    {{#playlistItems}}\n        <li data-video-id="{{videoId}}" title="{{videoTitle}}" data-video-index="{{videoIndex}}" class="ndn_selectableVideo" >\n        	<a href="{{landingPageUrl}}?type=VideoPlayer/16x9&widgetId={{widgetId}}&trackingGroup={{trackingGroup}}&playlistId={{playlistId}}&videoId={{videoId}}&siteSection={{siteSection}}&embedOriginUrl={{embedOriginUrl}}{{lessc}}">\n	        	<img data-src="{{thumbnailUrl}}"/>\n	        	<div class="ndn_verticalThumbnailPlay"></div>\n	    		<p>{{videoTitle}}</p>\n            </a>\n        </li>\n    {{/playlistItems}}\n    </ul>\n</div>\n<div class="ndn_verticalTowerNav">\n    <a class="ndn_verticalTowerNavNext">Next</a>\n    <a class="ndn_verticalTowerNavPrev">Previous</a>\n</div>'}),Ndn_Require.define("models/Ndn/Widget/VideoLauncher/VerticalTowerModel",["jquery","underscore","models/Ndn/Widget","models/Ndn/Utils/UrlParser","models/Ndn/Widget/VideoLauncher/AbstractModel","views/Ndn/Widget/VideoLauncher/VerticalTowerView","text!templates/ndn/widget/video-launcher/vertical/default.html"],function(e,t,i,n,o,a,r){return o.extend({defaults:{widgetView:a,templatePaths:{"default":r},playlistItemsLimit:15},initialize:function(){o.prototype.initialize.apply(this,arguments)},embed:function(){return e.Deferred(e.proxy(function(){this.getSettings().done(e.proxy(function(e){this.set({playlistData:e.playlists[t.first(t.keys(e.playlists))],playerData:e});var o="ndn_horizontalLarge";this.get("config").width&&this.get("config").width<=425&&(o="ndn_horizontalSmall"),this.get("view").render(this.getTemplate("default"),{playlistItems:this.get("playlistData").items,playerContainerElementId:this.getPlayerContainerElementId(),launcherSize:o,widgetId:this.get("config").widgetId,playlistId:this.get("config").playlistId,trackingGroup:this.get("config").trackingGroup,siteSection:this.get("config").siteSection,lessc:"dynamic"==n.getUrlVar("lessc")?"&lessc=dynamic":"",landingPageUrl:this.getLandingPageUrl(),appUrl:i.getAppUrl(),embedOriginUrl:encodeURIComponent(i.getEmbedOriginUrl())})},this))},this)).promise()}})}),Ndn_Require.define("models/Ndn/Widget",function(){});